import{r as t,c as r,g as e}from"./p-c520c23f.js";const n=typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}var o=i;var a=s;if(typeof n.setTimeout==="function"){o=setTimeout}if(typeof n.clearTimeout==="function"){a=clearTimeout}function u(t){if(o===setTimeout){return setTimeout(t,0)}if((o===i||!o)&&setTimeout){o=setTimeout;return setTimeout(t,0)}try{return o(t,0)}catch(r){try{return o.call(null,t,0)}catch(r){return o.call(this,t,0)}}}function f(t){if(a===clearTimeout){return clearTimeout(t)}if((a===s||!a)&&clearTimeout){a=clearTimeout;return clearTimeout(t)}try{return a(t)}catch(r){try{return a.call(null,t)}catch(r){return a.call(this,t)}}}var c=[];var h=false;var l;var d=-1;function v(){if(!h||!l){return}h=false;if(l.length){c=l.concat(c)}else{d=-1}if(c.length){w()}}function w(){if(h){return}var t=u(v);h=true;var r=c.length;while(r){l=c;c=[];while(++d<r){if(l){l[d].run()}}d=-1;r=c.length}l=null;h=false;f(t)}function m(t){var r=new Array(arguments.length-1);if(arguments.length>1){for(var e=1;e<arguments.length;e++){r[e-1]=arguments[e]}}c.push(new y(t,r));if(c.length===1&&!h){u(w)}}function y(t,r){this.fun=t;this.array=r}y.prototype.run=function(){this.fun.apply(null,this.array)};var b="browser";var p="browser";var E=true;var g={};var P=[];var S="";var _={};var k={};var T={};function O(){}var A=O;var $=O;var j=O;var R=O;var D=O;var N=O;var I=O;function M(t){throw new Error("process.binding is not supported")}function x(){return"/"}function C(t){throw new Error("process.chdir is not supported")}function L(){return 0}var B=n.performance||{};var F=B.now||B.mozNow||B.msNow||B.oNow||B.webkitNow||function(){return(new Date).getTime()};function q(t){var r=F.call(B)*.001;var e=Math.floor(r);var n=Math.floor(r%1*1e9);if(t){e=e-t[0];n=n-t[1];if(n<0){e--;n+=1e9}}return[e,n]}var U=new Date;function W(){var t=new Date;var r=t-U;return r/1e3}var G={nextTick:m,title:b,browser:E,env:g,argv:P,version:S,versions:_,on:A,addListener:$,once:j,off:R,removeListener:D,removeAllListeners:N,emit:I,binding:M,cwd:x,chdir:C,umask:L,hrtime:q,platform:p,release:k,config:T,uptime:W};const z="/developementjeep-sqlite\node_modulessql.jsdist";var H=[];var Z=[];var Q=typeof Uint8Array!=="undefined"?Uint8Array:Array;var J=false;function V(){J=true;var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var r=0,e=t.length;r<e;++r){H[r]=t[r];Z[t.charCodeAt(r)]=r}Z["-".charCodeAt(0)]=62;Z["_".charCodeAt(0)]=63}function K(t){if(!J){V()}var r,e,n,i,s,o;var a=t.length;if(a%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}s=t[a-2]==="="?2:t[a-1]==="="?1:0;o=new Q(a*3/4-s);n=s>0?a-4:a;var u=0;for(r=0,e=0;r<n;r+=4,e+=3){i=Z[t.charCodeAt(r)]<<18|Z[t.charCodeAt(r+1)]<<12|Z[t.charCodeAt(r+2)]<<6|Z[t.charCodeAt(r+3)];o[u++]=i>>16&255;o[u++]=i>>8&255;o[u++]=i&255}if(s===2){i=Z[t.charCodeAt(r)]<<2|Z[t.charCodeAt(r+1)]>>4;o[u++]=i&255}else if(s===1){i=Z[t.charCodeAt(r)]<<10|Z[t.charCodeAt(r+1)]<<4|Z[t.charCodeAt(r+2)]>>2;o[u++]=i>>8&255;o[u++]=i&255}return o}function X(t){return H[t>>18&63]+H[t>>12&63]+H[t>>6&63]+H[t&63]}function Y(t,r,e){var n;var i=[];for(var s=r;s<e;s+=3){n=(t[s]<<16)+(t[s+1]<<8)+t[s+2];i.push(X(n))}return i.join("")}function tt(t){if(!J){V()}var r;var e=t.length;var n=e%3;var i="";var s=[];var o=16383;for(var a=0,u=e-n;a<u;a+=o){s.push(Y(t,a,a+o>u?u:a+o))}if(n===1){r=t[e-1];i+=H[r>>2];i+=H[r<<4&63];i+="=="}else if(n===2){r=(t[e-2]<<8)+t[e-1];i+=H[r>>10];i+=H[r>>4&63];i+=H[r<<2&63];i+="="}s.push(i);return s.join("")}function rt(t,r,e,n,i){var s,o;var a=i*8-n-1;var u=(1<<a)-1;var f=u>>1;var c=-7;var h=e?i-1:0;var l=e?-1:1;var d=t[r+h];h+=l;s=d&(1<<-c)-1;d>>=-c;c+=a;for(;c>0;s=s*256+t[r+h],h+=l,c-=8){}o=s&(1<<-c)-1;s>>=-c;c+=n;for(;c>0;o=o*256+t[r+h],h+=l,c-=8){}if(s===0){s=1-f}else if(s===u){return o?NaN:(d?-1:1)*Infinity}else{o=o+Math.pow(2,n);s=s-f}return(d?-1:1)*o*Math.pow(2,s-n)}function et(t,r,e,n,i,s){var o,a,u;var f=s*8-i-1;var c=(1<<f)-1;var h=c>>1;var l=i===23?Math.pow(2,-24)-Math.pow(2,-77):0;var d=n?0:s-1;var v=n?1:-1;var w=r<0||r===0&&1/r<0?1:0;r=Math.abs(r);if(isNaN(r)||r===Infinity){a=isNaN(r)?1:0;o=c}else{o=Math.floor(Math.log(r)/Math.LN2);if(r*(u=Math.pow(2,-o))<1){o--;u*=2}if(o+h>=1){r+=l/u}else{r+=l*Math.pow(2,1-h)}if(r*u>=2){o++;u/=2}if(o+h>=c){a=0;o=c}else if(o+h>=1){a=(r*u-1)*Math.pow(2,i);o=o+h}else{a=r*Math.pow(2,h-1)*Math.pow(2,i);o=0}}for(;i>=8;t[e+d]=a&255,d+=v,a/=256,i-=8){}o=o<<i|a;f+=i;for(;f>0;t[e+d]=o&255,d+=v,o/=256,f-=8){}t[e+d-v]|=w*128}var nt={}.toString;var it=Array.isArray||function(t){return nt.call(t)=="[object Array]"};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var st=50;ut.TYPED_ARRAY_SUPPORT=n.TYPED_ARRAY_SUPPORT!==undefined?n.TYPED_ARRAY_SUPPORT:true;function ot(){return ut.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function at(t,r){if(ot()<r){throw new RangeError("Invalid typed array length")}if(ut.TYPED_ARRAY_SUPPORT){t=new Uint8Array(r);t.__proto__=ut.prototype}else{if(t===null){t=new ut(r)}t.length=r}return t}function ut(t,r,e){if(!ut.TYPED_ARRAY_SUPPORT&&!(this instanceof ut)){return new ut(t,r,e)}if(typeof t==="number"){if(typeof r==="string"){throw new Error("If encoding is specified then the first argument must be a string")}return lt(this,t)}return ft(this,t,r,e)}ut.poolSize=8192;ut._augment=function(t){t.__proto__=ut.prototype;return t};function ft(t,r,e,n){if(typeof r==="number"){throw new TypeError('"value" argument must not be a number')}if(typeof ArrayBuffer!=="undefined"&&r instanceof ArrayBuffer){return wt(t,r,e,n)}if(typeof r==="string"){return dt(t,r,e)}return mt(t,r)}ut.from=function(t,r,e){return ft(null,t,r,e)};if(ut.TYPED_ARRAY_SUPPORT){ut.prototype.__proto__=Uint8Array.prototype;ut.__proto__=Uint8Array}function ct(t){if(typeof t!=="number"){throw new TypeError('"size" argument must be a number')}else if(t<0){throw new RangeError('"size" argument must not be negative')}}function ht(t,r,e,n){ct(r);if(r<=0){return at(t,r)}if(e!==undefined){return typeof n==="string"?at(t,r).fill(e,n):at(t,r).fill(e)}return at(t,r)}ut.alloc=function(t,r,e){return ht(null,t,r,e)};function lt(t,r){ct(r);t=at(t,r<0?0:yt(r)|0);if(!ut.TYPED_ARRAY_SUPPORT){for(var e=0;e<r;++e){t[e]=0}}return t}ut.allocUnsafe=function(t){return lt(null,t)};ut.allocUnsafeSlow=function(t){return lt(null,t)};function dt(t,r,e){if(typeof e!=="string"||e===""){e="utf8"}if(!ut.isEncoding(e)){throw new TypeError('"encoding" must be a valid string encoding')}var n=pt(r,e)|0;t=at(t,n);var i=t.write(r,e);if(i!==n){t=t.slice(0,i)}return t}function vt(t,r){var e=r.length<0?0:yt(r.length)|0;t=at(t,e);for(var n=0;n<e;n+=1){t[n]=r[n]&255}return t}function wt(t,r,e,n){if(e<0||r.byteLength<e){throw new RangeError("'offset' is out of bounds")}if(r.byteLength<e+(n||0)){throw new RangeError("'length' is out of bounds")}if(e===undefined&&n===undefined){r=new Uint8Array(r)}else if(n===undefined){r=new Uint8Array(r,e)}else{r=new Uint8Array(r,e,n)}if(ut.TYPED_ARRAY_SUPPORT){t=r;t.__proto__=ut.prototype}else{t=vt(t,r)}return t}function mt(t,r){if(bt(r)){var e=yt(r.length)|0;t=at(t,e);if(t.length===0){return t}r.copy(t,0,0,e);return t}if(r){if(typeof ArrayBuffer!=="undefined"&&r.buffer instanceof ArrayBuffer||"length"in r){if(typeof r.length!=="number"||tr(r.length)){return at(t,0)}return vt(t,r)}if(r.type==="Buffer"&&it(r.data)){return vt(t,r.data)}}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function yt(t){if(t>=ot()){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+ot().toString(16)+" bytes")}return t|0}ut.isBuffer=rr;function bt(t){return!!(t!=null&&t._isBuffer)}ut.compare=function t(r,e){if(!bt(r)||!bt(e)){throw new TypeError("Arguments must be Buffers")}if(r===e)return 0;var n=r.length;var i=e.length;for(var s=0,o=Math.min(n,i);s<o;++s){if(r[s]!==e[s]){n=r[s];i=e[s];break}}if(n<i)return-1;if(i<n)return 1;return 0};ut.isEncoding=function t(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};ut.concat=function t(r,e){if(!it(r)){throw new TypeError('"list" argument must be an Array of Buffers')}if(r.length===0){return ut.alloc(0)}var n;if(e===undefined){e=0;for(n=0;n<r.length;++n){e+=r[n].length}}var i=ut.allocUnsafe(e);var s=0;for(n=0;n<r.length;++n){var o=r[n];if(!bt(o)){throw new TypeError('"list" argument must be an Array of Buffers')}o.copy(i,s);s+=o.length}return i};function pt(t,r){if(bt(t)){return t.length}if(typeof ArrayBuffer!=="undefined"&&typeof ArrayBuffer.isView==="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer)){return t.byteLength}if(typeof t!=="string"){t=""+t}var e=t.length;if(e===0)return 0;var n=false;for(;;){switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case undefined:return Jt(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return Xt(t).length;default:if(n)return Jt(t).length;r=(""+r).toLowerCase();n=true}}}ut.byteLength=pt;function Et(t,r,e){var n=false;if(r===undefined||r<0){r=0}if(r>this.length){return""}if(e===undefined||e>this.length){e=this.length}if(e<=0){return""}e>>>=0;r>>>=0;if(e<=r){return""}if(!t)t="utf8";while(true){switch(t){case"hex":return xt(this,r,e);case"utf8":case"utf-8":return Rt(this,r,e);case"ascii":return It(this,r,e);case"latin1":case"binary":return Mt(this,r,e);case"base64":return jt(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ct(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase();n=true}}}ut.prototype._isBuffer=true;function gt(t,r,e){var n=t[r];t[r]=t[e];t[e]=n}ut.prototype.swap16=function t(){var r=this.length;if(r%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var e=0;e<r;e+=2){gt(this,e,e+1)}return this};ut.prototype.swap32=function t(){var r=this.length;if(r%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var e=0;e<r;e+=4){gt(this,e,e+3);gt(this,e+1,e+2)}return this};ut.prototype.swap64=function t(){var r=this.length;if(r%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var e=0;e<r;e+=8){gt(this,e,e+7);gt(this,e+1,e+6);gt(this,e+2,e+5);gt(this,e+3,e+4)}return this};ut.prototype.toString=function t(){var r=this.length|0;if(r===0)return"";if(arguments.length===0)return Rt(this,0,r);return Et.apply(this,arguments)};ut.prototype.equals=function t(r){if(!bt(r))throw new TypeError("Argument must be a Buffer");if(this===r)return true;return ut.compare(this,r)===0};ut.prototype.inspect=function t(){var r="";var e=st;if(this.length>0){r=this.toString("hex",0,e).match(/.{2}/g).join(" ");if(this.length>e)r+=" ... "}return"<Buffer "+r+">"};ut.prototype.compare=function t(r,e,n,i,s){if(!bt(r)){throw new TypeError("Argument must be a Buffer")}if(e===undefined){e=0}if(n===undefined){n=r?r.length:0}if(i===undefined){i=0}if(s===undefined){s=this.length}if(e<0||n>r.length||i<0||s>this.length){throw new RangeError("out of range index")}if(i>=s&&e>=n){return 0}if(i>=s){return-1}if(e>=n){return 1}e>>>=0;n>>>=0;i>>>=0;s>>>=0;if(this===r)return 0;var o=s-i;var a=n-e;var u=Math.min(o,a);var f=this.slice(i,s);var c=r.slice(e,n);for(var h=0;h<u;++h){if(f[h]!==c[h]){o=f[h];a=c[h];break}}if(o<a)return-1;if(a<o)return 1;return 0};function Pt(t,r,e,n,i){if(t.length===0)return-1;if(typeof e==="string"){n=e;e=0}else if(e>2147483647){e=2147483647}else if(e<-2147483648){e=-2147483648}e=+e;if(isNaN(e)){e=i?0:t.length-1}if(e<0)e=t.length+e;if(e>=t.length){if(i)return-1;else e=t.length-1}else if(e<0){if(i)e=0;else return-1}if(typeof r==="string"){r=ut.from(r,n)}if(bt(r)){if(r.length===0){return-1}return St(t,r,e,n,i)}else if(typeof r==="number"){r=r&255;if(ut.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf==="function"){if(i){return Uint8Array.prototype.indexOf.call(t,r,e)}else{return Uint8Array.prototype.lastIndexOf.call(t,r,e)}}return St(t,[r],e,n,i)}throw new TypeError("val must be string, number or Buffer")}function St(t,r,e,n,i){var s=1;var o=t.length;var a=r.length;if(n!==undefined){n=String(n).toLowerCase();if(n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le"){if(t.length<2||r.length<2){return-1}s=2;o/=2;a/=2;e/=2}}function u(t,r){if(s===1){return t[r]}else{return t.readUInt16BE(r*s)}}var f;if(i){var c=-1;for(f=e;f<o;f++){if(u(t,f)===u(r,c===-1?0:f-c)){if(c===-1)c=f;if(f-c+1===a)return c*s}else{if(c!==-1)f-=f-c;c=-1}}}else{if(e+a>o)e=o-a;for(f=e;f>=0;f--){var h=true;for(var l=0;l<a;l++){if(u(t,f+l)!==u(r,l)){h=false;break}}if(h)return f}}return-1}ut.prototype.includes=function t(r,e,n){return this.indexOf(r,e,n)!==-1};ut.prototype.indexOf=function t(r,e,n){return Pt(this,r,e,n,true)};ut.prototype.lastIndexOf=function t(r,e,n){return Pt(this,r,e,n,false)};function _t(t,r,e,n){e=Number(e)||0;var i=t.length-e;if(!n){n=i}else{n=Number(n);if(n>i){n=i}}var s=r.length;if(s%2!==0)throw new TypeError("Invalid hex string");if(n>s/2){n=s/2}for(var o=0;o<n;++o){var a=parseInt(r.substr(o*2,2),16);if(isNaN(a))return o;t[e+o]=a}return o}function kt(t,r,e,n){return Yt(Jt(r,t.length-e),t,e,n)}function Tt(t,r,e,n){return Yt(Vt(r),t,e,n)}function Ot(t,r,e,n){return Tt(t,r,e,n)}function At(t,r,e,n){return Yt(Xt(r),t,e,n)}function $t(t,r,e,n){return Yt(Kt(r,t.length-e),t,e,n)}ut.prototype.write=function t(r,e,n,i){if(e===undefined){i="utf8";n=this.length;e=0}else if(n===undefined&&typeof e==="string"){i=e;n=this.length;e=0}else if(isFinite(e)){e=e|0;if(isFinite(n)){n=n|0;if(i===undefined)i="utf8"}else{i=n;n=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var s=this.length-e;if(n===undefined||n>s)n=s;if(r.length>0&&(n<0||e<0)||e>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!i)i="utf8";var o=false;for(;;){switch(i){case"hex":return _t(this,r,e,n);case"utf8":case"utf-8":return kt(this,r,e,n);case"ascii":return Tt(this,r,e,n);case"latin1":case"binary":return Ot(this,r,e,n);case"base64":return At(this,r,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $t(this,r,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase();o=true}}};ut.prototype.toJSON=function t(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function jt(t,r,e){if(r===0&&e===t.length){return tt(t)}else{return tt(t.slice(r,e))}}function Rt(t,r,e){e=Math.min(t.length,e);var n=[];var i=r;while(i<e){var s=t[i];var o=null;var a=s>239?4:s>223?3:s>191?2:1;if(i+a<=e){var u,f,c,h;switch(a){case 1:if(s<128){o=s}break;case 2:u=t[i+1];if((u&192)===128){h=(s&31)<<6|u&63;if(h>127){o=h}}break;case 3:u=t[i+1];f=t[i+2];if((u&192)===128&&(f&192)===128){h=(s&15)<<12|(u&63)<<6|f&63;if(h>2047&&(h<55296||h>57343)){o=h}}break;case 4:u=t[i+1];f=t[i+2];c=t[i+3];if((u&192)===128&&(f&192)===128&&(c&192)===128){h=(s&15)<<18|(u&63)<<12|(f&63)<<6|c&63;if(h>65535&&h<1114112){o=h}}}}if(o===null){o=65533;a=1}else if(o>65535){o-=65536;n.push(o>>>10&1023|55296);o=56320|o&1023}n.push(o);i+=a}return Nt(n)}var Dt=4096;function Nt(t){var r=t.length;if(r<=Dt){return String.fromCharCode.apply(String,t)}var e="";var n=0;while(n<r){e+=String.fromCharCode.apply(String,t.slice(n,n+=Dt))}return e}function It(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i){n+=String.fromCharCode(t[i]&127)}return n}function Mt(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i){n+=String.fromCharCode(t[i])}return n}function xt(t,r,e){var n=t.length;if(!r||r<0)r=0;if(!e||e<0||e>n)e=n;var i="";for(var s=r;s<e;++s){i+=Qt(t[s])}return i}function Ct(t,r,e){var n=t.slice(r,e);var i="";for(var s=0;s<n.length;s+=2){i+=String.fromCharCode(n[s]+n[s+1]*256)}return i}ut.prototype.slice=function t(r,e){var n=this.length;r=~~r;e=e===undefined?n:~~e;if(r<0){r+=n;if(r<0)r=0}else if(r>n){r=n}if(e<0){e+=n;if(e<0)e=0}else if(e>n){e=n}if(e<r)e=r;var i;if(ut.TYPED_ARRAY_SUPPORT){i=this.subarray(r,e);i.__proto__=ut.prototype}else{var s=e-r;i=new ut(s,undefined);for(var o=0;o<s;++o){i[o]=this[o+r]}}return i};function Lt(t,r,e){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}ut.prototype.readUIntLE=function t(r,e,n){r=r|0;e=e|0;if(!n)Lt(r,e,this.length);var i=this[r];var s=1;var o=0;while(++o<e&&(s*=256)){i+=this[r+o]*s}return i};ut.prototype.readUIntBE=function t(r,e,n){r=r|0;e=e|0;if(!n){Lt(r,e,this.length)}var i=this[r+--e];var s=1;while(e>0&&(s*=256)){i+=this[r+--e]*s}return i};ut.prototype.readUInt8=function t(r,e){if(!e)Lt(r,1,this.length);return this[r]};ut.prototype.readUInt16LE=function t(r,e){if(!e)Lt(r,2,this.length);return this[r]|this[r+1]<<8};ut.prototype.readUInt16BE=function t(r,e){if(!e)Lt(r,2,this.length);return this[r]<<8|this[r+1]};ut.prototype.readUInt32LE=function t(r,e){if(!e)Lt(r,4,this.length);return(this[r]|this[r+1]<<8|this[r+2]<<16)+this[r+3]*16777216};ut.prototype.readUInt32BE=function t(r,e){if(!e)Lt(r,4,this.length);return this[r]*16777216+(this[r+1]<<16|this[r+2]<<8|this[r+3])};ut.prototype.readIntLE=function t(r,e,n){r=r|0;e=e|0;if(!n)Lt(r,e,this.length);var i=this[r];var s=1;var o=0;while(++o<e&&(s*=256)){i+=this[r+o]*s}s*=128;if(i>=s)i-=Math.pow(2,8*e);return i};ut.prototype.readIntBE=function t(r,e,n){r=r|0;e=e|0;if(!n)Lt(r,e,this.length);var i=e;var s=1;var o=this[r+--i];while(i>0&&(s*=256)){o+=this[r+--i]*s}s*=128;if(o>=s)o-=Math.pow(2,8*e);return o};ut.prototype.readInt8=function t(r,e){if(!e)Lt(r,1,this.length);if(!(this[r]&128))return this[r];return(255-this[r]+1)*-1};ut.prototype.readInt16LE=function t(r,e){if(!e)Lt(r,2,this.length);var n=this[r]|this[r+1]<<8;return n&32768?n|4294901760:n};ut.prototype.readInt16BE=function t(r,e){if(!e)Lt(r,2,this.length);var n=this[r+1]|this[r]<<8;return n&32768?n|4294901760:n};ut.prototype.readInt32LE=function t(r,e){if(!e)Lt(r,4,this.length);return this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24};ut.prototype.readInt32BE=function t(r,e){if(!e)Lt(r,4,this.length);return this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]};ut.prototype.readFloatLE=function t(r,e){if(!e)Lt(r,4,this.length);return rt(this,r,true,23,4)};ut.prototype.readFloatBE=function t(r,e){if(!e)Lt(r,4,this.length);return rt(this,r,false,23,4)};ut.prototype.readDoubleLE=function t(r,e){if(!e)Lt(r,8,this.length);return rt(this,r,true,52,8)};ut.prototype.readDoubleBE=function t(r,e){if(!e)Lt(r,8,this.length);return rt(this,r,false,52,8)};function Bt(t,r,e,n,i,s){if(!bt(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<s)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}ut.prototype.writeUIntLE=function t(r,e,n,i){r=+r;e=e|0;n=n|0;if(!i){var s=Math.pow(2,8*n)-1;Bt(this,r,e,n,s,0)}var o=1;var a=0;this[e]=r&255;while(++a<n&&(o*=256)){this[e+a]=r/o&255}return e+n};ut.prototype.writeUIntBE=function t(r,e,n,i){r=+r;e=e|0;n=n|0;if(!i){var s=Math.pow(2,8*n)-1;Bt(this,r,e,n,s,0)}var o=n-1;var a=1;this[e+o]=r&255;while(--o>=0&&(a*=256)){this[e+o]=r/a&255}return e+n};ut.prototype.writeUInt8=function t(r,e,n){r=+r;e=e|0;if(!n)Bt(this,r,e,1,255,0);if(!ut.TYPED_ARRAY_SUPPORT)r=Math.floor(r);this[e]=r&255;return e+1};function Ft(t,r,e,n){if(r<0)r=65535+r+1;for(var i=0,s=Math.min(t.length-e,2);i<s;++i){t[e+i]=(r&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}}ut.prototype.writeUInt16LE=function t(r,e,n){r=+r;e=e|0;if(!n)Bt(this,r,e,2,65535,0);if(ut.TYPED_ARRAY_SUPPORT){this[e]=r&255;this[e+1]=r>>>8}else{Ft(this,r,e,true)}return e+2};ut.prototype.writeUInt16BE=function t(r,e,n){r=+r;e=e|0;if(!n)Bt(this,r,e,2,65535,0);if(ut.TYPED_ARRAY_SUPPORT){this[e]=r>>>8;this[e+1]=r&255}else{Ft(this,r,e,false)}return e+2};function qt(t,r,e,n){if(r<0)r=4294967295+r+1;for(var i=0,s=Math.min(t.length-e,4);i<s;++i){t[e+i]=r>>>(n?i:3-i)*8&255}}ut.prototype.writeUInt32LE=function t(r,e,n){r=+r;e=e|0;if(!n)Bt(this,r,e,4,4294967295,0);if(ut.TYPED_ARRAY_SUPPORT){this[e+3]=r>>>24;this[e+2]=r>>>16;this[e+1]=r>>>8;this[e]=r&255}else{qt(this,r,e,true)}return e+4};ut.prototype.writeUInt32BE=function t(r,e,n){r=+r;e=e|0;if(!n)Bt(this,r,e,4,4294967295,0);if(ut.TYPED_ARRAY_SUPPORT){this[e]=r>>>24;this[e+1]=r>>>16;this[e+2]=r>>>8;this[e+3]=r&255}else{qt(this,r,e,false)}return e+4};ut.prototype.writeIntLE=function t(r,e,n,i){r=+r;e=e|0;if(!i){var s=Math.pow(2,8*n-1);Bt(this,r,e,n,s-1,-s)}var o=0;var a=1;var u=0;this[e]=r&255;while(++o<n&&(a*=256)){if(r<0&&u===0&&this[e+o-1]!==0){u=1}this[e+o]=(r/a>>0)-u&255}return e+n};ut.prototype.writeIntBE=function t(r,e,n,i){r=+r;e=e|0;if(!i){var s=Math.pow(2,8*n-1);Bt(this,r,e,n,s-1,-s)}var o=n-1;var a=1;var u=0;this[e+o]=r&255;while(--o>=0&&(a*=256)){if(r<0&&u===0&&this[e+o+1]!==0){u=1}this[e+o]=(r/a>>0)-u&255}return e+n};ut.prototype.writeInt8=function t(r,e,n){r=+r;e=e|0;if(!n)Bt(this,r,e,1,127,-128);if(!ut.TYPED_ARRAY_SUPPORT)r=Math.floor(r);if(r<0)r=255+r+1;this[e]=r&255;return e+1};ut.prototype.writeInt16LE=function t(r,e,n){r=+r;e=e|0;if(!n)Bt(this,r,e,2,32767,-32768);if(ut.TYPED_ARRAY_SUPPORT){this[e]=r&255;this[e+1]=r>>>8}else{Ft(this,r,e,true)}return e+2};ut.prototype.writeInt16BE=function t(r,e,n){r=+r;e=e|0;if(!n)Bt(this,r,e,2,32767,-32768);if(ut.TYPED_ARRAY_SUPPORT){this[e]=r>>>8;this[e+1]=r&255}else{Ft(this,r,e,false)}return e+2};ut.prototype.writeInt32LE=function t(r,e,n){r=+r;e=e|0;if(!n)Bt(this,r,e,4,2147483647,-2147483648);if(ut.TYPED_ARRAY_SUPPORT){this[e]=r&255;this[e+1]=r>>>8;this[e+2]=r>>>16;this[e+3]=r>>>24}else{qt(this,r,e,true)}return e+4};ut.prototype.writeInt32BE=function t(r,e,n){r=+r;e=e|0;if(!n)Bt(this,r,e,4,2147483647,-2147483648);if(r<0)r=4294967295+r+1;if(ut.TYPED_ARRAY_SUPPORT){this[e]=r>>>24;this[e+1]=r>>>16;this[e+2]=r>>>8;this[e+3]=r&255}else{qt(this,r,e,false)}return e+4};function Ut(t,r,e,n,i,s){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function Wt(t,r,e,n,i){if(!i){Ut(t,r,e,4)}et(t,r,e,n,23,4);return e+4}ut.prototype.writeFloatLE=function t(r,e,n){return Wt(this,r,e,true,n)};ut.prototype.writeFloatBE=function t(r,e,n){return Wt(this,r,e,false,n)};function Gt(t,r,e,n,i){if(!i){Ut(t,r,e,8)}et(t,r,e,n,52,8);return e+8}ut.prototype.writeDoubleLE=function t(r,e,n){return Gt(this,r,e,true,n)};ut.prototype.writeDoubleBE=function t(r,e,n){return Gt(this,r,e,false,n)};ut.prototype.copy=function t(r,e,n,i){if(!n)n=0;if(!i&&i!==0)i=this.length;if(e>=r.length)e=r.length;if(!e)e=0;if(i>0&&i<n)i=n;if(i===n)return 0;if(r.length===0||this.length===0)return 0;if(e<0){throw new RangeError("targetStart out of bounds")}if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");if(i>this.length)i=this.length;if(r.length-e<i-n){i=r.length-e+n}var s=i-n;var o;if(this===r&&n<e&&e<i){for(o=s-1;o>=0;--o){r[o+e]=this[o+n]}}else if(s<1e3||!ut.TYPED_ARRAY_SUPPORT){for(o=0;o<s;++o){r[o+e]=this[o+n]}}else{Uint8Array.prototype.set.call(r,this.subarray(n,n+s),e)}return s};ut.prototype.fill=function t(r,e,n,i){if(typeof r==="string"){if(typeof e==="string"){i=e;e=0;n=this.length}else if(typeof n==="string"){i=n;n=this.length}if(r.length===1){var s=r.charCodeAt(0);if(s<256){r=s}}if(i!==undefined&&typeof i!=="string"){throw new TypeError("encoding must be a string")}if(typeof i==="string"&&!ut.isEncoding(i)){throw new TypeError("Unknown encoding: "+i)}}else if(typeof r==="number"){r=r&255}if(e<0||this.length<e||this.length<n){throw new RangeError("Out of range index")}if(n<=e){return this}e=e>>>0;n=n===undefined?this.length:n>>>0;if(!r)r=0;var o;if(typeof r==="number"){for(o=e;o<n;++o){this[o]=r}}else{var a=bt(r)?r:Jt(new ut(r,i).toString());var u=a.length;for(o=0;o<n-e;++o){this[o+e]=a[o%u]}}return this};var zt=/[^+\/0-9A-Za-z-_]/g;function Ht(t){t=Zt(t).replace(zt,"");if(t.length<2)return"";while(t.length%4!==0){t=t+"="}return t}function Zt(t){if(t.trim)return t.trim();return t.replace(/^\s+|\s+$/g,"")}function Qt(t){if(t<16)return"0"+t.toString(16);return t.toString(16)}function Jt(t,r){r=r||Infinity;var e;var n=t.length;var i=null;var s=[];for(var o=0;o<n;++o){e=t.charCodeAt(o);if(e>55295&&e<57344){if(!i){if(e>56319){if((r-=3)>-1)s.push(239,191,189);continue}else if(o+1===n){if((r-=3)>-1)s.push(239,191,189);continue}i=e;continue}if(e<56320){if((r-=3)>-1)s.push(239,191,189);i=e;continue}e=(i-55296<<10|e-56320)+65536}else if(i){if((r-=3)>-1)s.push(239,191,189)}i=null;if(e<128){if((r-=1)<0)break;s.push(e)}else if(e<2048){if((r-=2)<0)break;s.push(e>>6|192,e&63|128)}else if(e<65536){if((r-=3)<0)break;s.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((r-=4)<0)break;s.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else{throw new Error("Invalid code point")}}return s}function Vt(t){var r=[];for(var e=0;e<t.length;++e){r.push(t.charCodeAt(e)&255)}return r}function Kt(t,r){var e,n,i;var s=[];for(var o=0;o<t.length;++o){if((r-=2)<0)break;e=t.charCodeAt(o);n=e>>8;i=e%256;s.push(i);s.push(n)}return s}function Xt(t){return K(Ht(t))}function Yt(t,r,e,n){for(var i=0;i<n;++i){if(i+e>=r.length||i>=t.length)break;r[i+e]=t[i]}return i}function tr(t){return t!==t}function rr(t){return t!=null&&(!!t._isBuffer||er(t)||nr(t))}function er(t){return!!t.constructor&&typeof t.constructor.isBuffer==="function"&&t.constructor.isBuffer(t)}function nr(t){return typeof t.readFloatLE==="function"&&typeof t.slice==="function"&&er(t.slice(0,0))}var ir=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function sr(t,r,e){return e={path:r,exports:{},require:function(t,r){return ar()}},t(e,e.exports),e.exports}function or(t){if(t.__esModule)return t;var r=Object.defineProperty({},"__esModule",{value:true});Object.keys(t).forEach((function(e){var n=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(r,e,n.get?n:{enumerable:true,get:function(){return t[e]}})}));return r}function ar(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}function ur(t,r){var e=0;for(var n=t.length-1;n>=0;n--){var i=t[n];if(i==="."){t.splice(n,1)}else if(i===".."){t.splice(n,1);e++}else if(e){t.splice(n,1);e--}}if(r){for(;e--;e){t.unshift("..")}}return t}var fr=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var cr=function(t){return fr.exec(t).slice(1)};function hr(){var t="",r=false;for(var e=arguments.length-1;e>=-1&&!r;e--){var n=e>=0?arguments[e]:"/";if(typeof n!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!n){continue}t=n+"/"+t;r=n.charAt(0)==="/"}t=ur(Pr(t.split("/"),(function(t){return!!t})),!r).join("/");return(r?"/":"")+t||"."}function lr(t){var r=dr(t),e=Sr(t,-1)==="/";t=ur(Pr(t.split("/"),(function(t){return!!t})),!r).join("/");if(!t&&!r){t="."}if(t&&e){t+="/"}return(r?"/":"")+t}function dr(t){return t.charAt(0)==="/"}function vr(){var t=Array.prototype.slice.call(arguments,0);return lr(Pr(t,(function(t,r){if(typeof t!=="string"){throw new TypeError("Arguments to path.join must be strings")}return t})).join("/"))}function wr(t,r){t=hr(t).substr(1);r=hr(r).substr(1);function e(t){var r=0;for(;r<t.length;r++){if(t[r]!=="")break}var e=t.length-1;for(;e>=0;e--){if(t[e]!=="")break}if(r>e)return[];return t.slice(r,e-r+1)}var n=e(t.split("/"));var i=e(r.split("/"));var s=Math.min(n.length,i.length);var o=s;for(var a=0;a<s;a++){if(n[a]!==i[a]){o=a;break}}var u=[];for(var a=o;a<n.length;a++){u.push("..")}u=u.concat(i.slice(o));return u.join("/")}var mr="/";var yr=":";function br(t){var r=cr(t),e=r[0],n=r[1];if(!e&&!n){return"."}if(n){n=n.substr(0,n.length-1)}return e+n}function pr(t,r){var e=cr(t)[2];if(r&&e.substr(-1*r.length)===r){e=e.substr(0,e.length-r.length)}return e}function Er(t){return cr(t)[3]}const gr={extname:Er,basename:pr,dirname:br,sep:mr,delimiter:yr,relative:wr,join:vr,isAbsolute:dr,normalize:lr,resolve:hr};function Pr(t,r){if(t.filter)return t.filter(r);var e=[];for(var n=0;n<t.length;n++){if(r(t[n],n,t))e.push(t[n])}return e}var Sr="ab".substr(-1)==="b"?function(t,r,e){return t.substr(r,e)}:function(t,r,e){if(r<0)r=t.length+r;return t.substr(r,e)};const _r=Object.freeze({__proto__:null,resolve:hr,normalize:lr,isAbsolute:dr,join:vr,relative:wr,sep:mr,delimiter:yr,dirname:br,basename:pr,extname:Er,default:gr});const kr={};const Tr=Object.freeze({__proto__:null,default:kr});const Or=or(_r);const Ar=or(Tr);var $r=sr((function(t,r){var e=undefined;var n=function(r){if(e){return e}e=new Promise((function(e,n){var i=typeof r!=="undefined"?r:{};var s=i["onAbort"];i["onAbort"]=function(t){n(new Error(t));if(s){s(t)}};i["postRun"]=i["postRun"]||[];i["postRun"].push((function(){e(i)}));t=undefined;var o;o||(o=typeof i!=="undefined"?i:{});o.onRuntimeInitialized=function(){function t(t,r){switch(typeof r){case"boolean":J(t,r?1:0);break;case"number":z(t,r);break;case"string":Z(t,r,-1,-1);break;case"object":if(null===r)H(t);else if(null!=r.length){var e=Dr(r);Q(t,e,r.length,-1);Lr(e)}else V(t,"Wrong API use : tried to return a value of an unknown type ("+r+").",-1);break;default:H(t)}}function r(t,r){for(var e=[],n=0;n<t;n+=1){var i=et(r+4*n,"i32"),s=F(i);if(1===s||2===s)i=G(i);else if(3===s)i=U(i);else if(4===s){s=i;i=q(s);s=W(s);for(var o=new Uint8Array(i),a=0;a<i;a+=1)o[a]=j[s+a];i=o}else i=null;e.push(i)}return e}function e(t,r){this.La=t;this.db=r;this.Ja=1;this.fb=[]}function n(t,r){this.db=r;r=A(t)+1;this.Ya=Cr(r);if(null===this.Ya)throw Error("Unable to allocate memory for the SQL string");O(t,R,this.Ya,r);this.eb=this.Ya;this.Ua=this.ib=null}function i(t){this.filename="dbfile_"+(4294967295*Math.random()>>>0);if(null!=t){var r=this.filename,e="/",n=r;e&&(e="string"==typeof e?e:Ot(e),n=r?st(e+"/"+r):e);r=ar(!0,!0);n=Ut(n,(void 0!==r?r:438)&4095|32768,0);if(t){if("string"==typeof t){e=Array(t.length);for(var i=0,o=t.length;i<o;++i)e[i]=t.charCodeAt(i);t=e}Kt(n,r|146);e=Yt(n,577);nr(e,t,0,t.length,0);tr(e);Kt(n,r)}}this.handleError(u(this.filename,s));this.db=et(s,"i32");X(this.db);this.Za={};this.Na={}}var s=Ur(4),a=o.cwrap,u=a("sqlite3_open","number",["string","number"]),f=a("sqlite3_close_v2","number",["number"]),c=a("sqlite3_exec","number",["number","string","number","number","number"]),h=a("sqlite3_changes","number",["number"]),l=a("sqlite3_prepare_v2","number",["number","string","number","number","number"]),d=a("sqlite3_sql","string",["number"]),v=a("sqlite3_normalized_sql","string",["number"]),w=a("sqlite3_prepare_v2","number",["number","number","number","number","number"]),m=a("sqlite3_bind_text","number",["number","number","number","number","number"]),y=a("sqlite3_bind_blob","number",["number","number","number","number","number"]),b=a("sqlite3_bind_double","number",["number","number","number"]),p=a("sqlite3_bind_int","number",["number","number","number"]),E=a("sqlite3_bind_parameter_index","number",["number","string"]),g=a("sqlite3_step","number",["number"]),P=a("sqlite3_errmsg","string",["number"]),S=a("sqlite3_column_count","number",["number"]),_=a("sqlite3_data_count","number",["number"]),k=a("sqlite3_column_double","number",["number","number"]),$=a("sqlite3_column_text","string",["number","number"]),D=a("sqlite3_column_blob","number",["number","number"]),N=a("sqlite3_column_bytes","number",["number","number"]),I=a("sqlite3_column_type","number",["number","number"]),M=a("sqlite3_column_name","string",["number","number"]),x=a("sqlite3_reset","number",["number"]),C=a("sqlite3_clear_bindings","number",["number"]),L=a("sqlite3_finalize","number",["number"]),B=a("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),F=a("sqlite3_value_type","number",["number"]),q=a("sqlite3_value_bytes","number",["number"]),U=a("sqlite3_value_text","string",["number"]),W=a("sqlite3_value_blob","number",["number"]),G=a("sqlite3_value_double","number",["number"]),z=a("sqlite3_result_double","",["number","number"]),H=a("sqlite3_result_null","",["number"]),Z=a("sqlite3_result_text","",["number","string","number","number"]),Q=a("sqlite3_result_blob","",["number","number","number","number"]),J=a("sqlite3_result_int","",["number","number"]),V=a("sqlite3_result_error","",["number","string","number"]),K=a("sqlite3_aggregate_context","number",["number","number"]),X=a("RegisterExtensionFunctions","number",["number"]);e.prototype.bind=function(t){if(!this.La)throw"Statement closed";this.reset();return Array.isArray(t)?this.xb(t):null!=t&&"object"===typeof t?this.yb(t):!0};e.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var t=g(this.La);switch(t){case 100:return!0;case 101:return!1;default:throw this.db.handleError(t)}};e.prototype.sb=function(t){null==t&&(t=this.Ja,this.Ja+=1);return k(this.La,t)};e.prototype.Cb=function(t){null==t&&(t=this.Ja,this.Ja+=1);t=$(this.La,t);if("function"!==typeof BigInt)throw Error("BigInt is not supported");return BigInt(t)};e.prototype.Db=function(t){null==t&&(t=this.Ja,this.Ja+=1);return $(this.La,t)};e.prototype.getBlob=function(t){null==t&&(t=this.Ja,this.Ja+=1);var r=N(this.La,t);t=D(this.La,t);for(var e=new Uint8Array(r),n=0;n<r;n+=1)e[n]=j[t+n];return e};e.prototype.get=function(t,r){r=r||{};null!=t&&this.bind(t)&&this.step();t=[];for(var e=_(this.La),n=0;n<e;n+=1)switch(I(this.La,n)){case 1:var i=r.useBigInt?this.Cb(n):this.sb(n);t.push(i);break;case 2:t.push(this.sb(n));break;case 3:t.push(this.Db(n));break;case 4:t.push(this.getBlob(n));break;default:t.push(null)}return t};e.prototype.getColumnNames=function(){for(var t=[],r=S(this.La),e=0;e<r;e+=1)t.push(M(this.La,e));return t};e.prototype.getAsObject=function(t,r){t=this.get(t,r);r=this.getColumnNames();for(var e={},n=0;n<r.length;n+=1)e[r[n]]=t[n];return e};e.prototype.getSQL=function(){return d(this.La)};e.prototype.getNormalizedSQL=function(){return v(this.La)};e.prototype.run=function(t){null!=t&&this.bind(t);this.step();return this.reset()};e.prototype.nb=function(t,r){null==r&&(r=this.Ja,this.Ja+=1);t=ht(t);var e=Dr(t);this.fb.push(e);this.db.handleError(m(this.La,r,e,t.length-1,0))};e.prototype.wb=function(t,r){null==r&&(r=this.Ja,this.Ja+=1);var e=Dr(t);this.fb.push(e);this.db.handleError(y(this.La,r,e,t.length,0))};e.prototype.mb=function(t,r){null==r&&(r=this.Ja,this.Ja+=1);this.db.handleError((t===(t|0)?p:b)(this.La,r,t))};e.prototype.zb=function(t){null==t&&(t=this.Ja,this.Ja+=1);y(this.La,t,0,0,0)};e.prototype.ob=function(t,r){null==r&&(r=this.Ja,this.Ja+=1);switch(typeof t){case"string":this.nb(t,r);return;case"number":this.mb(t,r);return;case"bigint":this.nb(t.toString(),r);return;case"boolean":this.mb(t+0,r);return;case"object":if(null===t){this.zb(r);return}if(null!=t.length){this.wb(t,r);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+t+")."};e.prototype.yb=function(t){var r=this;Object.keys(t).forEach((function(e){var n=E(r.La,e);0!==n&&r.ob(t[e],n)}));return!0};e.prototype.xb=function(t){for(var r=0;r<t.length;r+=1)this.ob(t[r],r+1);return!0};e.prototype.reset=function(){this.freemem();return 0===C(this.La)&&0===x(this.La)};e.prototype.freemem=function(){for(var t;void 0!==(t=this.fb.pop());)Lr(t)};e.prototype.free=function(){this.freemem();var t=0===L(this.La);delete this.db.Za[this.La];this.La=0;return t};n.prototype.next=function(){if(null===this.Ya)return{done:!0};null!==this.Ua&&(this.Ua.free(),this.Ua=null);if(!this.db.db)throw this.gb(),Error("Database closed");var t=Fr(),r=Ur(4);nt(s);nt(r);try{this.db.handleError(w(this.db.db,this.eb,-1,s,r));this.eb=et(r,"i32");var n=et(s,"i32");if(0===n)return this.gb(),{done:!0};this.Ua=new e(n,this.db);this.db.Za[n]=this.Ua;return{value:this.Ua,done:!1}}catch(t){throw this.ib=T(this.eb),this.gb(),t}finally{qr(t)}};n.prototype.gb=function(){Lr(this.Ya);this.Ya=null};n.prototype.getRemainingSQL=function(){return null!==this.ib?this.ib:T(this.eb)};"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator&&(n.prototype[Symbol.iterator]=function(){return this});i.prototype.run=function(t,r){if(!this.db)throw"Database closed";if(r){t=this.prepare(t,r);try{t.step()}finally{t.free()}}else this.handleError(c(this.db,t,0,0,s));return this};i.prototype.exec=function(t,r,n){if(!this.db)throw"Database closed";var i=Fr(),o=null;try{var a=A(t)+1,u=Ur(a);O(t,j,u,a);var f=u;var c=Ur(4);for(t=[];0!==et(f,"i8");){nt(s);nt(c);this.handleError(w(this.db,f,-1,s,c));var h=et(s,"i32");f=et(c,"i32");if(0!==h){a=null;o=new e(h,this);for(null!=r&&o.bind(r);o.step();)null===a&&(a={columns:o.getColumnNames(),values:[]},t.push(a)),a.values.push(o.get(null,n));o.free()}}return t}catch(t){throw o&&o.free(),t}finally{qr(i)}};i.prototype.each=function(t,r,e,n,i){"function"===typeof r&&(n=e,e=r,r=void 0);t=this.prepare(t,r);try{for(;t.step();)e(t.getAsObject(null,i))}finally{t.free()}if("function"===typeof n)return n()};i.prototype.prepare=function(t,r){nt(s);this.handleError(l(this.db,t,-1,s,0));t=et(s,"i32");if(0===t)throw"Nothing to prepare";var n=new e(t,this);null!=r&&n.bind(r);return this.Za[t]=n};i.prototype.iterateStatements=function(t){return new n(t,this)};i.prototype["export"]=function(){Object.values(this.Za).forEach((function(t){t.free()}));Object.values(this.Na).forEach(Rr);this.Na={};this.handleError(f(this.db));var t=ir(this.filename);this.handleError(u(this.filename,s));this.db=et(s,"i32");return t};i.prototype.close=function(){null!==this.db&&(Object.values(this.Za).forEach((function(t){t.free()})),Object.values(this.Na).forEach(Rr),this.Na={},this.handleError(f(this.db)),Zt("/"+this.filename),this.db=null)};i.prototype.handleError=function(t){if(0===t)return null;t=P(this.db);throw Error(t)};i.prototype.getRowsModified=function(){return h(this.db)};i.prototype.create_function=function(e,n){Object.prototype.hasOwnProperty.call(this.Na,e)&&(Rr(this.Na[e]),delete this.Na[e]);var i=jr((function(e,i,s){i=r(i,s);try{var o=n.apply(null,i)}catch(t){V(e,t,-1);return}t(e,o)}),"viii");this.Na[e]=i;this.handleError(B(this.db,e,n.length,1,0,i,0,0,0));return this};i.prototype.create_aggregate=function(e,n){var i=n.init||function(){return null},s=n.finalize||function(t){return t},o=n.step;if(!o)throw"An aggregate function must have a step function in "+e;var a={};Object.hasOwnProperty.call(this.Na,e)&&(Rr(this.Na[e]),delete this.Na[e]);n=e+"__finalize";Object.hasOwnProperty.call(this.Na,n)&&(Rr(this.Na[n]),delete this.Na[n]);var u=jr((function(t,e,n){var s=K(t,1);Object.hasOwnProperty.call(a,s)||(a[s]=i());e=r(e,n);e=[a[s]].concat(e);try{a[s]=o.apply(null,e)}catch(r){delete a[s],V(t,r,-1)}}),"viii"),f=jr((function(r){var e=K(r,1);try{var n=s(a[e])}catch(t){delete a[e];V(r,t,-1);return}t(r,n);delete a[e]}),"vi");this.Na[e]=u;this.Na[n]=f;this.handleError(B(this.db,e,o.length-1,1,0,0,u,f,0));return this};o.Database=i};var a=Object.assign({},o),u="./this.program",f="object"==typeof window,c="function"==typeof importScripts,h="object"==typeof G&&"object"==typeof G.versions&&"string"==typeof G.versions.node,l="",d,v,w,m,y,b;if(h)l=c?Or.dirname(l)+"/":z+"/",b=()=>{y||(m=Ar,y=Or)},d=function(t,r){b();t=y.normalize(t);return m.readFileSync(t,r?void 0:"utf8")},w=t=>{t=d(t,!0);t.buffer||(t=new Uint8Array(t));return t},v=(t,r,e)=>{b();t=y.normalize(t);m.readFile(t,(function(t,n){t?e(t):r(n.buffer)}))},1<G.argv.length&&(u=G.argv[1].replace(/\\/g,"/")),G.argv.slice(2),t.exports=o,o.inspect=function(){return"[Emscripten Module object]"};else if(f||c)c?l=self.location.href:"undefined"!=typeof document&&document.currentScript&&(l=document.currentScript.src),l=0!==l.indexOf("blob:")?l.substr(0,l.replace(/[?#].*/,"").lastIndexOf("/")+1):"",d=t=>{var r=new XMLHttpRequest;r.open("GET",t,!1);r.send(null);return r.responseText},c&&(w=t=>{var r=new XMLHttpRequest;r.open("GET",t,!1);r.responseType="arraybuffer";r.send(null);return new Uint8Array(r.response)}),v=(t,r,e)=>{var n=new XMLHttpRequest;n.open("GET",t,!0);n.responseType="arraybuffer";n.onload=()=>{200==n.status||0==n.status&&n.response?r(n.response):e()};n.onerror=e;n.send(null)};var p=o.print||console.log.bind(console),E=o.printErr||console.warn.bind(console);Object.assign(o,a);a=null;o.thisProgram&&(u=o.thisProgram);var g;o.wasmBinary&&(g=o.wasmBinary);"object"!=typeof WebAssembly&&Z("no native wasm support detected");var P,S=!1,_="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function k(t,r,e){var n=r+e;for(e=r;t[e]&&!(e>=n);)++e;if(16<e-r&&t.buffer&&_)return _.decode(t.subarray(r,e));for(n="";r<e;){var i=t[r++];if(i&128){var s=t[r++]&63;if(192==(i&224))n+=String.fromCharCode((i&31)<<6|s);else{var o=t[r++]&63;i=224==(i&240)?(i&15)<<12|s<<6|o:(i&7)<<18|s<<12|o<<6|t[r++]&63;65536>i?n+=String.fromCharCode(i):(i-=65536,n+=String.fromCharCode(55296|i>>10,56320|i&1023))}}else n+=String.fromCharCode(i)}return n}function T(t,r){return t?k(R,t,r):""}function O(t,r,e,n){if(!(0<n))return 0;var i=e;n=e+n-1;for(var s=0;s<t.length;++s){var o=t.charCodeAt(s);if(55296<=o&&57343>=o){var a=t.charCodeAt(++s);o=65536+((o&1023)<<10)|a&1023}if(127>=o){if(e>=n)break;r[e++]=o}else{if(2047>=o){if(e+1>=n)break;r[e++]=192|o>>6}else{if(65535>=o){if(e+2>=n)break;r[e++]=224|o>>12}else{if(e+3>=n)break;r[e++]=240|o>>18;r[e++]=128|o>>12&63}r[e++]=128|o>>6&63}r[e++]=128|o&63}}r[e]=0;return e-i}function A(t){for(var r=0,e=0;e<t.length;++e){var n=t.charCodeAt(e);127>=n?r++:2047>=n?r+=2:55296<=n&&57343>=n?(r+=4,++e):r+=3}return r}var $,j,R,D,N,I,M,x;function C(){var t=P.buffer;$=t;o.HEAP8=j=new Int8Array(t);o.HEAP16=D=new Int16Array(t);o.HEAP32=N=new Int32Array(t);o.HEAPU8=R=new Uint8Array(t);o.HEAPU16=new Uint16Array(t);o.HEAPU32=I=new Uint32Array(t);o.HEAPF32=M=new Float32Array(t);o.HEAPF64=x=new Float64Array(t)}var L,B=[],F=[],q=[];function U(){var t=o.preRun.shift();B.unshift(t)}var W=0,H=null;function Z(t){if(o.onAbort)o.onAbort(t);t="Aborted("+t+")";E(t);S=!0;throw new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info.")}function Q(){return J.startsWith("data:application/octet-stream;base64,")}var J;J="sql-wasm.wasm";if(!Q()){var V=J;J=o.locateFile?o.locateFile(V,l):l+V}function K(){var t=J;try{if(t==J&&g)return new Uint8Array(g);if(w)return w(t);throw"both async and sync fetching of the wasm failed"}catch(t){Z(t)}}function X(){if(!g&&(f||c)){if("function"==typeof fetch&&!J.startsWith("file://"))return fetch(J,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+J+"'";return t.arrayBuffer()})).catch((function(){return K()}));if(v)return new Promise((function(t,r){v(J,(function(r){t(new Uint8Array(r))}),r)}))}return Promise.resolve().then((function(){return K()}))}var Y,tt;function rt(t){for(;0<t.length;)t.shift()(o)}function et(t,r="i8"){r.endsWith("*")&&(r="*");switch(r){case"i1":return j[t>>0];case"i8":return j[t>>0];case"i16":return D[t>>1];case"i32":return N[t>>2];case"i64":return N[t>>2];case"float":return M[t>>2];case"double":return x[t>>3];case"*":return I[t>>2];default:Z("invalid type for getValue: "+r)}return null}function nt(t){var r="i32";r.endsWith("*")&&(r="*");switch(r){case"i1":j[t>>0]=0;break;case"i8":j[t>>0]=0;break;case"i16":D[t>>1]=0;break;case"i32":N[t>>2]=0;break;case"i64":tt=[0,(Y=0,1<=+Math.abs(Y)?0<Y?(Math.min(+Math.floor(Y/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)];N[t>>2]=tt[0];N[t+4>>2]=tt[1];break;case"float":M[t>>2]=0;break;case"double":x[t>>3]=0;break;case"*":I[t>>2]=0;break;default:Z("invalid type for setValue: "+r)}}var it=(t,r)=>{for(var e=0,n=t.length-1;0<=n;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),e++):e&&(t.splice(n,1),e--)}if(r)for(;e;e--)t.unshift("..");return t},st=t=>{var r="/"===t.charAt(0),e="/"===t.substr(-1);(t=it(t.split("/").filter((t=>!!t)),!r).join("/"))||r||(t=".");t&&e&&(t+="/");return(r?"/":"")+t},ot=t=>{var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1);t=r[0];r=r[1];if(!t&&!r)return".";r&&(r=r.substr(0,r.length-1));return t+r},at=t=>{if("/"===t)return"/";t=st(t);t=t.replace(/\/$/,"");var r=t.lastIndexOf("/");return-1===r?t:t.substr(r+1)};function ft(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>{crypto.getRandomValues(t);return t[0]}}if(h)try{var r=Ar;return()=>r.randomBytes(1)[0]}catch(t){}return()=>Z("randomDevice")}function ct(){for(var t="",r=!1,e=arguments.length-1;-1<=e&&!r;e--){r=0<=e?arguments[e]:"/";if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";t=r+"/"+t;r="/"===r.charAt(0)}t=it(t.split("/").filter((t=>!!t)),!r).join("/");return(r?"/":"")+t||"."}function ht(t,r){var e=Array(A(t)+1);t=O(t,e,0,e.length);r&&(e.length=t);return e}var lt=[];function dt(t,r){lt[t]={input:[],output:[],Xa:r};Ft(t,vt)}var vt={open:function(t){var r=lt[t.node.rdev];if(!r)throw new _t(43);t.tty=r;t.seekable=!1},close:function(t){t.tty.Xa.fsync(t.tty)},fsync:function(t){t.tty.Xa.fsync(t.tty)},read:function(t,r,e,n){if(!t.tty||!t.tty.Xa.tb)throw new _t(60);for(var i=0,s=0;s<n;s++){try{var o=t.tty.Xa.tb(t.tty)}catch(t){throw new _t(29)}if(void 0===o&&0===i)throw new _t(6);if(null===o||void 0===o)break;i++;r[e+s]=o}i&&(t.node.timestamp=Date.now());return i},write:function(t,r,e,n){if(!t.tty||!t.tty.Xa.jb)throw new _t(60);try{for(var i=0;i<n;i++)t.tty.Xa.jb(t.tty,r[e+i])}catch(t){throw new _t(29)}n&&(t.node.timestamp=Date.now());return i}},wt={tb:function(t){if(!t.input.length){var r=null;if(h){var e=ut.alloc(256),n=0;try{n=m.readSync(G.stdin.fd,e,0,256,-1)}catch(t){if(t.toString().includes("EOF"))n=0;else throw t}0<n?r=e.slice(0,n).toString("utf-8"):r=null}else"undefined"!=typeof window&&"function"==typeof window.prompt?(r=window.prompt("Input: "),null!==r&&(r+="\n")):"function"==typeof readline&&(r=readline(),null!==r&&(r+="\n"));if(!r)return null;t.input=ht(r,!0)}return t.input.shift()},jb:function(t,r){null===r||10===r?(p(k(t.output,0)),t.output=[]):0!=r&&t.output.push(r)},fsync:function(t){t.output&&0<t.output.length&&(p(k(t.output,0)),t.output=[])}},mt={jb:function(t,r){null===r||10===r?(E(k(t.output,0)),t.output=[]):0!=r&&t.output.push(r)},fsync:function(t){t.output&&0<t.output.length&&(E(k(t.output,0)),t.output=[])}},yt={Qa:null,Ra:function(){return yt.createNode(null,"/",16895,0)},createNode:function(t,r,e,n){if(24576===(e&61440)||4096===(e&61440))throw new _t(63);yt.Qa||(yt.Qa={dir:{node:{Pa:yt.Ga.Pa,Oa:yt.Ga.Oa,lookup:yt.Ga.lookup,ab:yt.Ga.ab,rename:yt.Ga.rename,unlink:yt.Ga.unlink,rmdir:yt.Ga.rmdir,readdir:yt.Ga.readdir,symlink:yt.Ga.symlink},stream:{Ta:yt.Ha.Ta}},file:{node:{Pa:yt.Ga.Pa,Oa:yt.Ga.Oa},stream:{Ta:yt.Ha.Ta,read:yt.Ha.read,write:yt.Ha.write,lb:yt.Ha.lb,bb:yt.Ha.bb,cb:yt.Ha.cb}},link:{node:{Pa:yt.Ga.Pa,Oa:yt.Ga.Oa,readlink:yt.Ga.readlink},stream:{}},pb:{node:{Pa:yt.Ga.Pa,Oa:yt.Ga.Oa},stream:Bt}});e=Rt(t,r,e,n);16384===(e.mode&61440)?(e.Ga=yt.Qa.dir.node,e.Ha=yt.Qa.dir.stream,e.Ia={}):32768===(e.mode&61440)?(e.Ga=yt.Qa.file.node,e.Ha=yt.Qa.file.stream,e.Ma=0,e.Ia=null):40960===(e.mode&61440)?(e.Ga=yt.Qa.link.node,e.Ha=yt.Qa.link.stream):8192===(e.mode&61440)&&(e.Ga=yt.Qa.pb.node,e.Ha=yt.Qa.pb.stream);e.timestamp=Date.now();t&&(t.Ia[r]=e,t.timestamp=e.timestamp);return e},Jb:function(t){return t.Ia?t.Ia.subarray?t.Ia.subarray(0,t.Ma):new Uint8Array(t.Ia):new Uint8Array(0)},qb:function(t,r){var e=t.Ia?t.Ia.length:0;e>=r||(r=Math.max(r,e*(1048576>e?2:1.125)>>>0),0!=e&&(r=Math.max(r,256)),e=t.Ia,t.Ia=new Uint8Array(r),0<t.Ma&&t.Ia.set(e.subarray(0,t.Ma),0))},Gb:function(t,r){if(t.Ma!=r)if(0==r)t.Ia=null,t.Ma=0;else{var e=t.Ia;t.Ia=new Uint8Array(r);e&&t.Ia.set(e.subarray(0,Math.min(r,t.Ma)));t.Ma=r}},Ga:{Pa:function(t){var r={};r.dev=8192===(t.mode&61440)?t.id:1;r.ino=t.id;r.mode=t.mode;r.nlink=1;r.uid=0;r.gid=0;r.rdev=t.rdev;16384===(t.mode&61440)?r.size=4096:32768===(t.mode&61440)?r.size=t.Ma:40960===(t.mode&61440)?r.size=t.link.length:r.size=0;r.atime=new Date(t.timestamp);r.mtime=new Date(t.timestamp);r.ctime=new Date(t.timestamp);r.Ab=4096;r.blocks=Math.ceil(r.size/r.Ab);return r},Oa:function(t,r){void 0!==r.mode&&(t.mode=r.mode);void 0!==r.timestamp&&(t.timestamp=r.timestamp);void 0!==r.size&&yt.Gb(t,r.size)},lookup:function(){throw kt[44]},ab:function(t,r,e,n){return yt.createNode(t,r,e,n)},rename:function(t,r,e){if(16384===(t.mode&61440)){try{var n=jt(r,e)}catch(t){}if(n)for(var i in n.Ia)throw new _t(55)}delete t.parent.Ia[t.name];t.parent.timestamp=Date.now();t.name=e;r.Ia[e]=t;r.timestamp=t.parent.timestamp;t.parent=r},unlink:function(t,r){delete t.Ia[r];t.timestamp=Date.now()},rmdir:function(t,r){var e=jt(t,r),n;for(n in e.Ia)throw new _t(55);delete t.Ia[r];t.timestamp=Date.now()},readdir:function(t){var r=[".",".."],e;for(e in t.Ia)t.Ia.hasOwnProperty(e)&&r.push(e);return r},symlink:function(t,r,e){t=yt.createNode(t,r,41471,0);t.link=e;return t},readlink:function(t){if(40960!==(t.mode&61440))throw new _t(28);return t.link}},Ha:{read:function(t,r,e,n,i){var s=t.node.Ia;if(i>=t.node.Ma)return 0;t=Math.min(t.node.Ma-i,n);if(8<t&&s.subarray)r.set(s.subarray(i,i+t),e);else for(n=0;n<t;n++)r[e+n]=s[i+n];return t},write:function(t,r,e,n,i,s){r.buffer===j.buffer&&(s=!1);if(!n)return 0;t=t.node;t.timestamp=Date.now();if(r.subarray&&(!t.Ia||t.Ia.subarray)){if(s)return t.Ia=r.subarray(e,e+n),t.Ma=n;if(0===t.Ma&&0===i)return t.Ia=r.slice(e,e+n),t.Ma=n;if(i+n<=t.Ma)return t.Ia.set(r.subarray(e,e+n),i),n}yt.qb(t,i+n);if(t.Ia.subarray&&r.subarray)t.Ia.set(r.subarray(e,e+n),i);else for(s=0;s<n;s++)t.Ia[i+s]=r[e+s];t.Ma=Math.max(t.Ma,i+n);return n},Ta:function(t,r,e){1===e?r+=t.position:2===e&&32768===(t.node.mode&61440)&&(r+=t.node.Ma);if(0>r)throw new _t(28);return r},lb:function(t,r,e){yt.qb(t.node,r+e);t.node.Ma=Math.max(t.node.Ma,r+e)},bb:function(t,r,e,n,i){if(32768!==(t.node.mode&61440))throw new _t(43);t=t.node.Ia;if(i&2||t.buffer!==$){if(0<e||e+r<t.length)t.subarray?t=t.subarray(e,e+r):t=Array.prototype.slice.call(t,e,e+r);e=!0;r=65536*Math.ceil(r/65536);(i=Br(65536,r))?(R.fill(0,i,i+r),r=i):r=0;if(!r)throw new _t(48);j.set(t,r)}else e=!1,r=t.byteOffset;return{Fb:r,vb:e}},cb:function(t,r,e,n,i){if(32768!==(t.node.mode&61440))throw new _t(43);if(i&2)return 0;yt.Ha.write(t,r,0,n,e,!1);return 0}}},bt=null,pt={},Et=[],gt=1,Pt=null,St=!0,_t=null,kt={},Tt=(t,r={})=>{t=ct("/",t);if(!t)return{path:"",node:null};r=Object.assign({rb:!0,kb:0},r);if(8<r.kb)throw new _t(32);t=it(t.split("/").filter((t=>!!t)),!1);for(var e=bt,n="/",i=0;i<t.length;i++){var s=i===t.length-1;if(s&&r.parent)break;e=jt(e,t[i]);n=st(n+"/"+t[i]);e.Va&&(!s||s&&r.rb)&&(e=e.Va.root);if(!s||r.Sa)for(s=0;40960===(e.mode&61440);)if(e=Qt(n),n=ct(ot(n),e),e=Tt(n,{kb:r.kb+1}).node,40<s++)throw new _t(32)}return{path:n,node:e}},Ot=t=>{for(var r;;){if(t===t.parent)return t=t.Ra.ub,r?"/"!==t[t.length-1]?t+"/"+r:t+r:t;r=r?t.name+"/"+r:t.name;t=t.parent}},At=(t,r)=>{for(var e=0,n=0;n<r.length;n++)e=(e<<5)-e+r.charCodeAt(n)|0;return(t+e>>>0)%Pt.length},$t=t=>{var r=At(t.parent.id,t.name);if(Pt[r]===t)Pt[r]=t.Wa;else for(r=Pt[r];r;){if(r.Wa===t){r.Wa=t.Wa;break}r=r.Wa}},jt=(t,r)=>{var e;if(e=(e=It(t,"x"))?e:t.Ga.lookup?0:2)throw new _t(e,t);for(e=Pt[At(t.id,r)];e;e=e.Wa){var n=e.name;if(e.parent.id===t.id&&n===r)return e}return t.Ga.lookup(t,r)},Rt=(t,r,e,n)=>{t=new Ir(t,r,e,n);r=At(t.parent.id,t.name);t.Wa=Pt[r];return Pt[r]=t},Dt={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},Nt=t=>{var r=["r","w","rw"][t&3];t&512&&(r+="w");return r},It=(t,r)=>{if(St)return 0;if(!r.includes("r")||t.mode&292){if(r.includes("w")&&!(t.mode&146)||r.includes("x")&&!(t.mode&73))return 2}else return 2;return 0},Mt=(t,r)=>{try{return jt(t,r),20}catch(t){}return It(t,"wx")},xt=(t,r,e)=>{try{var n=jt(t,r)}catch(t){return t.Ka}if(t=It(t,"wx"))return t;if(e){if(16384!==(n.mode&61440))return 54;if(n===n.parent||"/"===Ot(n))return 10}else if(16384===(n.mode&61440))return 31;return 0},Ct=(t=0)=>{for(;4096>=t;t++)if(!Et[t])return t;throw new _t(33)},Lt=(t,r)=>{hr||(hr=function(){this.$a={}},hr.prototype={},Object.defineProperties(hr.prototype,{object:{get:function(){return this.node},set:function(t){this.node=t}},flags:{get:function(){return this.$a.flags},set:function(t){this.$a.flags=t}},position:{get:function(){return this.$a.position},set:function(t){this.$a.position=t}}}));t=Object.assign(new hr,t);r=Ct(r);t.fd=r;return Et[r]=t},Bt={open:t=>{t.Ha=pt[t.node.rdev].Ha;t.Ha.open&&t.Ha.open(t)},Ta:()=>{throw new _t(70)}},Ft=(t,r)=>{pt[t]={Ha:r}},qt=(t,r)=>{var e="/"===r,n=!r;if(e&&bt)throw new _t(10);if(!e&&!n){var i=Tt(r,{rb:!1});r=i.path;i=i.node;if(i.Va)throw new _t(10);if(16384!==(i.mode&61440))throw new _t(54)}r={type:t,Kb:{},ub:r,Eb:[]};t=t.Ra(r);t.Ra=r;r.root=t;e?bt=t:i&&(i.Va=r,i.Ra&&i.Ra.Eb.push(r))},Ut=(t,r,e)=>{var n=Tt(t,{parent:!0}).node;t=at(t);if(!t||"."===t||".."===t)throw new _t(28);var i=Mt(n,t);if(i)throw new _t(i);if(!n.Ga.ab)throw new _t(63);return n.Ga.ab(n,t,r,e)},Wt=(t,r)=>Ut(t,(void 0!==r?r:511)&1023|16384,0),Gt=(t,r,e)=>{"undefined"==typeof e&&(e=r,r=438);Ut(t,r|8192,e)},zt=(t,r)=>{if(!ct(t))throw new _t(44);var e=Tt(r,{parent:!0}).node;if(!e)throw new _t(44);r=at(r);var n=Mt(e,r);if(n)throw new _t(n);if(!e.Ga.symlink)throw new _t(63);e.Ga.symlink(e,r,t)},Ht=t=>{var r=Tt(t,{parent:!0}).node;t=at(t);var e=jt(r,t),n=xt(r,t,!0);if(n)throw new _t(n);if(!r.Ga.rmdir)throw new _t(63);if(e.Va)throw new _t(10);r.Ga.rmdir(r,t);$t(e)},Zt=t=>{var r=Tt(t,{parent:!0}).node;if(!r)throw new _t(44);t=at(t);var e=jt(r,t),n=xt(r,t,!1);if(n)throw new _t(n);if(!r.Ga.unlink)throw new _t(63);if(e.Va)throw new _t(10);r.Ga.unlink(r,t);$t(e)},Qt=t=>{t=Tt(t).node;if(!t)throw new _t(44);if(!t.Ga.readlink)throw new _t(28);return ct(Ot(t.parent),t.Ga.readlink(t))},Jt=(t,r)=>{t=Tt(t,{Sa:!r}).node;if(!t)throw new _t(44);if(!t.Ga.Pa)throw new _t(63);return t.Ga.Pa(t)},Vt=t=>Jt(t,!0),Kt=(t,r)=>{t="string"==typeof t?Tt(t,{Sa:!0}).node:t;if(!t.Ga.Oa)throw new _t(63);t.Ga.Oa(t,{mode:r&4095|t.mode&-4096,timestamp:Date.now()})},Xt=(t,r)=>{if(0>r)throw new _t(28);t="string"==typeof t?Tt(t,{Sa:!0}).node:t;if(!t.Ga.Oa)throw new _t(63);if(16384===(t.mode&61440))throw new _t(31);if(32768!==(t.mode&61440))throw new _t(28);var e=It(t,"w");if(e)throw new _t(e);t.Ga.Oa(t,{size:r,timestamp:Date.now()})},Yt=(t,r,e)=>{if(""===t)throw new _t(44);if("string"==typeof r){var n=Dt[r];if("undefined"==typeof n)throw Error("Unknown file open mode: "+r);r=n}e=r&64?("undefined"==typeof e?438:e)&4095|32768:0;if("object"==typeof t)var i=t;else{t=st(t);try{i=Tt(t,{Sa:!(r&131072)}).node}catch(t){}}n=!1;if(r&64)if(i){if(r&128)throw new _t(20)}else i=Ut(t,e,0),n=!0;if(!i)throw new _t(44);8192===(i.mode&61440)&&(r&=-513);if(r&65536&&16384!==(i.mode&61440))throw new _t(54);if(!n&&(e=i?40960===(i.mode&61440)?32:16384===(i.mode&61440)&&("r"!==Nt(r)||r&512)?31:It(i,Nt(r)):44))throw new _t(e);r&512&&!n&&Xt(i,0);r&=-131713;i=Lt({node:i,path:Ot(i),flags:r,seekable:!0,position:0,Ha:i.Ha,Ib:[],error:!1});i.Ha.open&&i.Ha.open(i);!o.logReadFiles||r&1||(lr||(lr={}),t in lr||(lr[t]=1));return i},tr=t=>{if(null===t.fd)throw new _t(8);t.hb&&(t.hb=null);try{t.Ha.close&&t.Ha.close(t)}catch(t){throw t}finally{Et[t.fd]=null}t.fd=null},rr=(t,r,e)=>{if(null===t.fd)throw new _t(8);if(!t.seekable||!t.Ha.Ta)throw new _t(70);if(0!=e&&1!=e&&2!=e)throw new _t(28);t.position=t.Ha.Ta(t,r,e);t.Ib=[]},er=(t,r,e,n,i)=>{if(0>n||0>i)throw new _t(28);if(null===t.fd)throw new _t(8);if(1===(t.flags&2097155))throw new _t(8);if(16384===(t.node.mode&61440))throw new _t(31);if(!t.Ha.read)throw new _t(28);var s="undefined"!=typeof i;if(!s)i=t.position;else if(!t.seekable)throw new _t(70);r=t.Ha.read(t,r,e,n,i);s||(t.position+=r);return r},nr=(t,r,e,n,i)=>{if(0>n||0>i)throw new _t(28);if(null===t.fd)throw new _t(8);if(0===(t.flags&2097155))throw new _t(8);if(16384===(t.node.mode&61440))throw new _t(31);if(!t.Ha.write)throw new _t(28);t.seekable&&t.flags&1024&&rr(t,0,2);var s="undefined"!=typeof i;if(!s)i=t.position;else if(!t.seekable)throw new _t(70);r=t.Ha.write(t,r,e,n,i,void 0);s||(t.position+=r);return r},ir=t=>{var r;var e=Yt(t,e||0);t=Jt(t).size;var n=new Uint8Array(t);er(e,n,0,t,0);r=n;tr(e);return r},sr=()=>{_t||(_t=function(t,r){this.node=r;this.Hb=function(t){this.Ka=t};this.Hb(t);this.message="FS error"},_t.prototype=Error(),_t.prototype.constructor=_t,[44].forEach((t=>{kt[t]=new _t(t);kt[t].stack="<generic error, no stack>"})))},or,ar=(t,r)=>{var e=0;t&&(e|=365);r&&(e|=146);return e},ur=(t,r,e)=>{t=st("/dev/"+t);var n=ar(!!r,!!e);fr||(fr=64);var i=fr++<<8|0;Ft(i,{open:t=>{t.seekable=!1},close:()=>{e&&e.buffer&&e.buffer.length&&e(10)},read:(t,e,n,i)=>{for(var s=0,o=0;o<i;o++){try{var a=r()}catch(t){throw new _t(29)}if(void 0===a&&0===s)throw new _t(6);if(null===a||void 0===a)break;s++;e[n+o]=a}s&&(t.node.timestamp=Date.now());return s},write:(t,r,n,i)=>{for(var s=0;s<i;s++)try{e(r[n+s])}catch(t){throw new _t(29)}i&&(t.node.timestamp=Date.now());return s}});Gt(t,n,i)},fr,cr={},hr,lr;function dr(t,r,e){if("/"===r.charAt(0))return r;t=-100===t?"/":yr(t).path;if(0==r.length){if(!e)throw new _t(44);return t}return st(t+"/"+r)}function vr(t,r,e){try{var n=t(r)}catch(t){if(t&&t.node&&st(r)!==st(Ot(t.node)))return-54;throw t}N[e>>2]=n.dev;N[e+8>>2]=n.ino;N[e+12>>2]=n.mode;I[e+16>>2]=n.nlink;N[e+20>>2]=n.uid;N[e+24>>2]=n.gid;N[e+28>>2]=n.rdev;tt=[n.size>>>0,(Y=n.size,1<=+Math.abs(Y)?0<Y?(Math.min(+Math.floor(Y/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)];N[e+40>>2]=tt[0];N[e+44>>2]=tt[1];N[e+48>>2]=4096;N[e+52>>2]=n.blocks;tt=[Math.floor(n.atime.getTime()/1e3)>>>0,(Y=Math.floor(n.atime.getTime()/1e3),1<=+Math.abs(Y)?0<Y?(Math.min(+Math.floor(Y/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)];N[e+56>>2]=tt[0];N[e+60>>2]=tt[1];I[e+64>>2]=0;tt=[Math.floor(n.mtime.getTime()/1e3)>>>0,(Y=Math.floor(n.mtime.getTime()/1e3),1<=+Math.abs(Y)?0<Y?(Math.min(+Math.floor(Y/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)];N[e+72>>2]=tt[0];N[e+76>>2]=tt[1];I[e+80>>2]=0;tt=[Math.floor(n.ctime.getTime()/1e3)>>>0,(Y=Math.floor(n.ctime.getTime()/1e3),1<=+Math.abs(Y)?0<Y?(Math.min(+Math.floor(Y/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)];N[e+88>>2]=tt[0];N[e+92>>2]=tt[1];I[e+96>>2]=0;tt=[n.ino>>>0,(Y=n.ino,1<=+Math.abs(Y)?0<Y?(Math.min(+Math.floor(Y/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)];N[e+104>>2]=tt[0];N[e+108>>2]=tt[1];return 0}var wr=void 0;function mr(){wr+=4;return N[wr-4>>2]}function yr(t){t=Et[t];if(!t)throw new _t(8);return t}function br(t){return I[t>>2]+4294967296*N[t+4>>2]}function pr(t){var r=A(t)+1,e=Cr(r);e&&O(t,j,e,r);return e}function Er(t,r,e){function n(t){return(t=t.toTimeString().match(/\(([A-Za-z ]+)\)$/))?t[1]:"GMT"}var i=(new Date).getFullYear(),s=new Date(i,0,1),o=new Date(i,6,1);i=s.getTimezoneOffset();var a=o.getTimezoneOffset();N[t>>2]=60*Math.max(i,a);N[r>>2]=Number(i!=a);t=n(s);r=n(o);t=pr(t);r=pr(r);a<i?(I[e>>2]=t,I[e+4>>2]=r):(I[e>>2]=r,I[e+4>>2]=t)}function gr(t,r,e){gr.Bb||(gr.Bb=!0,Er(t,r,e))}var Pr;Pr=h?()=>{var t=G.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now();var Sr={};function _r(){if(!kr){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:u||"./this.program"},r;for(r in Sr)void 0===Sr[r]?delete t[r]:t[r]=Sr[r];var e=[];for(r in t)e.push(r+"="+t[r]);kr=e}return kr}var kr,Tr=void 0,$r=[];function jr(t,r){if(!Tr){Tr=new WeakMap;var e=L.length;if(Tr)for(var n=0;n<0+e;n++){var i=L.get(n);i&&Tr.set(i,n)}}if(Tr.has(t))return Tr.get(t);if($r.length)e=$r.pop();else{try{L.grow(1)}catch(t){if(!(t instanceof RangeError))throw t;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}e=L.length-1}try{L.set(e,t)}catch(a){if(!(a instanceof TypeError))throw a;if("function"==typeof WebAssembly.Function){n=WebAssembly.Function;i={i:"i32",j:"i64",f:"f32",d:"f64",p:"i32"};for(var s={parameters:[],results:"v"==r[0]?[]:[i[r[0]]]},o=1;o<r.length;++o)s.parameters.push(i[r[o]]);r=new n(s,t)}else{n=[1,96];i=r.slice(0,1);r=r.slice(1);s={i:127,p:127,j:126,f:125,d:124};o=r.length;128>o?n.push(o):n.push(o%128|128,o>>7);for(o=0;o<r.length;++o)n.push(s[r[o]]);"v"==i?n.push(0):n.push(1,s[i]);r=[0,97,115,109,1,0,0,0,1];i=n.length;128>i?r.push(i):r.push(i%128|128,i>>7);r.push.apply(r,n);r.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);r=new WebAssembly.Module(new Uint8Array(r));r=new WebAssembly.Instance(r,{e:{f:t}}).exports.f}L.set(e,r)}Tr.set(t,e);return e}function Rr(t){Tr.delete(L.get(t));$r.push(t)}function Dr(t){var r=Cr(t.length);t.subarray||t.slice||(t=new Uint8Array(t));R.set(t,r);return r}function Nr(t,r,e,n){var i={string:t=>{var r=0;if(null!==t&&void 0!==t&&0!==t){var e=(t.length<<2)+1;r=Ur(e);O(t,R,r,e)}return r},array:t=>{var r=Ur(t.length);j.set(t,r);return r}};t=o["_"+t];var s=[],a=0;if(n)for(var u=0;u<n.length;u++){var f=i[e[u]];f?(0===a&&(a=Fr()),s[u]=f(n[u])):s[u]=n[u]}e=t.apply(null,s);return e=function(t){0!==a&&qr(a);return"string"===r?T(t):"boolean"===r?!!t:t}(e)}function Ir(t,r,e,n){t||(t=this);this.parent=t;this.Ra=t.Ra;this.Va=null;this.id=gt++;this.name=r;this.mode=e;this.Ga={};this.Ha={};this.rdev=n}Object.defineProperties(Ir.prototype,{read:{get:function(){return 365===(this.mode&365)},set:function(t){t?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146===(this.mode&146)},set:function(t){t?this.mode|=146:this.mode&=-147}}});sr();Pt=Array(4096);qt(yt,"/");Wt("/tmp");Wt("/home");Wt("/home/web_user");(()=>{Wt("/dev");Ft(259,{read:()=>0,write:(t,r,e,n)=>n});Gt("/dev/null",259);dt(1280,wt);dt(1536,mt);Gt("/dev/tty",1280);Gt("/dev/tty1",1536);var t=ft();ur("random",t);ur("urandom",t);Wt("/dev/shm");Wt("/dev/shm/tmp")})();(()=>{Wt("/proc");var t=Wt("/proc/self");Wt("/proc/self/fd");qt({Ra:()=>{var r=Rt(t,"fd",16895,73);r.Ga={lookup:(t,r)=>{var e=Et[+r];if(!e)throw new _t(8);t={parent:null,Ra:{ub:"fake"},Ga:{readlink:()=>e.path}};return t.parent=t}};return r}},"/proc/self/fd")})();var Mr={a:function(t,r,e,n){Z("Assertion failed: "+T(t)+", at: "+[r?T(r):"unknown filename",e,n?T(n):"unknown function"])},h:function(t,r){try{return t=T(t),Kt(t,r),0}catch(t){if("undefined"==typeof cr||!(t instanceof _t))throw t;return-t.Ka}},H:function(t,r,e){try{r=T(r);r=dr(t,r);if(e&-8)return-28;var n=Tt(r,{Sa:!0}).node;if(!n)return-44;t="";e&4&&(t+="r");e&2&&(t+="w");e&1&&(t+="x");return t&&It(n,t)?-2:0}catch(t){if("undefined"==typeof cr||!(t instanceof _t))throw t;return-t.Ka}},i:function(t,r){try{var e=Et[t];if(!e)throw new _t(8);Kt(e.node,r);return 0}catch(t){if("undefined"==typeof cr||!(t instanceof _t))throw t;return-t.Ka}},g:function(t){try{var r=Et[t];if(!r)throw new _t(8);var e=r.node;var n="string"==typeof e?Tt(e,{Sa:!0}).node:e;if(!n.Ga.Oa)throw new _t(63);n.Ga.Oa(n,{timestamp:Date.now()});return 0}catch(t){if("undefined"==typeof cr||!(t instanceof _t))throw t;return-t.Ka}},b:function(t,r,e){wr=e;try{var n=yr(t);switch(r){case 0:var i=mr();return 0>i?-28:Lt(n,i).fd;case 1:case 2:return 0;case 3:return n.flags;case 4:return i=mr(),n.flags|=i,0;case 5:return i=mr(),D[i+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return N[xr()>>2]=28,-1;default:return-28}}catch(t){if("undefined"==typeof cr||!(t instanceof _t))throw t;return-t.Ka}},G:function(t,r){try{var e=yr(t);return vr(Jt,e.path,r)}catch(t){if("undefined"==typeof cr||!(t instanceof _t))throw t;return-t.Ka}},l:function(t,r,e){try{r=e+2097152>>>0<4194305-!!r?(r>>>0)+4294967296*e:NaN;if(isNaN(r))return-61;var n=Et[t];if(!n)throw new _t(8);if(0===(n.flags&2097155))throw new _t(28);Xt(n.node,r);return 0}catch(t){if("undefined"==typeof cr||!(t instanceof _t))throw t;return-t.Ka}},B:function(t,r){try{if(0===r)return-28;var e=A("/")+1;if(r<e)return-68;O("/",R,t,r);return e}catch(t){if("undefined"==typeof cr||!(t instanceof _t))throw t;return-t.Ka}},E:function(t,r){try{return t=T(t),vr(Vt,t,r)}catch(t){if("undefined"==typeof cr||!(t instanceof _t))throw t;return-t.Ka}},y:function(t,r,e){try{return r=T(r),r=dr(t,r),r=st(r),"/"===r[r.length-1]&&(r=r.substr(0,r.length-1)),Wt(r,e),0}catch(t){if("undefined"==typeof cr||!(t instanceof _t))throw t;return-t.Ka}},D:function(t,r,e,n){try{r=T(r);var i=n&256;r=dr(t,r,n&4096);return vr(i?Vt:Jt,r,e)}catch(t){if("undefined"==typeof cr||!(t instanceof _t))throw t;return-t.Ka}},v:function(t,r,e,n){wr=n;try{r=T(r);r=dr(t,r);var i=n?mr():0;return Yt(r,e,i).fd}catch(t){if("undefined"==typeof cr||!(t instanceof _t))throw t;return-t.Ka}},t:function(t,r,e,n){try{r=T(r);r=dr(t,r);if(0>=n)return-28;var i=Qt(r),s=Math.min(n,A(i)),o=j[e+s];O(i,R,e,n+1);j[e+s]=o;return s}catch(t){if("undefined"==typeof cr||!(t instanceof _t))throw t;return-t.Ka}},s:function(t){try{return t=T(t),Ht(t),0}catch(t){if("undefined"==typeof cr||!(t instanceof _t))throw t;return-t.Ka}},F:function(t,r){try{return t=T(t),vr(Jt,t,r)}catch(t){if("undefined"==typeof cr||!(t instanceof _t))throw t;return-t.Ka}},p:function(t,r,e){try{return r=T(r),r=dr(t,r),0===e?Zt(r):512===e?Ht(r):Z("Invalid flags passed to unlinkat"),0}catch(t){if("undefined"==typeof cr||!(t instanceof _t))throw t;return-t.Ka}},o:function(t,r,e){try{r=T(r);r=dr(t,r,!0);if(e){var n=br(e),i=N[e+8>>2];s=1e3*n+i/1e6;e+=16;n=br(e);i=N[e+8>>2];o=1e3*n+i/1e6}else var s=Date.now(),o=s;t=s;var a=Tt(r,{Sa:!0}).node;a.Ga.Oa(a,{timestamp:Math.max(t,o)});return 0}catch(t){if("undefined"==typeof cr||!(t instanceof _t))throw t;return-t.Ka}},e:function(){return Date.now()},j:function(t,r){t=new Date(1e3*br(t));N[r>>2]=t.getSeconds();N[r+4>>2]=t.getMinutes();N[r+8>>2]=t.getHours();N[r+12>>2]=t.getDate();N[r+16>>2]=t.getMonth();N[r+20>>2]=t.getFullYear()-1900;N[r+24>>2]=t.getDay();var e=new Date(t.getFullYear(),0,1);N[r+28>>2]=(t.getTime()-e.getTime())/864e5|0;N[r+36>>2]=-(60*t.getTimezoneOffset());var n=new Date(t.getFullYear(),6,1).getTimezoneOffset();e=e.getTimezoneOffset();N[r+32>>2]=(n!=e&&t.getTimezoneOffset()==Math.min(e,n))|0},w:function(t,r,e,n,i,s){try{var o=yr(n);if(0!==(r&2)&&0===(e&2)&&2!==(o.flags&2097155))throw new _t(2);if(1===(o.flags&2097155))throw new _t(2);if(!o.Ha.bb)throw new _t(43);var a=o.Ha.bb(o,t,i,r,e);var u=a.Fb;N[s>>2]=a.vb;return u}catch(t){if("undefined"==typeof cr||!(t instanceof _t))throw t;return-t.Ka}},x:function(t,r,e,n,i,s){try{var o=yr(i);if(e&2){var a=R.slice(t,t+r);o&&o.Ha.cb&&o.Ha.cb(o,a,s,r,n)}}catch(t){if("undefined"==typeof cr||!(t instanceof _t))throw t;return-t.Ka}},n:gr,q:function(){return 2147483648},d:Pr,c:function(t){var r=R.length;t>>>=0;if(2147483648<t)return!1;for(var e=1;4>=e;e*=2){var n=r*(1+.2/e);n=Math.min(n,t+100663296);var i=Math;n=Math.max(t,n);i=i.min.call(i,2147483648,n+(65536-n%65536)%65536);t:{try{P.grow(i-$.byteLength+65535>>>16);C();var s=1;break t}catch(t){}s=void 0}if(s)return!0}return!1},z:function(t,r){var e=0;_r().forEach((function(n,i){var s=r+e;i=I[t+4*i>>2]=s;for(s=0;s<n.length;++s)j[i++>>0]=n.charCodeAt(s);j[i>>0]=0;e+=n.length+1}));return 0},A:function(t,r){var e=_r();I[t>>2]=e.length;var n=0;e.forEach((function(t){n+=t.length+1}));I[r>>2]=n;return 0},f:function(t){try{var r=yr(t);tr(r);return 0}catch(t){if("undefined"==typeof cr||!(t instanceof _t))throw t;return t.Ka}},m:function(t,r){try{var e=yr(t);j[r>>0]=e.tty?2:16384===(e.mode&61440)?3:40960===(e.mode&61440)?7:4;return 0}catch(t){if("undefined"==typeof cr||!(t instanceof _t))throw t;return t.Ka}},u:function(t,r,e,n){try{t:{var i=yr(t);t=r;for(var s=r=0;s<e;s++){var o=I[t>>2],a=I[t+4>>2];t+=8;var u=er(i,j,o,a);if(0>u){var f=-1;break t}r+=u;if(u<a)break}f=r}I[n>>2]=f;return 0}catch(t){if("undefined"==typeof cr||!(t instanceof _t))throw t;return t.Ka}},k:function(t,r,e,n,i){try{r=e+2097152>>>0<4194305-!!r?(r>>>0)+4294967296*e:NaN;if(isNaN(r))return 61;var s=yr(t);rr(s,r,n);tt=[s.position>>>0,(Y=s.position,1<=+Math.abs(Y)?0<Y?(Math.min(+Math.floor(Y/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)];N[i>>2]=tt[0];N[i+4>>2]=tt[1];s.hb&&0===r&&0===n&&(s.hb=null);return 0}catch(t){if("undefined"==typeof cr||!(t instanceof _t))throw t;return t.Ka}},C:function(t){try{var r=yr(t);return r.Ha&&r.Ha.fsync?r.Ha.fsync(r):0}catch(t){if("undefined"==typeof cr||!(t instanceof _t))throw t;return t.Ka}},r:function(t,r,e,n){try{t:{var i=yr(t);t=r;for(var s=r=0;s<e;s++){var o=I[t>>2],a=I[t+4>>2];t+=8;var u=nr(i,j,o,a);if(0>u){var f=-1;break t}r+=u}f=r}I[n>>2]=f;return 0}catch(t){if("undefined"==typeof cr||!(t instanceof _t))throw t;return t.Ka}}};(function(){function t(t){o.asm=t.exports;P=o.asm.I;C();L=o.asm.Aa;F.unshift(o.asm.J);W--;o.monitorRunDependencies&&o.monitorRunDependencies(W);0==W&&(H&&(t=H,H=null,t()))}function r(r){t(r.instance)}function e(t){return X().then((function(t){return WebAssembly.instantiate(t,n)})).then((function(t){return t})).then(t,(function(t){E("failed to asynchronously prepare wasm: "+t);Z(t)}))}var n={a:Mr};W++;o.monitorRunDependencies&&o.monitorRunDependencies(W);if(o.instantiateWasm)try{return o.instantiateWasm(n,t)}catch(t){return E("Module.instantiateWasm callback failed with error: "+t),!1}(function(){return g||"function"!=typeof WebAssembly.instantiateStreaming||Q()||J.startsWith("file://")||h||"function"!=typeof fetch?e(r):fetch(J,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,n).then(r,(function(t){E("wasm streaming compile failed: "+t);E("falling back to ArrayBuffer instantiation");return e(r)}))}))})();return{}})();o.___wasm_call_ctors=function(){return(o.___wasm_call_ctors=o.asm.J).apply(null,arguments)};o._sqlite3_free=function(){return(o._sqlite3_free=o.asm.K).apply(null,arguments)};o._sqlite3_value_double=function(){return(o._sqlite3_value_double=o.asm.L).apply(null,arguments)};o._sqlite3_value_text=function(){return(o._sqlite3_value_text=o.asm.M).apply(null,arguments)};var xr=o.___errno_location=function(){return(xr=o.___errno_location=o.asm.N).apply(null,arguments)};o._sqlite3_prepare_v2=function(){return(o._sqlite3_prepare_v2=o.asm.O).apply(null,arguments)};o._sqlite3_step=function(){return(o._sqlite3_step=o.asm.P).apply(null,arguments)};o._sqlite3_finalize=function(){return(o._sqlite3_finalize=o.asm.Q).apply(null,arguments)};o._sqlite3_reset=function(){return(o._sqlite3_reset=o.asm.R).apply(null,arguments)};o._sqlite3_value_int=function(){return(o._sqlite3_value_int=o.asm.S).apply(null,arguments)};o._sqlite3_clear_bindings=function(){return(o._sqlite3_clear_bindings=o.asm.T).apply(null,arguments)};o._sqlite3_value_blob=function(){return(o._sqlite3_value_blob=o.asm.U).apply(null,arguments)};o._sqlite3_value_bytes=function(){return(o._sqlite3_value_bytes=o.asm.V).apply(null,arguments)};o._sqlite3_value_type=function(){return(o._sqlite3_value_type=o.asm.W).apply(null,arguments)};o._sqlite3_result_blob=function(){return(o._sqlite3_result_blob=o.asm.X).apply(null,arguments)};o._sqlite3_result_double=function(){return(o._sqlite3_result_double=o.asm.Y).apply(null,arguments)};o._sqlite3_result_error=function(){return(o._sqlite3_result_error=o.asm.Z).apply(null,arguments)};o._sqlite3_result_int=function(){return(o._sqlite3_result_int=o.asm._).apply(null,arguments)};o._sqlite3_result_int64=function(){return(o._sqlite3_result_int64=o.asm.$).apply(null,arguments)};o._sqlite3_result_null=function(){return(o._sqlite3_result_null=o.asm.aa).apply(null,arguments)};o._sqlite3_result_text=function(){return(o._sqlite3_result_text=o.asm.ba).apply(null,arguments)};o._sqlite3_sql=function(){return(o._sqlite3_sql=o.asm.ca).apply(null,arguments)};o._sqlite3_aggregate_context=function(){return(o._sqlite3_aggregate_context=o.asm.da).apply(null,arguments)};o._sqlite3_column_count=function(){return(o._sqlite3_column_count=o.asm.ea).apply(null,arguments)};o._sqlite3_data_count=function(){return(o._sqlite3_data_count=o.asm.fa).apply(null,arguments)};o._sqlite3_column_blob=function(){return(o._sqlite3_column_blob=o.asm.ga).apply(null,arguments)};o._sqlite3_column_bytes=function(){return(o._sqlite3_column_bytes=o.asm.ha).apply(null,arguments)};o._sqlite3_column_double=function(){return(o._sqlite3_column_double=o.asm.ia).apply(null,arguments)};o._sqlite3_column_text=function(){return(o._sqlite3_column_text=o.asm.ja).apply(null,arguments)};o._sqlite3_column_type=function(){return(o._sqlite3_column_type=o.asm.ka).apply(null,arguments)};o._sqlite3_column_name=function(){return(o._sqlite3_column_name=o.asm.la).apply(null,arguments)};o._sqlite3_bind_blob=function(){return(o._sqlite3_bind_blob=o.asm.ma).apply(null,arguments)};o._sqlite3_bind_double=function(){return(o._sqlite3_bind_double=o.asm.na).apply(null,arguments)};o._sqlite3_bind_int=function(){return(o._sqlite3_bind_int=o.asm.oa).apply(null,arguments)};o._sqlite3_bind_text=function(){return(o._sqlite3_bind_text=o.asm.pa).apply(null,arguments)};o._sqlite3_bind_parameter_index=function(){return(o._sqlite3_bind_parameter_index=o.asm.qa).apply(null,arguments)};o._sqlite3_normalized_sql=function(){return(o._sqlite3_normalized_sql=o.asm.ra).apply(null,arguments)};o._sqlite3_errmsg=function(){return(o._sqlite3_errmsg=o.asm.sa).apply(null,arguments)};o._sqlite3_exec=function(){return(o._sqlite3_exec=o.asm.ta).apply(null,arguments)};o._sqlite3_changes=function(){return(o._sqlite3_changes=o.asm.ua).apply(null,arguments)};o._sqlite3_close_v2=function(){return(o._sqlite3_close_v2=o.asm.va).apply(null,arguments)};o._sqlite3_create_function_v2=function(){return(o._sqlite3_create_function_v2=o.asm.wa).apply(null,arguments)};o._sqlite3_open=function(){return(o._sqlite3_open=o.asm.xa).apply(null,arguments)};var Cr=o._malloc=function(){return(Cr=o._malloc=o.asm.ya).apply(null,arguments)},Lr=o._free=function(){return(Lr=o._free=o.asm.za).apply(null,arguments)};o._RegisterExtensionFunctions=function(){return(o._RegisterExtensionFunctions=o.asm.Ba).apply(null,arguments)};var Br=o._emscripten_builtin_memalign=function(){return(Br=o._emscripten_builtin_memalign=o.asm.Ca).apply(null,arguments)},Fr=o.stackSave=function(){return(Fr=o.stackSave=o.asm.Da).apply(null,arguments)},qr=o.stackRestore=function(){return(qr=o.stackRestore=o.asm.Ea).apply(null,arguments)},Ur=o.stackAlloc=function(){return(Ur=o.stackAlloc=o.asm.Fa).apply(null,arguments)};o.UTF8ToString=T;o.stackAlloc=Ur;o.stackSave=Fr;o.stackRestore=qr;o.cwrap=function(t,r,e,n){e=e||[];var i=e.every((t=>"number"===t||"boolean"===t));return"string"!==r&&i&&!n?o["_"+t]:function(){return Nr(t,r,e,arguments)}};var Wr;H=function t(){Wr||Gr();Wr||(H=t)};function Gr(){function t(){if(!Wr&&(Wr=!0,o.calledRun=!0,!S)){o.noFSInit||or||(or=!0,sr(),o.stdin=o.stdin,o.stdout=o.stdout,o.stderr=o.stderr,o.stdin?ur("stdin",o.stdin):zt("/dev/tty","/dev/stdin"),o.stdout?ur("stdout",null,o.stdout):zt("/dev/tty","/dev/stdout"),o.stderr?ur("stderr",null,o.stderr):zt("/dev/tty1","/dev/stderr"),Yt("/dev/stdin",0),Yt("/dev/stdout",1),Yt("/dev/stderr",1));St=!1;rt(F);if(o.onRuntimeInitialized)o.onRuntimeInitialized();if(o.postRun)for("function"==typeof o.postRun&&(o.postRun=[o.postRun]);o.postRun.length;){var t=o.postRun.shift();q.unshift(t)}rt(q)}}if(!(0<W)){if(o.preRun)for("function"==typeof o.preRun&&(o.preRun=[o.preRun]);o.preRun.length;)U();rt(B);0<W||(o.setStatus?(o.setStatus("Running..."),setTimeout((function(){setTimeout((function(){o.setStatus("")}),1);t()}),1)):t())}}if(o.preInit)for("function"==typeof o.preInit&&(o.preInit=[o.preInit]);0<o.preInit.length;)o.preInit.pop()();Gr();return i}));return e};{t.exports=n;t.exports.default=n}}));const jr=async(t,r)=>{try{const e=await r.getItem(t);return Promise.resolve(e)}catch(t){return Promise.reject(`GetDBFromStore: ${t.message}`)}};const Rr=async(t,r)=>{try{const e=null;await r.setItem(t,e);return Promise.resolve()}catch(t){return Promise.reject(`SetInitialDBToStore: ${t.message}`)}};const Dr=async(t,r,e)=>{try{const n=t.export();await Nr(r,n,e);return Promise.resolve()}catch(t){return Promise.reject(`SetDBToStore: ${t.message}`)}};const Nr=async(t,r,e)=>{try{await e.setItem(t,r);return Promise.resolve()}catch(t){return Promise.reject(`SaveDBToStore: ${t.message}`)}};const Ir=async(t,r)=>{try{await r.removeItem(t);return Promise.resolve()}catch(t){return Promise.reject(`RemoveDBFromStore: ${t.message}`)}};const Mr=async(t,r)=>{try{const e=await r.getItem(t);if(e!=null&&e.length>0){return Promise.resolve(true)}else{return Promise.resolve(false)}}catch(t){return Promise.reject(`IsDBInStore: ${t}`)}};const xr=async(t,r,e)=>{const n=`${r}-${t}`;try{const r=await Mr(n,e);if(r){const r=await Mr(t,e);if(r){const r=await jr(n,e);await Nr(t,r,e);await Ir(n,e);return Promise.resolve()}else{return Promise.reject(new Error(`RestoreDBFromStore: ${t} does not exist`))}}else{return Promise.reject(new Error(`RestoreDBFromStore: ${n} does not exist`))}}catch(t){return Promise.reject(`RestoreDBFromStore: ${t.message}`)}};const Cr=async(t,r,e)=>{try{const n=await Mr(t,e);if(n){const n=await jr(t,e);await Nr(r,n,e);return Promise.resolve()}else{return Promise.reject(new Error(`CopyDBToStore: ${t} does not exist`))}}catch(t){return Promise.reject(`CopyDBToStore: ${t.message}`)}};const Lr=async t=>{try{const r=await t.keys();return Promise.resolve(r)}catch(t){return Promise.reject(`GetDBListFromStore: ${t.message}`)}};const Br=async t=>{let r="SELECT name FROM sqlite_master WHERE ";r+="type='table' AND name NOT LIKE 'sync_table' ";r+="AND name NOT LIKE '_temp_%' ";r+="AND name NOT LIKE 'sqlite_%' ";r+="ORDER BY rootpage DESC;";const e=[];try{const n=await fe(t,r,[]);for(const t of n){e.push(t.name)}return Promise.resolve(e)}catch(t){return Promise.reject(new Error(`GetTablesNames: ${t.message}`))}};const Fr=async(t,r)=>{let e="";let n=`AND name NOT LIKE ('sqlite_%')`;switch(r){case"index":e="DropIndexes";break;case"trigger":e="DropTriggers";break;case"table":e="DropTables";n+=` AND name NOT IN ('sync_table')`;break;case"view":e="DropViews";break;default:return Promise.reject(new Error(`DropElements: ${r} `+"not found"))}let i="SELECT name FROM sqlite_master WHERE ";i+=`type = '${r}' ${n};`;try{const n=await fe(t,i,[]);if(n.length>0){const i=r.toUpperCase();const s=[];for(const t of n){let r=`DROP ${i} IF EXISTS `;r+=`${t.name};`;s.push(r)}for(const r of s){const n=await ce(t,r,[],false);if(n<0){return Promise.reject(new Error(`DropElements: ${e}: lastId < 0`))}}}return Promise.resolve()}catch(t){return Promise.reject(new Error(`DropElements: ${e}: ${t.message}`))}};const qr=async t=>{try{await Fr(t,"table");await Fr(t,"index");await Fr(t,"trigger");await Fr(t,"view");await ce(t,"VACUUM;",[],false);return Promise.resolve()}catch(t){return Promise.reject(new Error(`DropAll: ${t.message}`))}};const Ur=async t=>{const r=["database","version","overwrite","encrypted","mode","tables","views"];if(t==null||Object.keys(t).length===0&&t.constructor===Object)return false;for(const e of Object.keys(t)){if(r.indexOf(e)===-1)return false;if(e==="database"&&typeof t[e]!="string")return false;if(e==="version"&&typeof t[e]!="number")return false;if(e==="overwrite"&&typeof t[e]!="boolean")return false;if(e==="encrypted"&&typeof t[e]!="boolean")return false;if(e==="mode"&&typeof t[e]!="string")return false;if(e==="tables"&&typeof t[e]!="object")return false;if(e==="tables"){for(const r of t[e]){const t=await Wr(r);if(!t)return false}}if(e==="views"&&typeof t[e]!="object")return false;if(e==="views"){for(const r of t[e]){const t=await Zr(r);if(!t)return false}}}return true};const Wr=async t=>{const r=["name","schema","indexes","triggers","values"];let e=0;if(t==null||Object.keys(t).length===0&&t.constructor===Object)return false;for(const n of Object.keys(t)){if(r.indexOf(n)===-1)return false;if(n==="name"&&typeof t[n]!="string")return false;if(n==="schema"&&typeof t[n]!="object")return false;if(n==="indexes"&&typeof t[n]!="object")return false;if(n==="triggers"&&typeof t[n]!="object")return false;if(n==="values"&&typeof t[n]!="object")return false;if(n==="schema"){t["schema"].forEach((t=>{if(t.column){e++}}));for(let r=0;r<e;r++){const e=await Gr(t[n][r]);if(!e)return false}}if(n==="indexes"){for(const r of t[n]){const t=await zr(r);if(!t)return false}}if(n==="triggers"){for(const r of t[n]){const t=await Hr(r);if(!t)return false}}if(n==="values"){if(e>0){for(const r of t[n]){if(typeof r!="object"||r.length!=e)return false}}}}return true};const Gr=async t=>{const r=["column","value","foreignkey","primarykey","constraint"];if(t==null||Object.keys(t).length===0&&t.constructor===Object)return false;for(const e of Object.keys(t)){if(r.indexOf(e)===-1)return false;if(e==="column"&&typeof t[e]!="string")return false;if(e==="value"&&typeof t[e]!="string")return false;if(e==="foreignkey"&&typeof t[e]!="string")return false;if(e==="primarykey"&&typeof t[e]!="string")return false;if(e==="constraint"&&typeof t[e]!="string")return false}return true};const zr=async t=>{const r=["name","value","mode"];if(t==null||Object.keys(t).length===0&&t.constructor===Object)return false;for(const e of Object.keys(t)){if(r.indexOf(e)===-1)return false;if(e==="name"&&typeof t[e]!="string")return false;if(e==="value"&&typeof t[e]!="string")return false;if(e==="mode"&&(typeof t[e]!="string"||t[e].toUpperCase()!="UNIQUE"))return false}return true};const Hr=async t=>{const r=["name","timeevent","condition","logic"];if(t==null||Object.keys(t).length===0&&t.constructor===Object)return false;for(const e of Object.keys(t)){if(r.indexOf(e)===-1)return false;if(e==="name"&&typeof t[e]!="string")return false;if(e==="timeevent"&&typeof t[e]!="string")return false;if(e==="condition"&&typeof t[e]!="string")return false;if(e==="logic"&&typeof t[e]!="string")return false}return true};const Zr=async t=>{const r=["name","value"];if(t==null||Object.keys(t).length===0&&t.constructor===Object)return false;for(const e of Object.keys(t)){if(r.indexOf(e)===-1)return false;if(e==="name"&&typeof t[e]!="string")return false;if(e==="value"&&typeof t[e]!="string")return false}return true};const Qr=async t=>{for(let r=0;r<t.length;r++){const e={};const n=Object.keys(t[r]);if(n.includes("column")){e.column=t[r].column}if(n.includes("value")){e.value=t[r].value}if(n.includes("foreignkey")){e.foreignkey=t[r].foreignkey}if(n.includes("constraint")){e.constraint=t[r].constraint}const i=await Gr(e);if(!i){return Promise.reject(new Error(`CheckSchemaValidity: schema[${r}] not valid`))}}return Promise.resolve()};const Jr=async t=>{for(let r=0;r<t.length;r++){const e={};const n=Object.keys(t[r]);if(n.includes("value")){e.value=t[r].value}if(n.includes("name")){e.name=t[r].name}if(n.includes("mode")){e.mode=t[r].mode}const i=await zr(e);if(!i){return Promise.reject(new Error(`CheckIndexesValidity: indexes[${r}] not valid`))}}return Promise.resolve()};const Vr=async t=>{for(let r=0;r<t.length;r++){const e={};const n=Object.keys(t[r]);if(n.includes("logic")){e.logic=t[r].logic}if(n.includes("name")){e.name=t[r].name}if(n.includes("timeevent")){e.timeevent=t[r].timeevent}if(n.includes("condition")){e.condition=t[r].condition}const i=await Hr(e);if(!i){return Promise.reject(new Error(`CheckTriggersValidity: triggers[${r}] not valid`))}}return Promise.resolve()};const Kr=async(t,r)=>{let e=[];const n=[];const i=[];const s=`PRAGMA table_info('${r}');`;try{e=await fe(t,s,[]);if(e.length>0){for(const t of e){n.push(t.name);i.push(t.type)}}return Promise.resolve({names:n,types:i})}catch(t){return Promise.reject(new Error("GetTableColumnNamesTypes: "+`${t.message}`))}};const Xr=async(t,r,e)=>{const n=[];try{const i=await Kr(t,e);let s=[];if(Object.keys(i).includes("names")){s=i.names}else{return Promise.reject(new Error(`GetValues: Table ${e} no names`))}const o=await fe(t,r,[]);for(const t of o){const r=[];for(const e of s){if(Object.keys(t).includes(e)){r.push(t[e])}else{r.push(null)}}n.push(r)}return Promise.resolve(n)}catch(t){return Promise.reject(new Error(`GetValues: ${t.message}`))}};const Yr=async(t,r)=>{const e="BeginTransaction: ";if(!r){return Promise.reject(new Error(`${e}database not opened`))}const n="BEGIN TRANSACTION;";try{t.exec(n);return Promise.resolve()}catch(t){return Promise.reject(new Error(`${e}${t.message}`))}};const te=async(t,r)=>{const e="RollbackTransaction: ";if(!r){return Promise.reject(new Error(`${e}database not opened`))}const n="ROLLBACK TRANSACTION;";try{t.exec(n);return Promise.resolve()}catch(t){return Promise.reject(new Error(`${e}${t.message}`))}};const re=async(t,r)=>{const e="CommitTransaction: ";if(!r){return Promise.reject(new Error(`${e}database not opened`))}const n="COMMIT TRANSACTION;";try{t.exec(n);return Promise.resolve()}catch(t){return Promise.reject(new Error(`${e}${t.message}`))}};const ee=async t=>{const r="SELECT total_changes()";let e=0;try{const n=t.exec(r);e=n[0].values[0][0];return Promise.resolve(e)}catch(t){return Promise.reject(new Error(`DbChanges failed: ${t.message}`))}};const ne=async t=>{const r="SELECT last_insert_rowid()";let e=-1;try{const n=t.exec(r);e=n[0].values[0][0];return Promise.resolve(e)}catch(t){return Promise.reject(new Error(`GetLastId failed: ${t.message}`))}};const ie=async(t,r)=>{let e="PRAGMA foreign_keys=OFF";if(r){e="PRAGMA foreign_keys=ON"}try{t.run(e);return Promise.resolve()}catch(t){const r=t.message?t.message:t;return Promise.reject(new Error(`SetForeignKey: ${r}`))}};const se=async t=>{let r=0;try{const e=t.exec("PRAGMA user_version;");r=e[0].values[0][0];return Promise.resolve(r)}catch(t){return Promise.reject(new Error(`GetVersion: ${t.message}`))}};const oe=async(t,r)=>{try{t.exec(`PRAGMA user_version = ${r}`);return Promise.resolve()}catch(t){return Promise.reject(new Error(`SetVersion: ${t.message}`))}};const ae=async(t,r,e)=>{let n=-1;let i=-1;try{i=await ee(t);var s=r;if(!e&&r.toLowerCase().includes("DELETE FROM".toLowerCase())){s=r.replace(/\n/g,"");let e=s.split(";");var o=[];for(const r of e){const e=r.trim().substring(0,11).toUpperCase();if(e==="DELETE FROM"&&r.toLowerCase().includes("WHERE".toLowerCase())){const e=r.trim();const n=await he(t,e,[]);o.push(n)}else{o.push(r)}}s=o.join(";")}t.exec(s);n=await ee(t)-i;return Promise.resolve(n)}catch(t){return Promise.reject(new Error(`Execute: ${t.message}`))}};const ue=async(t,r,e)=>{let n=-1;for(let i=0;i<r.length;i++){const s="statement"in r[i]?r[i].statement:null;const o="values"in r[i]&&r[i].values.length>0?r[i].values:[];if(s==null){let t="ExecuteSet: Error No statement";t+=` for index ${i}`;return Promise.reject(new Error(t))}try{if(Array.isArray(o[0])){for(const r of o){const n=await Pe(r);await ce(t,s,n,e)}}else{const r=await Pe(o);await ce(t,s,r,e)}n=await ne(t)}catch(t){return Promise.reject(new Error(`ExecuteSet: ${t.message}`))}}return Promise.resolve(n)};const fe=async(t,r,e)=>{const n=[];try{let i=[];if(e!=null&&e.length>0){i=t.exec(r,e)}else{i=t.exec(r)}if(i.length==0)return Promise.resolve([]);for(const t of i[0].values){const r={};for(let e=0;e<i[0].columns.length;e++){r[i[0].columns[e]]=t[e]}n.push(r)}return Promise.resolve(n)}catch(t){return Promise.reject(new Error(`queryAll: ${t.message}`))}};const ce=async(t,r,e,n)=>{let i=r.replace(/\n/g,"").trim().substring(0,6).toUpperCase();let s=-1;let o=r;try{if(!n&&i==="DELETE"){o=await he(t,r,e)}if(e!=null&&e.length>0){const r=await Pe(e);t.exec(o,r)}else{t.exec(o)}s=await ne(t);return Promise.resolve(s)}catch(t){return Promise.reject(new Error(`run: ${t.message}`))}};const he=async(t,r,e)=>{let n=r;try{const i=await Ee(t,true);const s=await ge(t,true);if(i&&s){const i=r.toUpperCase().indexOf("WHERE");const s=r.substring(0,i-1);const o=r.substring(i,r.length);const a=s.substring("DELETE FROM".length).trim();n=`UPDATE ${a} SET sql_deleted = 1 ${o}`;await le(t,a,o,e)}return Promise.resolve(n)}catch(t){return Promise.reject(new Error(`deleteSQL: ${t.message}`))}};const le=async(t,r,e,n)=>{try{const i=await ye(t,r);const s=i.pop();for(const o of i){const i=await de(o);if(i.length<=0){continue}const a=await we(o);if(a.length<=0){continue}const u=await ve(o);if(u.length<=0){continue}const f=await me(e,a,u);if(f.length<=6){continue}let c=s;let h=u;if(s===r){c=i;h=a}const l="UPDATE "+c+" SET sql_deleted = 1 "+f;if(n!=null&&n.length>0){const r=await Pe(n);let i=e.split("?");if(i[i.length-1]===";")i=i.slice(0,-1);let s=[];for(const[t,e]of i.entries()){for(let n=0;n<h.length;n++){const i=e.indexOf(h[n]);if(i>-1){s.push(r[t])}}}t.exec(l,s)}else{t.exec(l)}const d=await ne(t);if(d==-1){const t=`UPDATE sql_deleted failed for references table: ${i}`;return Promise.reject(new Error(`findReferencesAndUpdate: ${t}`))}}return}catch(t){return Promise.reject(new Error(`findReferencesAndUpdate: ${t.message}`))}};const de=async t=>{var r="";if(t.length>0){const e=t.split(new RegExp("REFERENCES","i"));if(e.length===2){const t=e[1].indexOf("(");r=e[1].substring(0,t).trim()}}return r};const ve=async t=>{let r=[];if(t.length>0){const e=t.split(new RegExp("REFERENCES","i"));if(e.length===2){const t=e[1].indexOf("(");const n=e[1].indexOf(")");const i=e[1].substring(t+1,n).trim();r=i.split(",")}}return r};const we=async t=>{let r=[];if(t.length>0){const e=t.split(new RegExp("REFERENCES","i"));if(e.length===2){const t=e[0].indexOf("(");const n=e[0].indexOf(")");const i=e[0].substring(t+1,n).trim();r=i.split(",")}}return r};const me=async(t,r,e)=>{var n="";if(t.length>0){const i=t.toLowerCase().indexOf("WHERE".toLowerCase());const s=t.substring(i+6);if(r.length===e.length){for(let t=0;t<r.length;t++){let i="withRefsNames";let o=s.indexOf(r[t]);if(o===-1){o=s.indexOf(e[t]);i="colNames"}if(o>-1){let a="";const u=s.indexOf("=",o);if(u>-1){const o=s.indexOf("AND",u);const f=s.indexOf("and",u);if(o>-1){a=s.substring(u+1,o-1).trim()}else if(f>-1){a=s.substring(u+1,f-1).trim()}else{a=s.substring(u+1,s.length).trim()}if(t>0){n+=" AND "}if(i==="withRefsNames"){n+=`${e[t]} = ${a}`}else{n+=`${r[t]} = ${a}`}}}}n="WHERE "+n}}return n};const ye=async(t,r)=>{const e="SELECT sql FROM sqlite_master "+"WHERE sql LIKE('%FOREIGN KEY%') AND sql LIKE('%REFERENCES%') AND "+"sql LIKE('%"+r+"%') AND sql LIKE('%ON DELETE%');";try{const r=await fe(t,e,[]);let n=[];if(r.length>0){n=Se(r[0].sql)}return Promise.resolve(n)}catch(t){return Promise.reject(new Error(`getReferences: ${t.message}`))}};const be=async t=>{try{const r=await Br(t);return Promise.resolve(r)}catch(t){return Promise.reject(new Error(`getTableList: ${t.message}`))}};const pe=async(t,r)=>{try{let e="SELECT name FROM sqlite_master WHERE ";e+=`type='table' AND name='${r}';`;const n=await fe(t,e,[]);const i=n.length>0?true:false;return Promise.resolve(i)}catch(t){return Promise.reject(new Error(`isTableExists: ${t.message}`))}};const Ee=async(t,r)=>{if(!r){return Promise.reject("isLastModified: database not opened")}try{const r=await Br(t);for(const e of r){const r=await Kr(t,e);const n=r.names;if(n.includes("last_modified")){return Promise.resolve(true)}}}catch(t){return Promise.reject(`isLastModified: ${t}`)}};const ge=async(t,r)=>{if(!r){return Promise.reject("isSqlDeleted: database not opened")}try{const r=await Br(t);for(const e of r){const r=await Kr(t,e);const n=r.names;if(n.includes("sql_deleted")){return Promise.resolve(true)}}}catch(t){return Promise.reject(`isSqlDeleted: ${t}`)}};const Pe=async t=>{const r=[];for(const e of t){let t=e;if(typeof e==="undefined")t=null;r.push(t)}return Promise.resolve(r)};const Se=t=>{let r=[];const e=t.split(new RegExp("FOREIGN KEY","i"));for(let t=1;t<e.length;t++){r.push(e[t].split(new RegExp("ON DELETE","i"))[0].trim())}if(t.substring(0,12).toLowerCase()==="CREATE TABLE".toLowerCase()){const e=t.indexOf("(");const n=t.substring(13,e).trim();r.push(n)}return r};const _e=async(t,r)=>{let e=-1;const n=r.version;try{await oe(t,n);if(r.mode==="full"){await qr(t)}e=await ke(t,r);return Promise.resolve(e)}catch(t){return Promise.reject(new Error("CreateDatabaseSchema: "+`${t.message}`))}};const ke=async(t,r)=>{let e=0;try{await Yr(t,true)}catch(t){return Promise.reject(new Error(`CreateSchema: ${t.message}`))}const n=await Te(r);if(n.length>0){const r=n.join("\n");try{e=await ae(t,r,true);if(e<0){try{await te(t,true)}catch(t){return Promise.reject(new Error("CreateSchema: changes < 0 "+`${t.message}`))}}}catch(r){const e=r.message;try{await te(t,true);return Promise.reject(new Error(`CreateSchema: ${e}`))}catch(t){return Promise.reject(new Error("CreateSchema: changes < 0 "+`${t.message}: ${e}`))}}}try{await re(t,true);return Promise.resolve(e)}catch(t){return Promise.reject(new Error("CreateSchema: commit "+`${t.message}`))}};const Te=async t=>{const r=[];let e=false;let n=false;try{for(const i of t.tables){if(i.schema!=null&&i.schema.length>=1){r.push("CREATE TABLE IF NOT EXISTS "+`${i.name} (`);for(let t=0;t<i.schema.length;t++){if(t===i.schema.length-1){if(i.schema[t].column){r.push(`${i.schema[t].column} ${i.schema[t].value}`);if(i.schema[t].column==="last_modified"){e=true}if(i.schema[t].column==="sql_deleted"){n=true}}else if(i.schema[t].foreignkey){r.push(`FOREIGN KEY (${i.schema[t].foreignkey}) ${i.schema[t].value}`)}else if(i.schema[t].constraint){r.push(`CONSTRAINT ${i.schema[t].constraint} ${i.schema[t].value}`)}}else{if(i.schema[t].column){r.push(`${i.schema[t].column} ${i.schema[t].value},`)}else if(i.schema[t].foreignkey){r.push(`FOREIGN KEY (${i.schema[t].foreignkey}) ${i.schema[t].value},`)}else if(i.schema[t].primarykey){r.push(`FOREIGN KEY ${i.schema[t].value},`)}else if(i.schema[t].constraint){r.push(`CONSTRAINT ${i.schema[t].constraint} ${i.schema[t].value},`)}}}r.push(");");if(e&&n){let t="CREATE TRIGGER IF NOT EXISTS ";t+=`${i.name}`;t+=`_trigger_last_modified `;t+=`AFTER UPDATE ON ${i.name} `;t+="FOR EACH ROW WHEN NEW.last_modified < ";t+="OLD.last_modified BEGIN UPDATE ";t+=`${i.name} `;t+=`SET last_modified = `;t+="(strftime('%s','now')) WHERE id=OLD.id; END;";r.push(t)}}if(i.indexes!=null&&i.indexes.length>=1){for(const t of i.indexes){const e=i.name;let n=`CREATE ${Object.keys(t).includes("mode")?t.mode+" ":""} INDEX IF NOT EXISTS `;n+=`${t.name} ON ${e} (${t.value});`;r.push(n)}}if(i.triggers!=null&&i.triggers.length>=1){for(const t of i.triggers){const e=i.name;if(t.timeevent.toUpperCase().endsWith(" ON")){t.timeevent=t.timeevent.substring(0,t.timeevent.length-3)}let n=`CREATE TRIGGER IF NOT EXISTS `;n+=`${t.name} ${t.timeevent} ON ${e} `;if(t.condition)n+=`${t.condition} `;n+=`${t.logic};`;r.push(n)}}}return Promise.resolve(r)}catch(t){return Promise.reject(t)}};const Oe=async(t,r,e)=>{let n=0;let i=false;let s=-1;let o="";let a=-1;try{a=await ee(t);await Yr(t,true)}catch(t){return Promise.reject(new Error(`createTablesData: ${t.message}`))}for(const n of r.tables){if(n.values!=null&&n.values.length>=1){try{s=await Ae(t,n,r.mode);const o=`create table data ${n.name}`;e.emit({progress:o});if(s<0)break;i=true}catch(t){o=t.message;i=false;break}}}if(i){try{await re(t,true);n=await ee(t)-a;return Promise.resolve(n)}catch(t){return Promise.reject(new Error("CreateTablesData: "+`${t.message}`))}}else{if(o.length>0){try{await te(t,true);return Promise.reject(new Error(`CreateTablesData: ${o}`))}catch(t){return Promise.reject(new Error("CreateTablesData: "+`${t.message}: ${o}`))}}else{return Promise.resolve(0)}}};const Ae=async(t,r,e)=>{let n=-1;try{const i=await pe(t,r.name);if(!i){return Promise.reject(new Error("CreateTableData: Table "+`${r.name} does not exist`))}const s=await Kr(t,r.name);const o=s.types;const a=s.names;if(o.length===0){return Promise.reject(new Error("CreateTableData: Table "+`${r.name} info does not exist`))}for(let i=0;i<r.values.length;i++){let s=r.values[i];let o=true;const u=await $e(t,a,s,i,r.name,e);o=await je(t,u,s,r.name,a);if(o){if(u.substring(0,6).toUpperCase()==="DELETE"){s=[]}n=await ce(t,u,s,true);if(n<0){return Promise.reject(new Error("CreateTableData: lastId < 0"))}}else{n=0}}return Promise.resolve(n)}catch(t){return Promise.reject(new Error(`CreateTableData: ${t.message}`))}};const $e=async(t,r,e,n,i,s)=>{if(e.length!=r.length||e.length===0||r.length===0){return Promise.reject(new Error(`CreateRowStatement: Table ${i} `+`values row ${n} not correct length`))}try{const o=await Re(t,i,r[0],e[0]);let a;if(s==="full"||s==="partial"&&!o){const t=r.join();const e=await De(r.length);a=`INSERT INTO ${i} (${t}) VALUES (`;a+=`${e});`}else{let t=true;const s=t=>t===`sql_deleted`;const o=r.findIndex(s);if(o>=0){if(e[o]===1){t=false;a=`DELETE FROM ${i} WHERE `;if(typeof e[0]=="string"){a+=`${r[0]} = '${e[0]}';`}else{a+=`${r[0]} = ${e[0]};`}}}if(t){const t=await Ne(r);if(t.length===0){return Promise.reject(new Error(`CreateRowStatement: Table ${i} `+`values row ${n} not set to String`))}a=`UPDATE ${i} SET ${t} WHERE `;if(typeof e[0]=="string"){a+=`${r[0]} = '${e[0]}';`}else{a+=`${r[0]} = ${e[0]};`}}}return Promise.resolve(a)}catch(t){return Promise.reject(new Error(`CreateRowStatement: ${t.message}`))}};const je=async(t,r,e,n,i)=>{let s=true;if(r.substring(0,6)==="UPDATE"){try{let r=`SELECT * FROM ${n} WHERE `;if(typeof e[0]=="string"){r+=`${i[0]} = '${e[0]}';`}else{r+=`${i[0]} = ${e[0]};`}const s=await Xr(t,r,n);let o=[];if(s.length>0){o=s[0]}if(e.length>0&&o.length>0&&e.length===o.length){for(let t=0;t<e.length;t++){if(e[t]!==o[t]){return Promise.resolve(true)}}return Promise.resolve(false)}else{const t="Both arrays not the same length";return Promise.reject(new Error(`CheckUpdate: ${t}`))}}catch(t){return Promise.reject(new Error(`CheckUpdate: ${t.message}`))}}else{return Promise.resolve(s)}};const Re=async(t,r,e,n)=>{let i=false;let s=`SELECT ${e} FROM `+`${r} WHERE ${e} = `;if(typeof n==="number")s+=`${n};`;if(typeof n==="string")s+=`'${n}';`;try{const r=await fe(t,s,[]);if(r.length===1)i=true;return Promise.resolve(i)}catch(t){return Promise.reject(new Error(`IsIdExists: ${t.message}`))}};const De=async t=>{let r="";for(let e=0;e<t;e++){r+="?,"}if(r.length>1){r=r.slice(0,-1);return Promise.resolve(r)}else{return Promise.reject(new Error("CreateQuestionMarkString: length = 0"))}};const Ne=async t=>{let r="";for(const e of t){r+=`${e} = ? ,`}if(r.length>1){r=r.slice(0,-1);return Promise.resolve(r)}else{return Promise.reject(new Error("SetNameForUpdate: length = 0"))}};const Ie=async(t,r)=>{const e=`CREATE VIEW IF NOT EXISTS ${r.name} AS ${r.value};`;try{const n=await ae(t,e,true);if(n<0){return Promise.reject(new Error(`CreateView: ${r.name} failed`))}return Promise.resolve()}catch(t){return Promise.reject(new Error(`CreateView: ${t.message}`))}};const Me=async(t,r)=>{let e=false;let n="";let i=-1;let s=-1;try{i=await ee(t);await Yr(t,true)}catch(t){return Promise.reject(new Error(`createViews: ${t.message}`))}for(const i of r.views){if(i.value!=null){try{await Ie(t,i);e=true}catch(t){n=t.message;e=false;break}}}if(e){try{await re(t,true);s=await ee(t)-i;return Promise.resolve(s)}catch(t){return Promise.reject(new Error("createViews: "+`${t.message}`))}}else{if(n.length>0){try{await te(t,true);return Promise.reject(new Error(`createViews: ${n}`))}catch(t){return Promise.reject(new Error("createViews: "+`${t.message}: ${n}`))}}else{return Promise.resolve(0)}}};const xe=async(t,r,e)=>{const n={};let i=[];let s=[];let o="";try{s=await Ce(t);const a=await Ge(t);if(a.length===0){return Promise.reject(new Error("createExportObject: table's names failed"))}else{const u=await pe(t,"sync_table");if(!u&&r.mode==="partial"){return Promise.reject(new Error("No sync_table available"))}switch(r.mode){case"partial":{i=await Ue(t,a,e);break}case"full":{i=await Le(t,a,e);break}default:{o="createExportObject: expMode "+r.mode+" not defined";break}}if(o.length>0){return Promise.reject(new Error(o))}if(i.length>0){n.database=r.database;n.version=r.version;n.encrypted=r.encrypted;n.mode=r.mode;n.tables=i;if(s.length>0){n.views=s}}return Promise.resolve(n)}}catch(t){return Promise.reject(new Error("createExportObject: "+t.message))}};const Ce=async t=>{const r=[];let e="SELECT name,sql FROM sqlite_master WHERE ";e+="type='view' AND name NOT LIKE 'sqlite_%';";let n=[];try{n=await fe(t,e,[]);for(const t of n){const e={};e.name=t.name;e.value=t.sql.substring(t.sql.indexOf("AS ")+3);r.push(e)}return Promise.resolve(r)}catch(t){return Promise.reject(new Error(`getViewsName: ${t.message}`))}};const Le=async(t,r,e)=>{const n=[];let i="";try{for(const s of r){let r;let o;if(s.name){r=s.name}else{i="GetTablesFull: no name";break}if(s.sql){o=s.sql}else{i="GetTablesFull: no sql";break}const a={};const u=await Be(o);if(u.length===0){i="GetTablesFull: no Schema returned";break}await Qr(u);const f=await Fe(t,r);if(f.length>0){await Jr(f)}const c=await qe(t,r);if(c.length>0){await Vr(c)}let h=`Full: Table ${r} schema export completed ...`;e.emit({progress:h});const l=`SELECT * FROM ${r};`;const d=await Xr(t,l,r);a.name=r;if(u.length>0){a.schema=u}else{i=`GetTablesFull: must contain schema`;break}if(f.length>0){a.indexes=f}if(c.length>0){a.triggers=c}if(d.length>0){a.values=d}if(Object.keys(a).length<=1){i=`GetTablesFull: table ${r} is not a jsonTable`;break}h=`Full: Table ${r} table data export completed ...`;e.emit({progress:h});n.push(a)}if(i.length>0){return Promise.reject(new Error(i))}return Promise.resolve(n)}catch(t){return Promise.reject(new Error(`GetTablesFull: ${t.message}`))}};const Be=async t=>{const r=[];const e=t.indexOf("(");const n=t.lastIndexOf(")");let i=t.substring(e+1,n);try{i=await Ve(i);const t=i.split(",");for(let e=0;e<t.length;e++){let n=[];const i=t[e].replace(/\n/g,"").trim();n[0]=i.substring(0,i.indexOf(" "));n[1]=i.substring(i.indexOf(" ")+1);const s={};if(n[0].toUpperCase()==="FOREIGN"){const t=i.indexOf("(");const r=i.indexOf(")");const e=i.substring(t+1,r);const o=e.split("");n[0]=o.join(",");n[0]=n[0].replace(/, /g,",");n[1]=i.substring(r+2);s["foreignkey"]=n[0]}else if(n[0].toUpperCase()==="PRIMARY"){const t=i.indexOf("(");const r=i.indexOf(")");const e=i.substring(t+1,r);const o=e.split("");n[0]="CPK_"+o.join("_");n[0]=n[0].replace(/_ /g,"_");n[1]=i;s["constraint"]=n[0]}else if(n[0].toUpperCase()==="CONSTRAINT"){let t=[];const r=n[1].trim();t[0]=r.substring(0,r.indexOf(" "));t[1]=r.substring(r.indexOf(" ")+1);n[0]=t[0];s["constraint"]=n[0];n[1]=t[1]}else{s["column"]=n[0]}s["value"]=n[1].replace(//g,",");r.push(s)}return Promise.resolve(r)}catch(t){return Promise.reject(new Error(t.message))}};const Fe=async(t,r)=>{const e=[];let n="";try{let i="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";i+=`type = 'index' AND tbl_name = '${r}' `;i+=`AND sql NOTNULL;`;const s=await fe(t,i,[]);if(s.length>0){for(const t of s){const i=Object.keys(t);if(i.length===3){if(t["tbl_name"]===r){const r=t["sql"];const n=r.includes("UNIQUE")?"UNIQUE":"";const i=r.lastIndexOf("(");const s=r.lastIndexOf(")");const o={};o.name=t["name"];o.value=r.slice(i+1,s);if(n.length>0)o.mode=n;e.push(o)}else{n=`GetIndexes: Table ${r} doesn't match`;break}}else{n=`GetIndexes: Table ${r} creating indexes`;break}}if(n.length>0){return Promise.reject(new Error(n))}}return Promise.resolve(e)}catch(t){return Promise.reject(new Error(`GetIndexes: ${t.message}`))}};const qe=async(t,r)=>{const e=[];try{let n="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";n+=`type = 'trigger' AND tbl_name = '${r}' `;n+=`AND sql NOT NULL;`;const i=await fe(t,n,[]);if(i.length>0){for(const t of i){const n=Object.keys(t);if(n.length===3){if(t["tbl_name"]===r){const n=t["sql"];const i=t["name"];let s=n.split(i);if(s.length!=2){return Promise.reject(new Error(`GetTriggers: sql split name does not return 2 values`))}if(!s[1].includes(r)){return Promise.reject(new Error(`GetTriggers: sql split does not contains ${r}`))}const o=s[1].split(r,1)[0].trim();s=s[1].split(o+" "+r);if(s.length!=2){return Promise.reject(new Error(`GetTriggers: sql split tableName does not return 2 values`))}let a="";let u="";if(s[1].trim().substring(0,5).toUpperCase()!=="BEGIN"){s=s[1].trim().split("BEGIN");if(s.length!=2){return Promise.reject(new Error(`GetTriggers: sql split BEGIN does not return 2 values`))}a=s[0].trim();u="BEGIN"+s[1]}else{u=s[1].trim()}const f={};f.name=i;f.logic=u;if(a.length>0)f.condition=a;f.timeevent=o;e.push(f)}else{return Promise.reject(new Error(`GetTriggers: Table ${r} doesn't match`))}}else{return Promise.reject(new Error(`GetTriggers: Table ${r} creating indexes`))}}}return Promise.resolve(e)}catch(t){return Promise.reject(new Error(`GetTriggers: ${t.message}`))}};const Ue=async(t,r,e)=>{const n=[];let i={};let s=0;let o=[];let a="";try{const u=await We(t,r);if(Object.keys(u).includes("syncDate")){s=u.syncDate}if(Object.keys(u).includes("modTables")){i=u.modTables;o=Object.keys(i)}for(const u of r){let r="";let f="";if(u.name){r=u.name}else{a="GetTablesFull: no name";break}if(u.sql){f=u.sql}else{a="GetTablesFull: no sql";break}if(o.length==0||o.indexOf(r)===-1||i[r]=="No"){continue}const c={};let h=[];let l=[];let d=[];c.name=u;if(i[c.name]==="Create"){h=await Be(f);if(h.length>0){await Qr(h)}l=await Fe(t,r);if(l.length>0){await Jr(l)}d=await qe(t,r);if(d.length>0){await Vr(d)}}let v=`Partial: Table ${r} schema export completed ...`;e.emit({progress:v});let w="";if(i[r]==="Create"){w=`SELECT * FROM ${r};`}else{w=`SELECT * FROM ${r} `+`WHERE last_modified > ${s};`}const m=await Xr(t,w,r);c.name=r;if(h.length>0){c.schema=h}if(l.length>0){c.indexes=l}if(d.length>0){c.triggers=d}if(m.length>0){c.values=m}if(Object.keys(c).length<=1){a=`GetTablesPartial: table ${r} is not a jsonTable`;break}v=`Partial: Table ${r} table data export completed ...`;e.emit({progress:v});n.push(c)}if(a.length>0){return Promise.reject(new Error(a))}return Promise.resolve(n)}catch(t){return Promise.reject(new Error(`GetTablesPartial: ${t.message}`))}};const We=async(t,r)=>{const e={};try{const n=await He(t);if(n<=0){return Promise.reject(new Error(`GetPartialModeData: no syncDate`))}const i=await ze(t,r,n);if(i.length<=0){return Promise.reject(new Error(`GetPartialModeData: no modTables`))}e.syncDate=n;e.modTables=i;return Promise.resolve(e)}catch(t){return Promise.reject(new Error(`GetPartialModeData: ${t.message}`))}};const Ge=async t=>{let r="SELECT name,sql FROM sqlite_master WHERE ";r+="type='table' AND name NOT LIKE 'sync_table' ";r+="AND name NOT LIKE '_temp_%' ";r+="AND name NOT LIKE 'sqlite_%';";try{const e=await fe(t,r,[]);return Promise.resolve(e)}catch(t){return Promise.reject(new Error(`getTablesNamesSQL: ${t.message}`))}};const ze=async(t,r,e)=>{let n="";try{const i={};for(const s of r){let r;let o="SELECT count(*) AS tcount  ";o+=`FROM ${s.name};`;let a=await fe(t,o,[]);if(a.length!=1){n="GetTableModified: total "+"count not returned";break}const u=a[0]["tcount"];o="SELECT count(*) AS mcount FROM ";o+=`${s.name} WHERE last_modified > `;o+=`${e};`;a=await fe(t,o,[]);if(a.length!=1)break;const f=a[0]["mcount"];if(f===0){r="No"}else if(u===f){r="Create"}else{r="Modified"}const c=s.name;i[c]=r}if(n.length>0){return Promise.reject(new Error(n))}return Promise.resolve(i)}catch(t){return Promise.reject(new Error(`GetTableModified: ${t.message}`))}};const He=async t=>{try{const r=`SELECT sync_date FROM sync_table WHERE id = 1;`;const e=await fe(t,r,[]);return Promise.resolve(e[0]["sync_date"])}catch(t){const r=`GetSynchroDate: ${t.message}`;return Promise.reject(new Error(r))}};const Ze=async t=>{try{const r=`SELECT sync_date FROM sync_table WHERE id = 2;`;const e=await fe(t,r,[]);if(e.length===0){return Promise.resolve(-1)}else{return Promise.resolve(e[0]["sync_date"])}}catch(t){const r=`getLastExport: ${t.message}`;return Promise.reject(new Error(r))}};const Qe=async(t,r)=>{try{const e=await pe(t,"sync_table");if(!e){return Promise.reject(new Error("setLastExportDate: No sync_table available"))}const n=Math.round(new Date(r).getTime()/1e3);let i="";if(await Ze(t)>0){i=`UPDATE sync_table SET sync_date = ${n} WHERE id = 2;`}else{i=`INSERT INTO sync_table (sync_date) VALUES (${n});`}const s=await ae(t,i,false);if(s<0){return{result:false,message:"setLastExportDate failed"}}else{return{result:true}}}catch(t){return{result:false,message:`setLastExportDate failed: ${t.message}`}}};const Je=async t=>{let r;try{const e=await pe(t,"sync_table");if(!e){return Promise.reject(new Error("DelExportedRows: No sync_table available"))}r=await Ze(t);if(r<0){return Promise.reject(new Error("DelExportedRows: no last exported date available"))}const n=await be(t);if(n.length===0){return Promise.reject(new Error("DelExportedRows: No table's names returned"))}for(const e of n){let n=-1;const i=`DELETE FROM ${e}\n            WHERE sql_deleted = 1 AND last_modified < ${r};`;n=await ce(t,i,[],true);if(n<0){return Promise.reject(new Error("DelExportedRows: lastId < 0"))}}}catch(t){return Promise.reject(new Error(`DelExportedRows failed: ${t.message}`))}};const Ve=async t=>{const r=Ke(t,"(");const e=Ke(t,")");if(r.length!=e.length){return Promise.reject("ModEmbeddedParentheses: Not same number of '(' & ')'")}if(r.length===0){return Promise.resolve(t)}let n=t.substring(0,r[0]-1);for(let i=0;i<r.length;i++){let s;if(i<r.length-1){if(r[i+1]<e[i]){s=t.substring(r[i]-1,e[i+1]);i++}else{s=t.substring(r[i]-1,e[i])}}else{s=t.substring(r[i]-1,e[i])}const o=s.replace(/,/g,"");n+=o;if(i<r.length-1){n+=t.substring(e[i],r[i+1]-1)}}n+=t.substring(e[e.length-1],t.length);return Promise.resolve(n)};const Ke=(t,r)=>{let e=[...t];r=r.toLowerCase();return e.reduce(((t,e,n)=>e.toLowerCase()===r?[...t,n]:t),[])};const Xe=async(t,r,e,n)=>{let i=-1;const s=new Int32Array(Object.keys(r).map((t=>parseInt(t)))).sort();for(const o of s){if(o>e&&o<=n){const e=r[o].statements;if(e.length===0){return Promise.reject("onUpgrade: statements not given")}try{await ie(t,false);const r=await ee(t);await Ye(t,e);await oe(t,o);await ie(t,true);i=await ee(t)-r}catch(t){return Promise.reject(new Error(`onUpgrade: ${t.message}`))}}}return Promise.resolve(i)};const Ye=async(t,r)=>{try{await Yr(t,true);for(const e of r){await ae(t,e,false)}await re(t,true);return Promise.resolve()}catch(r){await te(t,true);return Promise.reject(`ExecuteStatementProcess: ${r}`)}};class tn{constructor(t,r,e,n,i,s){this.vUpgDict={};this.autoSave=false;this.wasmPath="/assets";this.isBackup=false;this.dbName=t;this.store=n;this.version=r;this.mDb=null;this.vUpgDict=e;this._isDBOpen=false;this.autoSave=i;this.wasmPath=s}async open(){const t={locateFile:t=>`${this.wasmPath}/${t}`};return new Promise(((r,e)=>{try{$r(t).then((async t=>{const n=await jr(this.dbName,this.store);if(n!=null){this.mDb=new t.Database(n)}else{this.mDb=new t.Database;await Rr(this.dbName,this.store)}this._isDBOpen=true;let i=await se(this.mDb);if(this.version>i&&Object.keys(this.vUpgDict).length>0){try{const t=await Mr(this.dbName,this.store);if(t){await Cr(this.dbName,`backup-${this.dbName}`,this.store);this.isBackup=true}const r=await Xe(this.mDb,this.vUpgDict,i,this.version);if(r===-1){try{if(this.isBackup){await xr(this.dbName,"backup",this.store)}}catch(t){return e(new Error(`Open: ${t.message}`))}}if(this.isBackup){await Ir(`backup-${this.dbName}`,this.store)}}catch(t){try{if(this.isBackup){await xr(this.dbName,"backup",this.store)}}catch(t){return e(new Error(`Open: ${t.message}`))}}}if(this.autoSave){try{await this.saveToStore()}catch(t){this._isDBOpen=false;return e(`Open: ${t}`)}}await ie(this.mDb,true);return r()}))}catch(t){this._isDBOpen=false;return e(`in open ${t}`)}}))}isDBOpen(){return this._isDBOpen}async close(){if(this.mDb!=null&&this._isDBOpen){try{await this.saveToStore(false);this.mDb.close();this._isDBOpen=false}catch(t){this._isDBOpen=false;return Promise.reject(`in close ${t}`)}}return Promise.resolve()}async saveToStore(t=true){if(this.mDb!=null&&this._isDBOpen){try{await Dr(this.mDb,this.dbName,this.store);if(t){await ie(this.mDb,true)}}catch(t){return Promise.reject(`in saveToStore ${t}`)}}return Promise.resolve()}async exportDB(){try{const t=this.mDb.export();return t}catch(t){const r=t.message?t.message:t;return Promise.reject(`exportDB: ${r}`)}}async getVersion(){if(this.mDb!=null&&this._isDBOpen){try{const t=await se(this.mDb);return Promise.resolve(t)}catch(t){this._isDBOpen=false;return Promise.reject(`in getVersion ${t}`)}}}async isDBExists(t){try{const r=await Mr(t,this.store);return Promise.resolve(r)}catch(t){return Promise.reject(`in isDBExists ${t}`)}}async deleteDB(t){try{const r=await this.isDBExists(t);if(r&&!this._isDBOpen){await this.open()}await this.close();if(r){await Ir(t,this.store)}return Promise.resolve()}catch(t){return Promise.reject(new Error(`DeleteDB: ${t.message}`))}}async executeSQL(t,r=true){if(!this._isDBOpen){let t=`ExecuteSQL: Database ${this.dbName} `;t+=`not opened`;return Promise.reject(new Error(t))}try{if(r)await Yr(this.mDb,this._isDBOpen)}catch(t){let r=`executeSQL: ${t.message}`;return Promise.reject(new Error(`${r}`))}try{const e=await ae(this.mDb,t,false);if(e<0){return Promise.reject(new Error("ExecuteSQL: changes < 0"))}if(r)await re(this.mDb,this._isDBOpen);if(this.autoSave){try{await this.saveToStore()}catch(t){this._isDBOpen=false;return Promise.reject(`ExecuteSQL: ${t}`)}}return Promise.resolve(e)}catch(t){let e=`ExecuteSQL: ${t.message}`;try{if(r)await te(this.mDb,this._isDBOpen)}catch(t){e+=` : ${t.message}`}return Promise.reject(new Error(`ExecuteSQL: ${e}`))}}async execSet(t,r=true){if(!this._isDBOpen){let t=`ExecSet: Database ${this.dbName} `;t+=`not opened`;return Promise.reject(new Error(t))}const e={changes:-1,lastId:-1};let n=-1;try{n=await ee(this.mDb);if(r)await Yr(this.mDb,this._isDBOpen)}catch(t){let r=`ExecSet: ${t.message}`;return Promise.reject(new Error(`${r}`))}try{const i=await ue(this.mDb,t,false);if(i<0){return Promise.reject(new Error("ExecSet: changes < 0"))}if(r)await re(this.mDb,this._isDBOpen);const s=await ee(this.mDb)-n;e.changes=s;e.lastId=i;if(this.autoSave){try{await this.saveToStore()}catch(t){this._isDBOpen=false;return Promise.reject(`ExecSet: ${t}`)}}return Promise.resolve(e)}catch(t){let e=`ExecSet: ${t.message}`;try{if(r)await te(this.mDb,this._isDBOpen)}catch(t){e+=` : ${t.message}`}return Promise.reject(new Error(`ExecSet: ${e}`))}}async selectSQL(t,r){if(!this._isDBOpen){let t=`SelectSQL: Database ${this.dbName} `;t+=`not opened`;return Promise.reject(new Error(t))}try{let e=await fe(this.mDb,t,r);return Promise.resolve(e)}catch(t){return Promise.reject(new Error(`SelectSQL: ${t.message}`))}}async runSQL(t,r,e=true){let n=-1;if(!this._isDBOpen){let t=`RunSQL: Database ${this.dbName} `;t+=`not opened`;return Promise.reject(new Error(t))}const i={changes:-1,lastId:-1};let s=-1;try{s=await ee(this.mDb);if(e)await Yr(this.mDb,this._isDBOpen)}catch(t){let r=`RunSQL: ${t.message}`;return Promise.reject(new Error(`${r}`))}try{n=await ce(this.mDb,t,r,false);if(n<0){return Promise.reject(new Error("RunSQL: lastId < 0"))}if(e)await re(this.mDb,this._isDBOpen);const o=await ee(this.mDb)-s;i.changes=o;i.lastId=n;if(this.autoSave){try{await this.saveToStore()}catch(t){this._isDBOpen=false;return Promise.reject(`RunSQL: ${t}`)}}return Promise.resolve(i)}catch(t){let r=`RunSQL: ${t.message}`;try{if(e)await te(this.mDb,this._isDBOpen)}catch(t){r+=` : ${t.message}`}return Promise.reject(new Error(`${r}`))}}async getTableNames(){if(!this._isDBOpen){let t=`GetTableNames: Database ${this.dbName} `;t+=`not opened`;return Promise.reject(new Error(t))}try{let t=await be(this.mDb);return Promise.resolve(t)}catch(t){return Promise.reject(new Error(`GetTableNames: ${t.message}`))}}async isTable(t){if(!this._isDBOpen){let t=`isTable: Database ${this.dbName} `;t+=`not opened`;return Promise.reject(new Error(t))}try{const r=await pe(this.mDb,t);return Promise.resolve(r)}catch(t){const r=`IsTable: ${t.message}`;return Promise.reject(new Error(r))}}async createSyncTable(){if(!this._isDBOpen){let t=`createSyncTable: Database ${this.dbName} `;t+=`not opened`;return Promise.reject(new Error(t))}let t=-1;try{const r=await pe(this.mDb,"sync_table");if(!r){const r=await Ee(this.mDb,this._isDBOpen);const e=await ge(this.mDb,this._isDBOpen);if(r&&e){const r=Math.round((new Date).getTime()/1e3);let e=`\n                          CREATE TABLE IF NOT EXISTS sync_table (\n                              id INTEGER PRIMARY KEY NOT NULL,\n                              sync_date INTEGER\n                              );`;e+=`INSERT INTO sync_table (sync_date) VALUES (\n                              "${r}");`;t=await ae(this.mDb,e,false);return Promise.resolve(t)}else{return Promise.reject(new Error("No last_modified/sql_deleted columns in tables"))}}else{return Promise.resolve(0)}}catch(t){const r=`CreateSyncTable: ${t.message}`;return Promise.reject(new Error(r))}}async getSyncDate(){if(!this._isDBOpen){let t=`getSyncDate: Database ${this.dbName} `;t+=`not opened`;return Promise.reject(new Error(t))}try{const t=await pe(this.mDb,"sync_table");if(!t){return Promise.reject(new Error("No sync_table available"))}const r=await He(this.mDb);return Promise.resolve(r)}catch(t){const r=`getSyncDate: ${t.message}`;return Promise.reject(new Error(r))}}async setSyncDate(t){if(!this._isDBOpen){let t=`SetSyncDate: Database ${this.dbName} `;t+=`not opened`;return{result:false,message:t}}try{const r=await pe(this.mDb,"sync_table");if(!r){return Promise.reject(new Error("No sync_table available"))}const e=Math.round(new Date(t).getTime()/1e3);let n=`UPDATE sync_table SET sync_date = `;n+=`${e} WHERE id = 1;`;const i=await ae(this.mDb,n,false);if(i<0){return{result:false,message:"setSyncDate failed"}}else{return{result:true}}}catch(t){return{result:false,message:`setSyncDate failed: ${t.message}`}}}async importJson(t,r){let e=0;if(this._isDBOpen){try{await ie(this.mDb,false);if(t.tables&&t.tables.length>0){e=await _e(this.mDb,t);let n=`Schema creation completed changes: ${e}`;r.emit({progress:n});if(e!=-1){e+=await Oe(this.mDb,t,r);let n=`Tables data creation completed changes: ${e}`;r.emit({progress:n})}}if(t.views&&t.views.length>0){e+=await Me(this.mDb,t)}await ie(this.mDb,true);await this.saveToStore();return Promise.resolve(e)}catch(t){return Promise.reject(new Error(`ImportJson: ${t.message}`))}}else{return Promise.reject(new Error(`ImportJson: database is closed`))}}async exportJson(t,r){const e={};e.database=this.dbName.slice(0,-9);e.version=this.version;e.encrypted=false;e.mode=t;if(this._isDBOpen){try{const t=await pe(this.mDb,"sync_table");if(t){await Qe(this.mDb,(new Date).toISOString())}const n=await xe(this.mDb,e,r);const i=Object.keys(n);if(i.length===0){const t=`ExportJson: return Object is empty `+`No data to synchronize`;return Promise.reject(new Error(t))}const s=Ur(n);if(s){return Promise.resolve(n)}else{return Promise.reject(new Error(`ExportJson: retJson not valid`))}}catch(t){return Promise.reject(new Error(`ExportJson: ${t.message}`))}}else{return Promise.reject(new Error(`ExportJson: database is closed`))}}async deleteExportedRows(){if(this._isDBOpen){try{await Je(this.mDb);return Promise.resolve()}catch(t){return Promise.reject(new Error(`deleteExportedRows: ${t.message}`))}}else{return Promise.reject(new Error(`deleteExportedRows: database is closed`))}}}var rn=sr((function(t,r){
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
(function(r){{t.exports=r()}})((function(){return function t(r,e,n){function i(o,a){if(!e[o]){if(!r[o]){var u=typeof ar=="function"&&ar;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var c=e[o]={exports:{}};r[o][0].call(c.exports,(function(t){var e=r[o][1][t];return i(e?e:t)}),c,c.exports,t,r,e,n)}return e[o].exports}var s=typeof ar=="function"&&ar;for(var o=0;o<n.length;o++)i(n[o]);return i}({1:[function(t,r,e){(function(t){var e=t.MutationObserver||t.WebKitMutationObserver;var n;{if(e){var i=0;var s=new e(c);var o=t.document.createTextNode("");s.observe(o,{characterData:true});n=function(){o.data=i=++i%2}}else if(!t.setImmediate&&typeof t.MessageChannel!=="undefined"){var a=new t.MessageChannel;a.port1.onmessage=c;n=function(){a.port2.postMessage(0)}}else if("document"in t&&"onreadystatechange"in t.document.createElement("script")){n=function(){var r=t.document.createElement("script");r.onreadystatechange=function(){c();r.onreadystatechange=null;r.parentNode.removeChild(r);r=null};t.document.documentElement.appendChild(r)}}else{n=function(){setTimeout(c,0)}}}var u;var f=[];function c(){u=true;var t,r;var e=f.length;while(e){r=f;f=[];t=-1;while(++t<e){r[t]()}e=f.length}u=false}r.exports=h;function h(t){if(f.push(t)===1&&!u){n()}}}).call(this,typeof ir!=="undefined"?ir:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],2:[function(t,r,e){var n=t(1);function i(){}var s={};var o=["REJECTED"];var a=["FULFILLED"];var u=["PENDING"];r.exports=f;function f(t){if(typeof t!=="function"){throw new TypeError("resolver must be a function")}this.state=u;this.queue=[];this.outcome=void 0;if(t!==i){d(this,t)}}f.prototype["catch"]=function(t){return this.then(null,t)};f.prototype.then=function(t,r){if(typeof t!=="function"&&this.state===a||typeof r!=="function"&&this.state===o){return this}var e=new this.constructor(i);if(this.state!==u){var n=this.state===a?t:r;h(e,n,this.outcome)}else{this.queue.push(new c(e,t,r))}return e};function c(t,r,e){this.promise=t;if(typeof r==="function"){this.onFulfilled=r;this.callFulfilled=this.otherCallFulfilled}if(typeof e==="function"){this.onRejected=e;this.callRejected=this.otherCallRejected}}c.prototype.callFulfilled=function(t){s.resolve(this.promise,t)};c.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)};c.prototype.callRejected=function(t){s.reject(this.promise,t)};c.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)};function h(t,r,e){n((function(){var n;try{n=r(e)}catch(r){return s.reject(t,r)}if(n===t){s.reject(t,new TypeError("Cannot resolve promise with itself"))}else{s.resolve(t,n)}}))}s.resolve=function(t,r){var e=v(l,r);if(e.status==="error"){return s.reject(t,e.value)}var n=e.value;if(n){d(t,n)}else{t.state=a;t.outcome=r;var i=-1;var o=t.queue.length;while(++i<o){t.queue[i].callFulfilled(r)}}return t};s.reject=function(t,r){t.state=o;t.outcome=r;var e=-1;var n=t.queue.length;while(++e<n){t.queue[e].callRejected(r)}return t};function l(t){var r=t&&t.then;if(t&&(typeof t==="object"||typeof t==="function")&&typeof r==="function"){return function e(){r.apply(t,arguments)}}}function d(t,r){var e=false;function n(r){if(e){return}e=true;s.reject(t,r)}function i(r){if(e){return}e=true;s.resolve(t,r)}function o(){r(i,n)}var a=v(o);if(a.status==="error"){n(a.value)}}function v(t,r){var e={};try{e.value=t(r);e.status="success"}catch(t){e.status="error";e.value=t}return e}f.resolve=w;function w(t){if(t instanceof this){return t}return s.resolve(new this(i),t)}f.reject=m;function m(t){var r=new this(i);return s.reject(r,t)}f.all=y;function y(t){var r=this;if(Object.prototype.toString.call(t)!=="[object Array]"){return this.reject(new TypeError("must be an array"))}var e=t.length;var n=false;if(!e){return this.resolve([])}var o=new Array(e);var a=0;var u=-1;var f=new this(i);while(++u<e){c(t[u],u)}return f;function c(t,i){r.resolve(t).then(u,(function(t){if(!n){n=true;s.reject(f,t)}}));function u(t){o[i]=t;if(++a===e&&!n){n=true;s.resolve(f,o)}}}}f.race=b;function b(t){var r=this;if(Object.prototype.toString.call(t)!=="[object Array]"){return this.reject(new TypeError("must be an array"))}var e=t.length;var n=false;if(!e){return this.resolve([])}var o=-1;var a=new this(i);while(++o<e){u(t[o])}return a;function u(t){r.resolve(t).then((function(t){if(!n){n=true;s.resolve(a,t)}}),(function(t){if(!n){n=true;s.reject(a,t)}}))}}},{1:1}],3:[function(t,r,e){(function(r){if(typeof r.Promise!=="function"){r.Promise=t(2)}}).call(this,typeof ir!=="undefined"?ir:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{2:2}],4:[function(t,r,e){var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t,r){if(!(t instanceof r)){throw new TypeError("Cannot call a class as a function")}}function s(){try{if(typeof indexedDB!=="undefined"){return indexedDB}if(typeof webkitIndexedDB!=="undefined"){return webkitIndexedDB}if(typeof mozIndexedDB!=="undefined"){return mozIndexedDB}if(typeof OIndexedDB!=="undefined"){return OIndexedDB}if(typeof msIndexedDB!=="undefined"){return msIndexedDB}}catch(t){return}}var o=s();function a(){try{if(!o||!o.open){return false}var t=typeof openDatabase!=="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform);var r=typeof fetch==="function"&&fetch.toString().indexOf("[native code")!==-1;return(!t||r)&&typeof indexedDB!=="undefined"&&typeof IDBKeyRange!=="undefined"}catch(t){return false}}function u(t,r){t=t||[];r=r||{};try{return new Blob(t,r)}catch(s){if(s.name!=="TypeError"){throw s}var e=typeof BlobBuilder!=="undefined"?BlobBuilder:typeof MSBlobBuilder!=="undefined"?MSBlobBuilder:typeof MozBlobBuilder!=="undefined"?MozBlobBuilder:WebKitBlobBuilder;var n=new e;for(var i=0;i<t.length;i+=1){n.append(t[i])}return n.getBlob(r.type)}}if(typeof Promise==="undefined"){t(3)}var f=Promise;function c(t,r){if(r){t.then((function(t){r(null,t)}),(function(t){r(t)}))}}function h(t,r,e){if(typeof r==="function"){t.then(r)}if(typeof e==="function"){t["catch"](e)}}function l(t){if(typeof t!=="string"){console.warn(t+" used as a key, but it is not a string.");t=String(t)}return t}function d(){if(arguments.length&&typeof arguments[arguments.length-1]==="function"){return arguments[arguments.length-1]}}var v="local-forage-detect-blob-support";var w=void 0;var m={};var y=Object.prototype.toString;var b="readonly";var p="readwrite";function E(t){var r=t.length;var e=new ArrayBuffer(r);var n=new Uint8Array(e);for(var i=0;i<r;i++){n[i]=t.charCodeAt(i)}return e}function g(t){return new f((function(r){var e=t.transaction(v,p);var n=u([""]);e.objectStore(v).put(n,"key");e.onabort=function(t){t.preventDefault();t.stopPropagation();r(false)};e.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/);var e=navigator.userAgent.match(/Edge\//);r(e||!t||parseInt(t[1],10)>=43)}}))["catch"]((function(){return false}))}function P(t){if(typeof w==="boolean"){return f.resolve(w)}return g(t).then((function(t){w=t;return w}))}function S(t){var r=m[t.name];var e={};e.promise=new f((function(t,r){e.resolve=t;e.reject=r}));r.deferredOperations.push(e);if(!r.dbReady){r.dbReady=e.promise}else{r.dbReady=r.dbReady.then((function(){return e.promise}))}}function _(t){var r=m[t.name];var e=r.deferredOperations.pop();if(e){e.resolve();return e.promise}}function k(t,r){var e=m[t.name];var n=e.deferredOperations.pop();if(n){n.reject(r);return n.promise}}function T(t,r){return new f((function(e,n){m[t.name]=m[t.name]||x();if(t.db){if(r){S(t);t.db.close()}else{return e(t.db)}}var i=[t.name];if(r){i.push(t.version)}var s=o.open.apply(o,i);if(r){s.onupgradeneeded=function(r){var e=s.result;try{e.createObjectStore(t.storeName);if(r.oldVersion<=1){e.createObjectStore(v)}}catch(e){if(e.name==="ConstraintError"){console.warn('The database "'+t.name+'"'+" has been upgraded from version "+r.oldVersion+" to version "+r.newVersion+', but the storage "'+t.storeName+'" already exists.')}else{throw e}}}}s.onerror=function(t){t.preventDefault();n(s.error)};s.onsuccess=function(){var r=s.result;r.onversionchange=function(t){t.target.close()};e(r);_(t)}}))}function O(t){return T(t,false)}function A(t){return T(t,true)}function $(t,r){if(!t.db){return true}var e=!t.db.objectStoreNames.contains(t.storeName);var n=t.version<t.db.version;var i=t.version>t.db.version;if(n){if(t.version!==r){console.warn('The database "'+t.name+'"'+" can't be downgraded from version "+t.db.version+" to version "+t.version+".")}t.version=t.db.version}if(i||e){if(e){var s=t.db.version+1;if(s>t.version){t.version=s}}return true}return false}function j(t){return new f((function(r,e){var n=new FileReader;n.onerror=e;n.onloadend=function(e){var n=btoa(e.target.result||"");r({__local_forage_encoded_blob:true,data:n,type:t.type})};n.readAsBinaryString(t)}))}function R(t){var r=E(atob(t.data));return u([r],{type:t.type})}function D(t){return t&&t.__local_forage_encoded_blob}function N(t){var r=this;var e=r._initReady().then((function(){var t=m[r._dbInfo.name];if(t&&t.dbReady){return t.dbReady}}));h(e,t,t);return e}function I(t){S(t);var r=m[t.name];var e=r.forages;for(var n=0;n<e.length;n++){var i=e[n];if(i._dbInfo.db){i._dbInfo.db.close();i._dbInfo.db=null}}t.db=null;return O(t).then((function(r){t.db=r;if($(t)){return A(t)}return r})).then((function(n){t.db=r.db=n;for(var i=0;i<e.length;i++){e[i]._dbInfo.db=n}}))["catch"]((function(r){k(t,r);throw r}))}function M(t,r,e,n){if(n===undefined){n=1}try{var i=t.db.transaction(t.storeName,r);e(null,i)}catch(i){if(n>0&&(!t.db||i.name==="InvalidStateError"||i.name==="NotFoundError")){return f.resolve().then((function(){if(!t.db||i.name==="NotFoundError"&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version){if(t.db){t.version=t.db.version+1}return A(t)}})).then((function(){return I(t).then((function(){M(t,r,e,n-1)}))}))["catch"](e)}e(i)}}function x(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function C(t){var r=this;var e={db:null};if(t){for(var n in t){e[n]=t[n]}}var i=m[e.name];if(!i){i=x();m[e.name]=i}i.forages.push(r);if(!r._initReady){r._initReady=r.ready;r.ready=N}var s=[];function o(){return f.resolve()}for(var a=0;a<i.forages.length;a++){var u=i.forages[a];if(u!==r){s.push(u._initReady()["catch"](o))}}var c=i.forages.slice(0);return f.all(s).then((function(){e.db=i.db;return O(e)})).then((function(t){e.db=t;if($(e,r._defaultConfig.version)){return A(e)}return t})).then((function(t){e.db=i.db=t;r._dbInfo=e;for(var n=0;n<c.length;n++){var s=c[n];if(s!==r){s._dbInfo.db=e.db;s._dbInfo.version=e.version}}}))}function L(t,r){var e=this;t=l(t);var n=new f((function(r,n){e.ready().then((function(){M(e._dbInfo,b,(function(i,s){if(i){return n(i)}try{var o=s.objectStore(e._dbInfo.storeName);var a=o.get(t);a.onsuccess=function(){var t=a.result;if(t===undefined){t=null}if(D(t)){t=R(t)}r(t)};a.onerror=function(){n(a.error)}}catch(t){n(t)}}))}))["catch"](n)}));c(n,r);return n}function B(t,r){var e=this;var n=new f((function(r,n){e.ready().then((function(){M(e._dbInfo,b,(function(i,s){if(i){return n(i)}try{var o=s.objectStore(e._dbInfo.storeName);var a=o.openCursor();var u=1;a.onsuccess=function(){var e=a.result;if(e){var n=e.value;if(D(n)){n=R(n)}var i=t(n,e.key,u++);if(i!==void 0){r(i)}else{e["continue"]()}}else{r()}};a.onerror=function(){n(a.error)}}catch(t){n(t)}}))}))["catch"](n)}));c(n,r);return n}function F(t,r,e){var n=this;t=l(t);var i=new f((function(e,i){var s;n.ready().then((function(){s=n._dbInfo;if(y.call(r)==="[object Blob]"){return P(s.db).then((function(t){if(t){return r}return j(r)}))}return r})).then((function(r){M(n._dbInfo,p,(function(s,o){if(s){return i(s)}try{var a=o.objectStore(n._dbInfo.storeName);if(r===null){r=undefined}var u=a.put(r,t);o.oncomplete=function(){if(r===undefined){r=null}e(r)};o.onabort=o.onerror=function(){var t=u.error?u.error:u.transaction.error;i(t)}}catch(t){i(t)}}))}))["catch"](i)}));c(i,e);return i}function q(t,r){var e=this;t=l(t);var n=new f((function(r,n){e.ready().then((function(){M(e._dbInfo,p,(function(i,s){if(i){return n(i)}try{var o=s.objectStore(e._dbInfo.storeName);var a=o["delete"](t);s.oncomplete=function(){r()};s.onerror=function(){n(a.error)};s.onabort=function(){var t=a.error?a.error:a.transaction.error;n(t)}}catch(t){n(t)}}))}))["catch"](n)}));c(n,r);return n}function U(t){var r=this;var e=new f((function(t,e){r.ready().then((function(){M(r._dbInfo,p,(function(n,i){if(n){return e(n)}try{var s=i.objectStore(r._dbInfo.storeName);var o=s.clear();i.oncomplete=function(){t()};i.onabort=i.onerror=function(){var t=o.error?o.error:o.transaction.error;e(t)}}catch(t){e(t)}}))}))["catch"](e)}));c(e,t);return e}function W(t){var r=this;var e=new f((function(t,e){r.ready().then((function(){M(r._dbInfo,b,(function(n,i){if(n){return e(n)}try{var s=i.objectStore(r._dbInfo.storeName);var o=s.count();o.onsuccess=function(){t(o.result)};o.onerror=function(){e(o.error)}}catch(t){e(t)}}))}))["catch"](e)}));c(e,t);return e}function G(t,r){var e=this;var n=new f((function(r,n){if(t<0){r(null);return}e.ready().then((function(){M(e._dbInfo,b,(function(i,s){if(i){return n(i)}try{var o=s.objectStore(e._dbInfo.storeName);var a=false;var u=o.openKeyCursor();u.onsuccess=function(){var e=u.result;if(!e){r(null);return}if(t===0){r(e.key)}else{if(!a){a=true;e.advance(t)}else{r(e.key)}}};u.onerror=function(){n(u.error)}}catch(t){n(t)}}))}))["catch"](n)}));c(n,r);return n}function z(t){var r=this;var e=new f((function(t,e){r.ready().then((function(){M(r._dbInfo,b,(function(n,i){if(n){return e(n)}try{var s=i.objectStore(r._dbInfo.storeName);var o=s.openKeyCursor();var a=[];o.onsuccess=function(){var r=o.result;if(!r){t(a);return}a.push(r.key);r["continue"]()};o.onerror=function(){e(o.error)}}catch(t){e(t)}}))}))["catch"](e)}));c(e,t);return e}function H(t,r){r=d.apply(this,arguments);var e=this.config();t=typeof t!=="function"&&t||{};if(!t.name){t.name=t.name||e.name;t.storeName=t.storeName||e.storeName}var n=this;var i;if(!t.name){i=f.reject("Invalid arguments")}else{var s=t.name===e.name&&n._dbInfo.db;var a=s?f.resolve(n._dbInfo.db):O(t).then((function(r){var e=m[t.name];var n=e.forages;e.db=r;for(var i=0;i<n.length;i++){n[i]._dbInfo.db=r}return r}));if(!t.storeName){i=a.then((function(r){S(t);var e=m[t.name];var n=e.forages;r.close();for(var i=0;i<n.length;i++){var s=n[i];s._dbInfo.db=null}var a=new f((function(r,e){var n=o.deleteDatabase(t.name);n.onerror=function(){var t=n.result;if(t){t.close()}e(n.error)};n.onblocked=function(){console.warn('dropInstance blocked for database "'+t.name+'" until all open connections are closed')};n.onsuccess=function(){var t=n.result;if(t){t.close()}r(t)}}));return a.then((function(t){e.db=t;for(var r=0;r<n.length;r++){var i=n[r];_(i._dbInfo)}}))["catch"]((function(r){(k(t,r)||f.resolve())["catch"]((function(){}));throw r}))}))}else{i=a.then((function(r){if(!r.objectStoreNames.contains(t.storeName)){return}var e=r.version+1;S(t);var n=m[t.name];var i=n.forages;r.close();for(var s=0;s<i.length;s++){var a=i[s];a._dbInfo.db=null;a._dbInfo.version=e}var u=new f((function(r,n){var i=o.open(t.name,e);i.onerror=function(t){var r=i.result;r.close();n(t)};i.onupgradeneeded=function(){var r=i.result;r.deleteObjectStore(t.storeName)};i.onsuccess=function(){var t=i.result;t.close();r(t)}}));return u.then((function(t){n.db=t;for(var r=0;r<i.length;r++){var e=i[r];e._dbInfo.db=t;_(e._dbInfo)}}))["catch"]((function(r){(k(t,r)||f.resolve())["catch"]((function(){}));throw r}))}))}}c(i,r);return i}var Z={_driver:"asyncStorage",_initStorage:C,_support:a(),iterate:B,getItem:L,setItem:F,removeItem:q,clear:U,length:W,key:G,keys:z,dropInstance:H};function Q(){return typeof openDatabase==="function"}var J="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var V="~~local_forage_type~";var K=/^~~local_forage_type~([^~]+)~/;var X="__lfsc__:";var Y=X.length;var tt="arbf";var rt="blob";var et="si08";var nt="ui08";var it="uic8";var st="si16";var ot="si32";var at="ur16";var ut="ui32";var ft="fl32";var ct="fl64";var ht=Y+tt.length;var lt=Object.prototype.toString;function dt(t){var r=t.length*.75;var e=t.length;var n;var i=0;var s,o,a,u;if(t[t.length-1]==="="){r--;if(t[t.length-2]==="="){r--}}var f=new ArrayBuffer(r);var c=new Uint8Array(f);for(n=0;n<e;n+=4){s=J.indexOf(t[n]);o=J.indexOf(t[n+1]);a=J.indexOf(t[n+2]);u=J.indexOf(t[n+3]);c[i++]=s<<2|o>>4;c[i++]=(o&15)<<4|a>>2;c[i++]=(a&3)<<6|u&63}return f}function vt(t){var r=new Uint8Array(t);var e="";var n;for(n=0;n<r.length;n+=3){e+=J[r[n]>>2];e+=J[(r[n]&3)<<4|r[n+1]>>4];e+=J[(r[n+1]&15)<<2|r[n+2]>>6];e+=J[r[n+2]&63]}if(r.length%3===2){e=e.substring(0,e.length-1)+"="}else if(r.length%3===1){e=e.substring(0,e.length-2)+"=="}return e}function wt(t,r){var e="";if(t){e=lt.call(t)}if(t&&(e==="[object ArrayBuffer]"||t.buffer&&lt.call(t.buffer)==="[object ArrayBuffer]")){var n;var i=X;if(t instanceof ArrayBuffer){n=t;i+=tt}else{n=t.buffer;if(e==="[object Int8Array]"){i+=et}else if(e==="[object Uint8Array]"){i+=nt}else if(e==="[object Uint8ClampedArray]"){i+=it}else if(e==="[object Int16Array]"){i+=st}else if(e==="[object Uint16Array]"){i+=at}else if(e==="[object Int32Array]"){i+=ot}else if(e==="[object Uint32Array]"){i+=ut}else if(e==="[object Float32Array]"){i+=ft}else if(e==="[object Float64Array]"){i+=ct}else{r(new Error("Failed to get type for BinaryArray"))}}r(i+vt(n))}else if(e==="[object Blob]"){var s=new FileReader;s.onload=function(){var e=V+t.type+"~"+vt(this.result);r(X+rt+e)};s.readAsArrayBuffer(t)}else{try{r(JSON.stringify(t))}catch(e){console.error("Couldn't convert value into a JSON string: ",t);r(null,e)}}}function mt(t){if(t.substring(0,Y)!==X){return JSON.parse(t)}var r=t.substring(ht);var e=t.substring(Y,ht);var n;if(e===rt&&K.test(r)){var i=r.match(K);n=i[1];r=r.substring(i[0].length)}var s=dt(r);switch(e){case tt:return s;case rt:return u([s],{type:n});case et:return new Int8Array(s);case nt:return new Uint8Array(s);case it:return new Uint8ClampedArray(s);case st:return new Int16Array(s);case at:return new Uint16Array(s);case ot:return new Int32Array(s);case ut:return new Uint32Array(s);case ft:return new Float32Array(s);case ct:return new Float64Array(s);default:throw new Error("Unkown type: "+e)}}var yt={serialize:wt,deserialize:mt,stringToBuffer:dt,bufferToString:vt};function bt(t,r,e,n){t.executeSql("CREATE TABLE IF NOT EXISTS "+r.storeName+" "+"(id INTEGER PRIMARY KEY, key unique, value)",[],e,n)}function pt(t){var r=this;var e={db:null};if(t){for(var n in t){e[n]=typeof t[n]!=="string"?t[n].toString():t[n]}}var i=new f((function(t,n){try{e.db=openDatabase(e.name,String(e.version),e.description,e.size)}catch(t){return n(t)}e.db.transaction((function(i){bt(i,e,(function(){r._dbInfo=e;t()}),(function(t,r){n(r)}))}),n)}));e.serializer=yt;return i}function Et(t,r,e,n,i,s){t.executeSql(e,n,i,(function(t,o){if(o.code===o.SYNTAX_ERR){t.executeSql("SELECT name FROM sqlite_master "+"WHERE type='table' AND name = ?",[r.storeName],(function(t,a){if(!a.rows.length){bt(t,r,(function(){t.executeSql(e,n,i,s)}),s)}else{s(t,o)}}),s)}else{s(t,o)}}),s)}function gt(t,r){var e=this;t=l(t);var n=new f((function(r,n){e.ready().then((function(){var i=e._dbInfo;i.db.transaction((function(e){Et(e,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[t],(function(t,e){var n=e.rows.length?e.rows.item(0).value:null;if(n){n=i.serializer.deserialize(n)}r(n)}),(function(t,r){n(r)}))}))}))["catch"](n)}));c(n,r);return n}function Pt(t,r){var e=this;var n=new f((function(r,n){e.ready().then((function(){var i=e._dbInfo;i.db.transaction((function(e){Et(e,i,"SELECT * FROM "+i.storeName,[],(function(e,n){var s=n.rows;var o=s.length;for(var a=0;a<o;a++){var u=s.item(a);var f=u.value;if(f){f=i.serializer.deserialize(f)}f=t(f,u.key,a+1);if(f!==void 0){r(f);return}}r()}),(function(t,r){n(r)}))}))}))["catch"](n)}));c(n,r);return n}function St(t,r,e,n){var i=this;t=l(t);var s=new f((function(s,o){i.ready().then((function(){if(r===undefined){r=null}var a=r;var u=i._dbInfo;u.serializer.serialize(r,(function(r,f){if(f){o(f)}else{u.db.transaction((function(e){Et(e,u,"INSERT OR REPLACE INTO "+u.storeName+" "+"(key, value) VALUES (?, ?)",[t,r],(function(){s(a)}),(function(t,r){o(r)}))}),(function(r){if(r.code===r.QUOTA_ERR){if(n>0){s(St.apply(i,[t,a,e,n-1]));return}o(r)}}))}}))}))["catch"](o)}));c(s,e);return s}function _t(t,r,e){return St.apply(this,[t,r,e,1])}function kt(t,r){var e=this;t=l(t);var n=new f((function(r,n){e.ready().then((function(){var i=e._dbInfo;i.db.transaction((function(e){Et(e,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[t],(function(){r()}),(function(t,r){n(r)}))}))}))["catch"](n)}));c(n,r);return n}function Tt(t){var r=this;var e=new f((function(t,e){r.ready().then((function(){var n=r._dbInfo;n.db.transaction((function(r){Et(r,n,"DELETE FROM "+n.storeName,[],(function(){t()}),(function(t,r){e(r)}))}))}))["catch"](e)}));c(e,t);return e}function Ot(t){var r=this;var e=new f((function(t,e){r.ready().then((function(){var n=r._dbInfo;n.db.transaction((function(r){Et(r,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],(function(r,e){var n=e.rows.item(0).c;t(n)}),(function(t,r){e(r)}))}))}))["catch"](e)}));c(e,t);return e}function At(t,r){var e=this;var n=new f((function(r,n){e.ready().then((function(){var i=e._dbInfo;i.db.transaction((function(e){Et(e,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[t+1],(function(t,e){var n=e.rows.length?e.rows.item(0).key:null;r(n)}),(function(t,r){n(r)}))}))}))["catch"](n)}));c(n,r);return n}function $t(t){var r=this;var e=new f((function(t,e){r.ready().then((function(){var n=r._dbInfo;n.db.transaction((function(r){Et(r,n,"SELECT key FROM "+n.storeName,[],(function(r,e){var n=[];for(var i=0;i<e.rows.length;i++){n.push(e.rows.item(i).key)}t(n)}),(function(t,r){e(r)}))}))}))["catch"](e)}));c(e,t);return e}function jt(t){return new f((function(r,e){t.transaction((function(n){n.executeSql("SELECT name FROM sqlite_master "+"WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(e,n){var i=[];for(var s=0;s<n.rows.length;s++){i.push(n.rows.item(s).name)}r({db:t,storeNames:i})}),(function(t,r){e(r)}))}),(function(t){e(t)}))}))}function Rt(t,r){r=d.apply(this,arguments);var e=this.config();t=typeof t!=="function"&&t||{};if(!t.name){t.name=t.name||e.name;t.storeName=t.storeName||e.storeName}var n=this;var i;if(!t.name){i=f.reject("Invalid arguments")}else{i=new f((function(r){var i;if(t.name===e.name){i=n._dbInfo.db}else{i=openDatabase(t.name,"","",0)}if(!t.storeName){r(jt(i))}else{r({db:i,storeNames:[t.storeName]})}})).then((function(t){return new f((function(r,e){t.db.transaction((function(n){function i(t){return new f((function(r,e){n.executeSql("DROP TABLE IF EXISTS "+t,[],(function(){r()}),(function(t,r){e(r)}))}))}var s=[];for(var o=0,a=t.storeNames.length;o<a;o++){s.push(i(t.storeNames[o]))}f.all(s).then((function(){r()}))["catch"]((function(t){e(t)}))}),(function(t){e(t)}))}))}))}c(i,r);return i}var Dt={_driver:"webSQLStorage",_initStorage:pt,_support:Q(),iterate:Pt,getItem:gt,setItem:_t,removeItem:kt,clear:Tt,length:Ot,key:At,keys:$t,dropInstance:Rt};function Nt(){try{return typeof localStorage!=="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return false}}function It(t,r){var e=t.name+"/";if(t.storeName!==r.storeName){e+=t.storeName+"/"}return e}function Mt(){var t="_localforage_support_test";try{localStorage.setItem(t,true);localStorage.removeItem(t);return false}catch(t){return true}}function xt(){return!Mt()||localStorage.length>0}function Ct(t){var r=this;var e={};if(t){for(var n in t){e[n]=t[n]}}e.keyPrefix=It(t,r._defaultConfig);if(!xt()){return f.reject()}r._dbInfo=e;e.serializer=yt;return f.resolve()}function Lt(t){var r=this;var e=r.ready().then((function(){var t=r._dbInfo.keyPrefix;for(var e=localStorage.length-1;e>=0;e--){var n=localStorage.key(e);if(n.indexOf(t)===0){localStorage.removeItem(n)}}}));c(e,t);return e}function Bt(t,r){var e=this;t=l(t);var n=e.ready().then((function(){var r=e._dbInfo;var n=localStorage.getItem(r.keyPrefix+t);if(n){n=r.serializer.deserialize(n)}return n}));c(n,r);return n}function Ft(t,r){var e=this;var n=e.ready().then((function(){var r=e._dbInfo;var n=r.keyPrefix;var i=n.length;var s=localStorage.length;var o=1;for(var a=0;a<s;a++){var u=localStorage.key(a);if(u.indexOf(n)!==0){continue}var f=localStorage.getItem(u);if(f){f=r.serializer.deserialize(f)}f=t(f,u.substring(i),o++);if(f!==void 0){return f}}}));c(n,r);return n}function qt(t,r){var e=this;var n=e.ready().then((function(){var r=e._dbInfo;var n;try{n=localStorage.key(t)}catch(t){n=null}if(n){n=n.substring(r.keyPrefix.length)}return n}));c(n,r);return n}function Ut(t){var r=this;var e=r.ready().then((function(){var t=r._dbInfo;var e=localStorage.length;var n=[];for(var i=0;i<e;i++){var s=localStorage.key(i);if(s.indexOf(t.keyPrefix)===0){n.push(s.substring(t.keyPrefix.length))}}return n}));c(e,t);return e}function Wt(t){var r=this;var e=r.keys().then((function(t){return t.length}));c(e,t);return e}function Gt(t,r){var e=this;t=l(t);var n=e.ready().then((function(){var r=e._dbInfo;localStorage.removeItem(r.keyPrefix+t)}));c(n,r);return n}function zt(t,r,e){var n=this;t=l(t);var i=n.ready().then((function(){if(r===undefined){r=null}var e=r;return new f((function(i,s){var o=n._dbInfo;o.serializer.serialize(r,(function(r,n){if(n){s(n)}else{try{localStorage.setItem(o.keyPrefix+t,r);i(e)}catch(t){if(t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED"){s(t)}s(t)}}}))}))}));c(i,e);return i}function Ht(t,r){r=d.apply(this,arguments);t=typeof t!=="function"&&t||{};if(!t.name){var e=this.config();t.name=t.name||e.name;t.storeName=t.storeName||e.storeName}var n=this;var i;if(!t.name){i=f.reject("Invalid arguments")}else{i=new f((function(r){if(!t.storeName){r(t.name+"/")}else{r(It(t,n._defaultConfig))}})).then((function(t){for(var r=localStorage.length-1;r>=0;r--){var e=localStorage.key(r);if(e.indexOf(t)===0){localStorage.removeItem(e)}}}))}c(i,r);return i}var Zt={_driver:"localStorageWrapper",_initStorage:Ct,_support:Nt(),iterate:Ft,getItem:Bt,setItem:zt,removeItem:Gt,clear:Lt,length:Wt,key:qt,keys:Ut,dropInstance:Ht};var Qt=function t(r,e){return r===e||typeof r==="number"&&typeof e==="number"&&isNaN(r)&&isNaN(e)};var Jt=function t(r,e){var n=r.length;var i=0;while(i<n){if(Qt(r[i],e)){return true}i++}return false};var Vt=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};var Kt={};var Xt={};var Yt={INDEXEDDB:Z,WEBSQL:Dt,LOCALSTORAGE:Zt};var tr=[Yt.INDEXEDDB._driver,Yt.WEBSQL._driver,Yt.LOCALSTORAGE._driver];var rr=["dropInstance"];var er=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(rr);var nr={description:"",driver:tr.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ir(t,r){t[r]=function(){var e=arguments;return t.ready().then((function(){return t[r].apply(t,e)}))}}function sr(){for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r){for(var e in r){if(r.hasOwnProperty(e)){if(Vt(r[e])){arguments[0][e]=r[e].slice()}else{arguments[0][e]=r[e]}}}}}return arguments[0]}var or=function(){function t(r){i(this,t);for(var e in Yt){if(Yt.hasOwnProperty(e)){var n=Yt[e];var s=n._driver;this[e]=s;if(!Kt[s]){this.defineDriver(n)}}}this._defaultConfig=sr({},nr);this._config=sr({},this._defaultConfig,r);this._driverSet=null;this._initDriver=null;this._ready=false;this._dbInfo=null;this._wrapLibraryMethodsWithReady();this.setDriver(this._config.driver)["catch"]((function(){}))}t.prototype.config=function t(r){if((typeof r==="undefined"?"undefined":n(r))==="object"){if(this._ready){return new Error("Can't call config() after localforage "+"has been used.")}for(var e in r){if(e==="storeName"){r[e]=r[e].replace(/\W/g,"_")}if(e==="version"&&typeof r[e]!=="number"){return new Error("Database version must be a number.")}this._config[e]=r[e]}if("driver"in r&&r.driver){return this.setDriver(this._config.driver)}return true}else if(typeof r==="string"){return this._config[r]}else{return this._config}};t.prototype.defineDriver=function t(r,e,n){var i=new f((function(t,e){try{var n=r._driver;var i=new Error("Custom driver not compliant; see "+"https://mozilla.github.io/localForage/#definedriver");if(!r._driver){e(i);return}var s=er.concat("_initStorage");for(var o=0,a=s.length;o<a;o++){var u=s[o];var h=!Jt(rr,u);if((h||r[u])&&typeof r[u]!=="function"){e(i);return}}var l=function t(){var e=function t(r){return function(){var t=new Error("Method "+r+" is not implemented by the current driver");var e=f.reject(t);c(e,arguments[arguments.length-1]);return e}};for(var n=0,i=rr.length;n<i;n++){var s=rr[n];if(!r[s]){r[s]=e(s)}}};l();var d=function e(i){if(Kt[n]){console.info("Redefining LocalForage driver: "+n)}Kt[n]=r;Xt[n]=i;t()};if("_support"in r){if(r._support&&typeof r._support==="function"){r._support().then(d,e)}else{d(!!r._support)}}else{d(true)}}catch(t){e(t)}}));h(i,e,n);return i};t.prototype.driver=function t(){return this._driver||null};t.prototype.getDriver=function t(r,e,n){var i=Kt[r]?f.resolve(Kt[r]):f.reject(new Error("Driver not found."));h(i,e,n);return i};t.prototype.getSerializer=function t(r){var e=f.resolve(yt);h(e,r);return e};t.prototype.ready=function t(r){var e=this;var n=e._driverSet.then((function(){if(e._ready===null){e._ready=e._initDriver()}return e._ready}));h(n,r,r);return n};t.prototype.setDriver=function t(r,e,n){var i=this;if(!Vt(r)){r=[r]}var s=this._getSupportedDrivers(r);function o(){i._config.driver=i.driver()}function a(t){i._extend(t);o();i._ready=i._initStorage(i._config);return i._ready}function u(t){return function(){var r=0;function e(){while(r<t.length){var n=t[r];r++;i._dbInfo=null;i._ready=null;return i.getDriver(n).then(a)["catch"](e)}o();var s=new Error("No available storage method found.");i._driverSet=f.reject(s);return i._driverSet}return e()}}var c=this._driverSet!==null?this._driverSet["catch"]((function(){return f.resolve()})):f.resolve();this._driverSet=c.then((function(){var t=s[0];i._dbInfo=null;i._ready=null;return i.getDriver(t).then((function(t){i._driver=t._driver;o();i._wrapLibraryMethodsWithReady();i._initDriver=u(s)}))}))["catch"]((function(){o();var t=new Error("No available storage method found.");i._driverSet=f.reject(t);return i._driverSet}));h(this._driverSet,e,n);return this._driverSet};t.prototype.supports=function t(r){return!!Xt[r]};t.prototype._extend=function t(r){sr(this,r)};t.prototype._getSupportedDrivers=function t(r){var e=[];for(var n=0,i=r.length;n<i;n++){var s=r[n];if(this.supports(s)){e.push(s)}}return e};t.prototype._wrapLibraryMethodsWithReady=function t(){for(var r=0,e=er.length;r<e;r++){ir(this,er[r])}};t.prototype.createInstance=function r(e){return new t(e)};return t}();var ar=new or;r.exports=ar},{3:3}]},{},[4])(4)}))}));var en=sr((function(t,r){
/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/
!function(r){t.exports=r()}((function(){return function t(r,e,n){function i(o,a){if(!e[o]){if(!r[o]){var u="function"==typeof ar&&ar;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var c=e[o]={exports:{}};r[o][0].call(c.exports,(function(t){var e=r[o][1][t];return i(e||t)}),c,c.exports,t,r,e,n)}return e[o].exports}for(var s="function"==typeof ar&&ar,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(t,r,e){var n=t("./utils"),i=t("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.encode=function(t){for(var r,e,i,o,a,u,f,c=[],h=0,l=t.length,d=l,v="string"!==n.getTypeOf(t);h<t.length;)d=l-h,i=v?(r=t[h++],e=h<l?t[h++]:0,h<l?t[h++]:0):(r=t.charCodeAt(h++),e=h<l?t.charCodeAt(h++):0,h<l?t.charCodeAt(h++):0),o=r>>2,a=(3&r)<<4|e>>4,u=1<d?(15&e)<<2|i>>6:64,f=2<d?63&i:64,c.push(s.charAt(o)+s.charAt(a)+s.charAt(u)+s.charAt(f));return c.join("")},e.decode=function(t){var r,e,n,o,a,u,f=0,c=0,h="data:";if(t.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var l,d=3*(t=t.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(t.charAt(t.length-1)===s.charAt(64)&&d--,t.charAt(t.length-2)===s.charAt(64)&&d--,d%1!=0)throw new Error("Invalid base64 input, bad content length.");for(l=i.uint8array?new Uint8Array(0|d):new Array(0|d);f<t.length;)r=s.indexOf(t.charAt(f++))<<2|(o=s.indexOf(t.charAt(f++)))>>4,e=(15&o)<<4|(a=s.indexOf(t.charAt(f++)))>>2,n=(3&a)<<6|(u=s.indexOf(t.charAt(f++))),l[c++]=r,64!==a&&(l[c++]=e),64!==u&&(l[c++]=n);return l}},{"./support":30,"./utils":32}],2:[function(t,r,e){var n=t("./external"),i=t("./stream/DataWorker"),s=t("./stream/Crc32Probe"),o=t("./stream/DataLengthProbe");function a(t,r,e,n,i){this.compressedSize=t,this.uncompressedSize=r,this.crc32=e,this.compression=n,this.compressedContent=i}a.prototype={getContentWorker:function(){var t=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),r=this;return t.on("end",(function(){if(this.streamInfo.data_length!==r.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(t,r,e){return t.pipe(new s).pipe(new o("uncompressedSize")).pipe(r.compressWorker(e)).pipe(new o("compressedSize")).withStreamInfo("compression",r)},r.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,e){var n=t("./stream/GenericWorker");e.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},e.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,e){var n=t("./utils");var i=function(){for(var t,r=[],e=0;e<256;e++){t=e;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;r[e]=t}return r}();r.exports=function(t,r){return void 0!==t&&t.length?"string"!==n.getTypeOf(t)?function(t,r,e,n){var s=i,o=n+e;t^=-1;for(var a=n;a<o;a++)t=t>>>8^s[255&(t^r[a])];return-1^t}(0|r,t,t.length,0):function(t,r,e,n){var s=i,o=n+e;t^=-1;for(var a=n;a<o;a++)t=t>>>8^s[255&(t^r.charCodeAt(a))];return-1^t}(0|r,t,t.length,0):0}},{"./utils":32}],5:[function(t,r,e){e.base64=!1,e.binary=!1,e.dir=!1,e.createFolders=!0,e.date=null,e.compression=null,e.compressionOptions=null,e.comment=null,e.unixPermissions=null,e.dosPermissions=null},{}],6:[function(t,r,e){var n=null;n="undefined"!=typeof Promise?Promise:t("lie"),r.exports={Promise:n}},{lie:37}],7:[function(t,r,e){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=t("pako"),s=t("./utils"),o=t("./stream/GenericWorker"),a=n?"uint8array":"array";function u(t,r){o.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=r,this.meta={}}e.magic="\b\0",s.inherits(u,o),u.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(a,t.data),!1)},u.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(r){t.push({data:r,meta:t.meta})}},e.compressWorker=function(t){return new u("Deflate",t)},e.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,e){function n(t,r){var e,n="";for(e=0;e<r;e++)n+=String.fromCharCode(255&t),t>>>=8;return n}function i(t,r,e,i,o,c){var h,l,d=t.file,v=t.compression,w=c!==a.utf8encode,m=s.transformTo("string",c(d.name)),y=s.transformTo("string",a.utf8encode(d.name)),b=d.comment,p=s.transformTo("string",c(b)),E=s.transformTo("string",a.utf8encode(b)),g=y.length!==d.name.length,P=E.length!==b.length,S="",_="",k="",T=d.dir,O=d.date,A={crc32:0,compressedSize:0,uncompressedSize:0};r&&!e||(A.crc32=t.crc32,A.compressedSize=t.compressedSize,A.uncompressedSize=t.uncompressedSize);var $=0;r&&($|=8),w||!g&&!P||($|=2048);var j=0,R=0;T&&(j|=16),"UNIX"===o?(R=798,j|=function(t,r){var e=t;return t||(e=r?16893:33204),(65535&e)<<16}(d.unixPermissions,T)):(R=20,j|=function(t){return 63&(t||0)}(d.dosPermissions)),h=O.getUTCHours(),h<<=6,h|=O.getUTCMinutes(),h<<=5,h|=O.getUTCSeconds()/2,l=O.getUTCFullYear()-1980,l<<=4,l|=O.getUTCMonth()+1,l<<=5,l|=O.getUTCDate(),g&&(_=n(1,1)+n(u(m),4)+y,S+="up"+n(_.length,2)+_),P&&(k=n(1,1)+n(u(p),4)+E,S+="uc"+n(k.length,2)+k);var D="";return D+="\n\0",D+=n($,2),D+=v.magic,D+=n(h,2),D+=n(l,2),D+=n(A.crc32,4),D+=n(A.compressedSize,4),D+=n(A.uncompressedSize,4),D+=n(m.length,2),D+=n(S.length,2),{fileRecord:f.LOCAL_FILE_HEADER+D+m+S,dirRecord:f.CENTRAL_FILE_HEADER+n(R,2)+D+n(p.length,2)+"\0\0\0\0"+n(j,4)+n(i,4)+m+S+p}}var s=t("../utils"),o=t("../stream/GenericWorker"),a=t("../utf8"),u=t("../crc32"),f=t("../signature");function c(t,r,e,n){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=r,this.zipPlatform=e,this.encodeFileName=n,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(c,o),c.prototype.push=function(t){var r=t.meta.percent||0,e=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,o.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:e?(r+100*(e-n-1))/e:100}}))},c.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var r=this.streamFiles&&!t.file.dir;if(r){var e=i(t,r,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:e.fileRecord,meta:{percent:0}})}else this.accumulate=!0},c.prototype.closedSource=function(t){this.accumulate=!1;var r=this.streamFiles&&!t.file.dir,e=i(t,r,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(e.dirRecord),r)this.push({data:function(t){return f.DATA_DESCRIPTOR+n(t.crc32,4)+n(t.compressedSize,4)+n(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:e.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},c.prototype.flush=function(){for(var t=this.bytesWritten,r=0;r<this.dirRecords.length;r++)this.push({data:this.dirRecords[r],meta:{percent:100}});var e=this.bytesWritten-t,i=function(t,r,e,i,o){var a=s.transformTo("string",o(i));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(t,2)+n(t,2)+n(r,4)+n(e,4)+n(a.length,2)+a}(this.dirRecords.length,e,t,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},c.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},c.prototype.registerPrevious=function(t){this._sources.push(t);var r=this;return t.on("data",(function(t){r.processChunk(t)})),t.on("end",(function(){r.closedSource(r.previous.streamInfo),r._sources.length?r.prepareNextSource():r.end()})),t.on("error",(function(t){r.error(t)})),this},c.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},c.prototype.error=function(t){var r=this._sources;if(!o.prototype.error.call(this,t))return!1;for(var e=0;e<r.length;e++)try{r[e].error(t)}catch(t){}return!0},c.prototype.lock=function(){o.prototype.lock.call(this);for(var t=this._sources,r=0;r<t.length;r++)t[r].lock()},r.exports=c},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,e){var n=t("../compressions"),i=t("./ZipFileWorker");e.generateWorker=function(t,r,e){var s=new i(r.streamFiles,e,r.platform,r.encodeFileName),o=0;try{t.forEach((function(t,e){o++;var i=function(t,r){var e=t||r,i=n[e];if(!i)throw new Error(e+" is not a valid compression method !");return i}(e.options.compression,r.compression),a=e.options.compressionOptions||r.compressionOptions||{},u=e.dir,f=e.date;e._compressWorker(i,a).withStreamInfo("file",{name:t,dir:u,date:f,comment:e.comment||"",unixPermissions:e.unixPermissions,dosPermissions:e.dosPermissions}).pipe(s)})),s.entriesCount=o}catch(t){s.error(t)}return s}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,e){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new n;for(var r in this)"function"!=typeof this[r]&&(t[r]=this[r]);return t}}(n.prototype=t("./object")).loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.10.1",n.loadAsync=function(t,r){return(new n).loadAsync(t,r)},n.external=t("./external"),r.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,e){var n=t("./utils"),i=t("./external"),s=t("./utf8"),o=t("./zipEntries"),a=t("./stream/Crc32Probe"),u=t("./nodejsUtils");function f(t){return new i.Promise((function(r,e){var n=t.decompressed.getContentWorker().pipe(new a);n.on("error",(function(t){e(t)})).on("end",(function(){n.streamInfo.crc32!==t.decompressed.crc32?e(new Error("Corrupted zip : CRC32 mismatch")):r()})).resume()}))}r.exports=function(t,r){var e=this;return r=n.extend(r||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),u.isNode&&u.isStream(t)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",t,!0,r.optimizedBinaryString,r.base64).then((function(t){var e=new o(r);return e.load(t),e})).then((function(t){var e=[i.Promise.resolve(t)],n=t.files;if(r.checkCRC32)for(var s=0;s<n.length;s++)e.push(f(n[s]));return i.Promise.all(e)})).then((function(t){for(var i=t.shift(),s=i.files,o=0;o<s.length;o++){var a=s[o],u=a.fileNameStr,f=n.resolve(a.fileNameStr);e.file(f,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:r.createFolders}),a.dir||(e.file(f).unsafeOriginalName=u)}return i.zipComment.length&&(e.comment=i.zipComment),e}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,e){var n=t("../utils"),i=t("../stream/GenericWorker");function s(t,r){i.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(r)}n.inherits(s,i),s.prototype._bindStream=function(t){var r=this;(this._stream=t).pause(),t.on("data",(function(t){r.push({data:t,meta:{percent:0}})})).on("error",(function(t){r.isPaused?this.generatedError=t:r.error(t)})).on("end",(function(){r.isPaused?r._upstreamEnded=!0:r.end()}))},s.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,e){var n=t("readable-stream").Readable;function i(t,r,e){n.call(this,r),this._helper=t;var i=this;t.on("data",(function(t,r){i.push(t)||i._helper.pause(),e&&e(r)})).on("error",(function(t){i.emit("error",t)})).on("end",(function(){i.push(null)}))}t("../utils").inherits(i,n),i.prototype._read=function(){this._helper.resume()},r.exports=i},{"../utils":32,"readable-stream":16}],14:[function(t,r,e){r.exports={isNode:"undefined"!=typeof ut,newBufferFrom:function(t,r){if(ut.from&&ut.from!==Uint8Array.from)return ut.from(t,r);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new ut(t,r)},allocBuffer:function(t){if(ut.alloc)return ut.alloc(t);var r=new ut(t);return r.fill(0),r},isBuffer:function(t){return ut.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}},{}],15:[function(t,r,e){function n(t,r,e){var n,i=s.getTypeOf(r),a=s.extend(e||{},u);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(t=w(t)),a.createFolders&&(n=v(t))&&m.call(this,n,!0);var h="string"===i&&!1===a.binary&&!1===a.base64;e&&void 0!==e.binary||(a.binary=!h),(r instanceof f&&0===r.uncompressedSize||a.dir||!r||0===r.length)&&(a.base64=!1,a.binary=!0,r="",a.compression="STORE",i="string");var y=null;y=r instanceof f||r instanceof o?r:l.isNode&&l.isStream(r)?new d(t,r):s.prepareContent(t,r,a.binary,a.optimizedBinaryString,a.base64);var b=new c(t,y,a);this.files[t]=b}var i=t("./utf8"),s=t("./utils"),o=t("./stream/GenericWorker"),a=t("./stream/StreamHelper"),u=t("./defaults"),f=t("./compressedObject"),c=t("./zipObject"),h=t("./generate"),l=t("./nodejsUtils"),d=t("./nodejs/NodejsStreamInputAdapter"),v=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var r=t.lastIndexOf("/");return 0<r?t.substring(0,r):""},w=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},m=function(t,r){return r=void 0!==r?r:u.createFolders,t=w(t),this.files[t]||n.call(this,t,null,{dir:!0,createFolders:r}),this.files[t]};function y(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var r,e,n;for(r in this.files)n=this.files[r],(e=r.slice(this.root.length,r.length))&&r.slice(0,this.root.length)===this.root&&t(e,n)},filter:function(t){var r=[];return this.forEach((function(e,n){t(e,n)&&r.push(n)})),r},file:function(t,r,e){if(1!==arguments.length)return t=this.root+t,n.call(this,t,r,e),this;if(y(t)){var i=t;return this.filter((function(t,r){return!r.dir&&i.test(t)}))}var s=this.files[this.root+t];return s&&!s.dir?s:null},folder:function(t){if(!t)return this;if(y(t))return this.filter((function(r,e){return e.dir&&t.test(r)}));var r=this.root+t,e=m.call(this,r),n=this.clone();return n.root=e.name,n},remove:function(t){t=this.root+t;var r=this.files[t];if(r||("/"!==t.slice(-1)&&(t+="/"),r=this.files[t]),r&&!r.dir)delete this.files[t];else for(var e=this.filter((function(r,e){return e.name.slice(0,t.length)===t})),n=0;n<e.length;n++)delete this.files[e[n].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var r,e={};try{if((e=s.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=e.type.toLowerCase(),e.compression=e.compression.toUpperCase(),"binarystring"===e.type&&(e.type="string"),!e.type)throw new Error("No output type specified.");s.checkSupport(e.type),"darwin"!==e.platform&&"freebsd"!==e.platform&&"linux"!==e.platform&&"sunos"!==e.platform||(e.platform="UNIX"),"win32"===e.platform&&(e.platform="DOS");var n=e.comment||this.comment||"";r=h.generateWorker(this,e,n)}catch(t){(r=new o("error")).error(t)}return new a(r,e.type||"string",e.mimeType)},generateAsync:function(t,r){return this.generateInternalStream(t).accumulate(r)},generateNodeStream:function(t,r){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(r)}};r.exports=b},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,e){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,e){var n=t("./DataReader");function i(t){n.call(this,t);for(var r=0;r<this.data.length;r++)t[r]=255&t[r]}t("../utils").inherits(i,n),i.prototype.byteAt=function(t){return this.data[this.zero+t]},i.prototype.lastIndexOfSignature=function(t){for(var r=t.charCodeAt(0),e=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===r&&this.data[s+1]===e&&this.data[s+2]===n&&this.data[s+3]===i)return s-this.zero;return-1},i.prototype.readAndCheckSignature=function(t){var r=t.charCodeAt(0),e=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),s=this.readData(4);return r===s[0]&&e===s[1]&&n===s[2]&&i===s[3]},i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var r=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,r},r.exports=i},{"../utils":32,"./DataReader":18}],18:[function(t,r,e){var n=t("../utils");function i(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(){},readInt:function(t){var r,e=0;for(this.checkOffset(t),r=this.index+t-1;r>=this.index;r--)e=(e<<8)+this.byteAt(r);return this.index+=t,e},readString:function(t){return n.transformTo("string",this.readData(t))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},r.exports=i},{"../utils":32}],19:[function(t,r,e){var n=t("./Uint8ArrayReader");function i(t){n.call(this,t)}t("../utils").inherits(i,n),i.prototype.readData=function(t){this.checkOffset(t);var r=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,r},r.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,e){var n=t("./DataReader");function i(t){n.call(this,t)}t("../utils").inherits(i,n),i.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},i.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},i.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},i.prototype.readData=function(t){this.checkOffset(t);var r=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,r},r.exports=i},{"../utils":32,"./DataReader":18}],21:[function(t,r,e){var n=t("./ArrayReader");function i(t){n.call(this,t)}t("../utils").inherits(i,n),i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var r=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,r},r.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,e){var n=t("../utils"),i=t("../support"),s=t("./ArrayReader"),o=t("./StringReader"),a=t("./NodeBufferReader"),u=t("./Uint8ArrayReader");r.exports=function(t){var r=n.getTypeOf(t);return n.checkSupport(r),"string"!==r||i.uint8array?"nodebuffer"===r?new a(t):i.uint8array?new u(n.transformTo("uint8array",t)):new s(n.transformTo("array",t)):new o(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,e){e.LOCAL_FILE_HEADER="PK",e.CENTRAL_FILE_HEADER="PK",e.CENTRAL_DIRECTORY_END="PK",e.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",e.ZIP64_CENTRAL_DIRECTORY_END="PK",e.DATA_DESCRIPTOR="PK\b"},{}],24:[function(t,r,e){var n=t("./GenericWorker"),i=t("../utils");function s(t){n.call(this,"ConvertWorker to "+t),this.destType=t}i.inherits(s,n),s.prototype.processChunk=function(t){this.push({data:i.transformTo(this.destType,t.data),meta:t.meta})},r.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,e){var n=t("./GenericWorker"),i=t("../crc32");function s(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(s,n),s.prototype.processChunk=function(t){this.streamInfo.crc32=i(t.data,this.streamInfo.crc32||0),this.push(t)},r.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,e){var n=t("../utils"),i=t("./GenericWorker");function s(t){i.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}n.inherits(s,i),s.prototype.processChunk=function(t){if(t){var r=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=r+t.data.length}i.prototype.processChunk.call(this,t)},r.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,e){var n=t("../utils"),i=t("./GenericWorker");function s(t){i.call(this,"DataWorker");var r=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){r.dataIsReady=!0,r.data=t,r.max=t&&t.length||0,r.type=n.getTypeOf(t),r.isPaused||r._tickAndRepeat()}),(function(t){r.error(t)}))}n.inherits(s,i),s.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,r=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,r);break;case"uint8array":t=this.data.subarray(this.index,r);break;case"array":case"nodebuffer":t=this.data.slice(this.index,r)}return this.index=r,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,e){function n(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,r){return this._listeners[t].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,r){if(this._listeners[t])for(var e=0;e<this._listeners[t].length;e++)this._listeners[t][e].call(this,r)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var r=this;return t.on("data",(function(t){r.processChunk(t)})),t.on("end",(function(){r.end()})),t.on("error",(function(t){r.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,r){return this.extraStreamInfo[t]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},r.exports=n},{}],29:[function(t,r,e){var n=t("../utils"),i=t("./ConvertWorker"),s=t("./GenericWorker"),o=t("../base64"),a=t("../support"),u=t("../external"),f=null;if(a.nodestream)try{f=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function c(t,r){return new u.Promise((function(e,i){var s=[],a=t._internalType,u=t._outputType,f=t._mimeType;t.on("data",(function(t,e){s.push(t),r&&r(e)})).on("error",(function(t){s=[],i(t)})).on("end",(function(){try{var t=function(t,r,e){switch(t){case"blob":return n.newBlob(n.transformTo("arraybuffer",r),e);case"base64":return o.encode(r);default:return n.transformTo(t,r)}}(u,function(t,r){var e,n=0,i=null,s=0;for(e=0;e<r.length;e++)s+=r[e].length;switch(t){case"string":return r.join("");case"array":return Array.prototype.concat.apply([],r);case"uint8array":for(i=new Uint8Array(s),e=0;e<r.length;e++)i.set(r[e],n),n+=r[e].length;return i;case"nodebuffer":return ut.concat(r);default:throw new Error("concat : unsupported type '"+t+"'")}}(a,s),f);e(t)}catch(t){i(t)}s=[]})).resume()}))}function h(t,r,e){var o=r;switch(r){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=r,this._mimeType=e,n.checkSupport(o),this._worker=t.pipe(new i(o)),t.lock()}catch(t){this._worker=new s("error"),this._worker.error(t)}}h.prototype={accumulate:function(t){return c(this,t)},on:function(t,r){var e=this;return"data"===t?this._worker.on(t,(function(t){r.call(e,t.data,t.meta)})):this._worker.on(t,(function(){n.delay(r,arguments,e)})),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:"nodebuffer"!==this._outputType},t)}},r.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,e){if(e.base64=!0,e.array=!0,e.string=!0,e.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,e.nodebuffer="undefined"!=typeof ut,e.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)e.blob=!1;else{var n=new ArrayBuffer(0);try{e.blob=0===new Blob([n],{type:"application/zip"}).size}catch(t){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(n),e.blob=0===i.getBlob("application/zip").size}catch(t){e.blob=!1}}}try{e.nodestream=!!t("readable-stream").Readable}catch(t){e.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,e){for(var n=t("./utils"),i=t("./support"),s=t("./nodejsUtils"),o=t("./stream/GenericWorker"),a=new Array(256),u=0;u<256;u++)a[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;a[254]=a[254]=1;function f(){o.call(this,"utf-8 decode"),this.leftOver=null}function c(){o.call(this,"utf-8 encode")}e.utf8encode=function(t){return i.nodebuffer?s.newBufferFrom(t,"utf-8"):function(t){var r,e,n,s,o,a=t.length,u=0;for(s=0;s<a;s++)55296==(64512&(e=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(n=t.charCodeAt(s+1)))&&(e=65536+(e-55296<<10)+(n-56320),s++),u+=e<128?1:e<2048?2:e<65536?3:4;for(r=i.uint8array?new Uint8Array(u):new Array(u),s=o=0;o<u;s++)55296==(64512&(e=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(n=t.charCodeAt(s+1)))&&(e=65536+(e-55296<<10)+(n-56320),s++),e<128?r[o++]=e:(e<2048?r[o++]=192|e>>>6:(e<65536?r[o++]=224|e>>>12:(r[o++]=240|e>>>18,r[o++]=128|e>>>12&63),r[o++]=128|e>>>6&63),r[o++]=128|63&e);return r}(t)},e.utf8decode=function(t){return i.nodebuffer?n.transformTo("nodebuffer",t).toString("utf-8"):function(t){var r,e,i,s,o=t.length,u=new Array(2*o);for(r=e=0;r<o;)if((i=t[r++])<128)u[e++]=i;else if(4<(s=a[i]))u[e++]=65533,r+=s-1;else{for(i&=2===s?31:3===s?15:7;1<s&&r<o;)i=i<<6|63&t[r++],s--;1<s?u[e++]=65533:i<65536?u[e++]=i:(i-=65536,u[e++]=55296|i>>10&1023,u[e++]=56320|1023&i)}return u.length!==e&&(u.subarray?u=u.subarray(0,e):u.length=e),n.applyFromCharCode(u)}(t=n.transformTo(i.uint8array?"uint8array":"array",t))},n.inherits(f,o),f.prototype.processChunk=function(t){var r=n.transformTo(i.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var s=r;(r=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),r.set(s,this.leftOver.length)}else r=this.leftOver.concat(r);this.leftOver=null}var o=function(t,r){var e;for((r=r||t.length)>t.length&&(r=t.length),e=r-1;0<=e&&128==(192&t[e]);)e--;return e<0?r:0===e?r:e+a[t[e]]>r?e:r}(r),u=r;o!==r.length&&(i.uint8array?(u=r.subarray(0,o),this.leftOver=r.subarray(o,r.length)):(u=r.slice(0,o),this.leftOver=r.slice(o,r.length))),this.push({data:e.utf8decode(u),meta:t.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:e.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},e.Utf8DecodeWorker=f,n.inherits(c,o),c.prototype.processChunk=function(t){this.push({data:e.utf8encode(t.data),meta:t.meta})},e.Utf8EncodeWorker=c},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,e){var n=t("./support"),i=t("./base64"),s=t("./nodejsUtils"),o=t("./external");function a(t){return t}function u(t,r){for(var e=0;e<t.length;++e)r[e]=255&t.charCodeAt(e);return r}t("setimmediate"),e.newBlob=function(t,r){e.checkSupport("blob");try{return new Blob([t],{type:r})}catch(e){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(t),n.getBlob(r)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(t,r,e){var n=[],i=0,s=t.length;if(s<=e)return String.fromCharCode.apply(null,t);for(;i<s;)"array"===r||"nodebuffer"===r?n.push(String.fromCharCode.apply(null,t.slice(i,Math.min(i+e,s)))):n.push(String.fromCharCode.apply(null,t.subarray(i,Math.min(i+e,s)))),i+=e;return n.join("")},stringifyByChar:function(t){for(var r="",e=0;e<t.length;e++)r+=String.fromCharCode(t[e]);return r},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,s.allocBuffer(1)).length}catch(t){return!1}}()}};function c(t){var r=65536,n=e.getTypeOf(t),i=!0;if("uint8array"===n?i=f.applyCanBeUsed.uint8array:"nodebuffer"===n&&(i=f.applyCanBeUsed.nodebuffer),i)for(;1<r;)try{return f.stringifyByChunk(t,n,r)}catch(t){r=Math.floor(r/2)}return f.stringifyByChar(t)}function h(t,r){for(var e=0;e<t.length;e++)r[e]=t[e];return r}e.applyFromCharCode=c;var l={};l.string={string:a,array:function(t){return u(t,new Array(t.length))},arraybuffer:function(t){return l.string.uint8array(t).buffer},uint8array:function(t){return u(t,new Uint8Array(t.length))},nodebuffer:function(t){return u(t,s.allocBuffer(t.length))}},l.array={string:c,array:a,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return s.newBufferFrom(t)}},l.arraybuffer={string:function(t){return c(new Uint8Array(t))},array:function(t){return h(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:a,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return s.newBufferFrom(new Uint8Array(t))}},l.uint8array={string:c,array:function(t){return h(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:a,nodebuffer:function(t){return s.newBufferFrom(t)}},l.nodebuffer={string:c,array:function(t){return h(t,new Array(t.length))},arraybuffer:function(t){return l.nodebuffer.uint8array(t).buffer},uint8array:function(t){return h(t,new Uint8Array(t.length))},nodebuffer:a},e.transformTo=function(t,r){if(r=r||"",!t)return r;e.checkSupport(t);var n=e.getTypeOf(r);return l[n][t](r)},e.resolve=function(t){for(var r=t.split("/"),e=[],n=0;n<r.length;n++){var i=r[n];"."===i||""===i&&0!==n&&n!==r.length-1||(".."===i?e.pop():e.push(i))}return e.join("/")},e.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":n.nodebuffer&&s.isBuffer(t)?"nodebuffer":n.uint8array&&t instanceof Uint8Array?"uint8array":n.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},e.checkSupport=function(t){if(!n[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},e.MAX_VALUE_16BITS=65535,e.MAX_VALUE_32BITS=-1,e.pretty=function(t){var r,e,n="";for(e=0;e<(t||"").length;e++)n+="\\x"+((r=t.charCodeAt(e))<16?"0":"")+r.toString(16).toUpperCase();return n},e.delay=function(t,r,e){setImmediate((function(){t.apply(e||null,r||[])}))},e.inherits=function(t,r){function e(){}e.prototype=r.prototype,t.prototype=new e},e.extend=function(){var t,r,e={};for(t=0;t<arguments.length;t++)for(r in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],r)&&void 0===e[r]&&(e[r]=arguments[t][r]);return e},e.prepareContent=function(t,r,s,a,f){return o.Promise.resolve(r).then((function(t){return n.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new o.Promise((function(r,e){var n=new FileReader;n.onload=function(t){r(t.target.result)},n.onerror=function(t){e(t.target.error)},n.readAsArrayBuffer(t)})):t})).then((function(r){var c=e.getTypeOf(r);return c?("arraybuffer"===c?r=e.transformTo("uint8array",r):"string"===c&&(f?r=i.decode(r):s&&!0!==a&&(r=function(t){return u(t,n.uint8array?new Uint8Array(t.length):new Array(t.length))}(r))),r):o.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,e){var n=t("./reader/readerFor"),i=t("./utils"),s=t("./signature"),o=t("./zipEntry"),a=t("./support");function u(t){this.files=[],this.loadOptions=t}u.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var r=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(r)+", expected "+i.pretty(t)+")")}},isSignature:function(t,r){var e=this.reader.index;this.reader.setIndex(t);var n=this.reader.readString(4)===r;return this.reader.setIndex(e),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),r=a.uint8array?"uint8array":"array",e=i.transformTo(r,t);this.zipComment=this.loadOptions.decodeFileName(e)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,r,e,n=this.zip64EndOfCentralSize-44;0<n;)t=this.reader.readInt(2),r=this.reader.readInt(4),e=this.reader.readData(r),this.zip64ExtensibleData[t]={id:t,length:r,value:e}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,r;for(t=0;t<this.files.length;t++)r=this.files[t],this.reader.setIndex(r.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),r.readLocalPart(this.reader),r.handleUTF8(),r.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(t=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(t<0)throw!this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory");this.reader.setIndex(t);var r=t;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var e=this.centralDirOffset+this.centralDirSize;this.zip64&&(e+=20,e+=12+this.zip64EndOfCentralSize);var n=r-e;if(0<n)this.isSignature(r,s.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(t){this.reader=n(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r,e){var n=t("./reader/readerFor"),i=t("./utils"),s=t("./compressedObject"),o=t("./crc32"),a=t("./utf8"),u=t("./compressions"),f=t("./support");function c(t,r){this.options=t,this.loadOptions=r}c.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var r,e;if(t.skip(22),this.fileNameLength=t.readInt(2),e=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(e),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(r=function(t){for(var r in u)if(Object.prototype.hasOwnProperty.call(u,r)&&u[r].magic===t)return u[r];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,r,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var r=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(r),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var t=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(t){var r,e,n,i=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<i;)r=t.readInt(2),e=t.readInt(2),n=t.readData(e),this.extraFields[r]={id:r,length:e,value:n};t.setIndex(i)},handleUTF8:function(){var t=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var r=this.findExtraFieldUnicodePath();if(null!==r)this.fileNameStr=r;else{var e=i.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(e)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var s=i.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(s)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var r=n(t.value);return 1!==r.readInt(1)?null:o(this.fileName)!==r.readInt(4)?null:a.utf8decode(r.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var r=n(t.value);return 1!==r.readInt(1)?null:o(this.fileComment)!==r.readInt(4)?null:a.utf8decode(r.readData(t.length-5))}return null}},r.exports=c},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,e){function n(t,r,e){this.name=t,this.dir=e.dir,this.date=e.date,this.comment=e.comment,this.unixPermissions=e.unixPermissions,this.dosPermissions=e.dosPermissions,this._data=r,this._dataBinary=e.binary,this.options={compression:e.compression,compressionOptions:e.compressionOptions}}var i=t("./stream/StreamHelper"),s=t("./stream/DataWorker"),o=t("./utf8"),a=t("./compressedObject"),u=t("./stream/GenericWorker");n.prototype={internalStream:function(t){var r=null,e="string";try{if(!t)throw new Error("No output type specified.");var n="string"===(e=t.toLowerCase())||"text"===e;"binarystring"!==e&&"text"!==e||(e="string"),r=this._decompressWorker();var s=!this._dataBinary;s&&!n&&(r=r.pipe(new o.Utf8EncodeWorker)),!s&&n&&(r=r.pipe(new o.Utf8DecodeWorker))}catch(t){(r=new u("error")).error(t)}return new i(r,e,"")},async:function(t,r){return this.internalStream(t).accumulate(r)},nodeStream:function(t,r){return this.internalStream(t||"nodebuffer").toNodejsStream(r)},_compressWorker:function(t,r){if(this._data instanceof a&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var e=this._decompressWorker();return this._dataBinary||(e=e.pipe(new o.Utf8EncodeWorker)),a.createWorkerFrom(e,t,r)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof u?this._data:new s(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<f.length;h++)n.prototype[f[h]]=c;r.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,e){(function(t){var e,n,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var s=0,o=new i(c),a=t.document.createTextNode("");o.observe(a,{characterData:!0}),e=function(){a.data=s=++s%2}}else if(t.setImmediate||void 0===t.MessageChannel)e="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var r=t.document.createElement("script");r.onreadystatechange=function(){c(),r.onreadystatechange=null,r.parentNode.removeChild(r),r=null},t.document.documentElement.appendChild(r)}:function(){setTimeout(c,0)};else{var u=new t.MessageChannel;u.port1.onmessage=c,e=function(){u.port2.postMessage(0)}}var f=[];function c(){var t,r;n=!0;for(var e=f.length;e;){for(r=f,f=[],t=-1;++t<e;)r[t]();e=f.length}n=!1}r.exports=function(t){1!==f.push(t)||n||e()}}).call(this,"undefined"!=typeof ir?ir:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(t,r,e){var n=t("immediate");function i(){}var s={},o=["REJECTED"],a=["FULFILLED"],u=["PENDING"];function f(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,t!==i&&d(this,t)}function c(t,r,e){this.promise=t,"function"==typeof r&&(this.onFulfilled=r,this.callFulfilled=this.otherCallFulfilled),"function"==typeof e&&(this.onRejected=e,this.callRejected=this.otherCallRejected)}function h(t,r,e){n((function(){var n;try{n=r(e)}catch(n){return s.reject(t,n)}n===t?s.reject(t,new TypeError("Cannot resolve promise with itself")):s.resolve(t,n)}))}function l(t){var r=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof r)return function(){r.apply(t,arguments)}}function d(t,r){var e=!1;function n(r){e||(e=!0,s.reject(t,r))}function i(r){e||(e=!0,s.resolve(t,r))}var o=v((function(){r(i,n)}));"error"===o.status&&n(o.value)}function v(t,r){var e={};try{e.value=t(r),e.status="success"}catch(t){e.status="error",e.value=t}return e}(r.exports=f).prototype.finally=function(t){if("function"!=typeof t)return this;var r=this.constructor;return this.then((function(e){return r.resolve(t()).then((function(){return e}))}),(function(e){return r.resolve(t()).then((function(){throw e}))}))},f.prototype.catch=function(t){return this.then(null,t)},f.prototype.then=function(t,r){if("function"!=typeof t&&this.state===a||"function"!=typeof r&&this.state===o)return this;var e=new this.constructor(i);this.state!==u?h(e,this.state===a?t:r,this.outcome):this.queue.push(new c(e,t,r));return e},c.prototype.callFulfilled=function(t){s.resolve(this.promise,t)},c.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},c.prototype.callRejected=function(t){s.reject(this.promise,t)},c.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},s.resolve=function(t,r){var e=v(l,r);if("error"===e.status)return s.reject(t,e.value);var n=e.value;if(n)d(t,n);else{t.state=a,t.outcome=r;for(var i=-1,o=t.queue.length;++i<o;)t.queue[i].callFulfilled(r)}return t},s.reject=function(t,r){t.state=o,t.outcome=r;for(var e=-1,n=t.queue.length;++e<n;)t.queue[e].callRejected(r);return t},f.resolve=function(t){if(t instanceof this)return t;return s.resolve(new this(i),t)},f.reject=function(t){var r=new this(i);return s.reject(r,t)},f.all=function(t){var r=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var e=t.length,n=!1;if(!e)return this.resolve([]);var o=new Array(e),a=0,u=-1,f=new this(i);for(;++u<e;)c(t[u],u);return f;function c(t,i){r.resolve(t).then((function(t){o[i]=t,++a!==e||n||(n=!0,s.resolve(f,o))}),(function(t){n||(n=!0,s.reject(f,t))}))}},f.race=function(t){var r=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var e=t.length,n=!1;if(!e)return this.resolve([]);var o=-1,a=new this(i);for(;++o<e;)u=t[o],r.resolve(u).then((function(t){n||(n=!0,s.resolve(a,t))}),(function(t){n||(n=!0,s.reject(a,t))}));var u;return a}},{immediate:36}],38:[function(t,r,e){var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),r.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,e){var n=t("./zlib/deflate"),i=t("./utils/common"),s=t("./utils/strings"),o=t("./zlib/messages"),a=t("./zlib/zstream"),u=Object.prototype.toString,f=0,c=-1,h=0,l=8;function d(t){if(!(this instanceof d))return new d(t);this.options=i.assign({level:c,method:l,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},t||{});var r=this.options;r.raw&&0<r.windowBits?r.windowBits=-r.windowBits:r.gzip&&0<r.windowBits&&r.windowBits<16&&(r.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var e=n.deflateInit2(this.strm,r.level,r.method,r.windowBits,r.memLevel,r.strategy);if(e!==f)throw new Error(o[e]);if(r.header&&n.deflateSetHeader(this.strm,r.header),r.dictionary){var v;if(v="string"==typeof r.dictionary?s.string2buf(r.dictionary):"[object ArrayBuffer]"===u.call(r.dictionary)?new Uint8Array(r.dictionary):r.dictionary,(e=n.deflateSetDictionary(this.strm,v))!==f)throw new Error(o[e]);this._dict_set=!0}}function v(t,r){var e=new d(r);if(e.push(t,!0),e.err)throw e.msg||o[e.err];return e.result}d.prototype.push=function(t,r){var e,o,a=this.strm,c=this.options.chunkSize;if(this.ended)return!1;o=r===~~r?r:!0===r?4:0,"string"==typeof t?a.input=s.string2buf(t):"[object ArrayBuffer]"===u.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(c),a.next_out=0,a.avail_out=c),1!==(e=n.deflate(a,o))&&e!==f)return this.onEnd(e),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(s.buf2binstring(i.shrinkBuf(a.output,a.next_out))):this.onData(i.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==e);return 4===o?(e=n.deflateEnd(this.strm),this.onEnd(e),this.ended=!0,e===f):2!==o||(this.onEnd(f),!(a.avail_out=0))},d.prototype.onData=function(t){this.chunks.push(t)},d.prototype.onEnd=function(t){t===f&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=d,e.deflate=v,e.deflateRaw=function(t,r){return(r=r||{}).raw=!0,v(t,r)},e.gzip=function(t,r){return(r=r||{}).gzip=!0,v(t,r)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,e){var n=t("./zlib/inflate"),i=t("./utils/common"),s=t("./utils/strings"),o=t("./zlib/constants"),a=t("./zlib/messages"),u=t("./zlib/zstream"),f=t("./zlib/gzheader"),c=Object.prototype.toString;function h(t){if(!(this instanceof h))return new h(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var r=this.options;r.raw&&0<=r.windowBits&&r.windowBits<16&&(r.windowBits=-r.windowBits,0===r.windowBits&&(r.windowBits=-15)),!(0<=r.windowBits&&r.windowBits<16)||t&&t.windowBits||(r.windowBits+=32),15<r.windowBits&&r.windowBits<48&&0==(15&r.windowBits)&&(r.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var e=n.inflateInit2(this.strm,r.windowBits);if(e!==o.Z_OK)throw new Error(a[e]);this.header=new f,n.inflateGetHeader(this.strm,this.header)}function l(t,r){var e=new h(r);if(e.push(t,!0),e.err)throw e.msg||a[e.err];return e.result}h.prototype.push=function(t,r){var e,a,u,f,h,l,d=this.strm,v=this.options.chunkSize,w=this.options.dictionary,m=!1;if(this.ended)return!1;a=r===~~r?r:!0===r?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof t?d.input=s.binstring2buf(t):"[object ArrayBuffer]"===c.call(t)?d.input=new Uint8Array(t):d.input=t,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new i.Buf8(v),d.next_out=0,d.avail_out=v),(e=n.inflate(d,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&w&&(l="string"==typeof w?s.string2buf(w):"[object ArrayBuffer]"===c.call(w)?new Uint8Array(w):w,e=n.inflateSetDictionary(this.strm,l)),e===o.Z_BUF_ERROR&&!0===m&&(e=o.Z_OK,m=!1),e!==o.Z_STREAM_END&&e!==o.Z_OK)return this.onEnd(e),!(this.ended=!0);d.next_out&&(0!==d.avail_out&&e!==o.Z_STREAM_END&&(0!==d.avail_in||a!==o.Z_FINISH&&a!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(u=s.utf8border(d.output,d.next_out),f=d.next_out-u,h=s.buf2string(d.output,u),d.next_out=f,d.avail_out=v-f,f&&i.arraySet(d.output,d.output,u,f,0),this.onData(h)):this.onData(i.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(m=!0)}while((0<d.avail_in||0===d.avail_out)&&e!==o.Z_STREAM_END);return e===o.Z_STREAM_END&&(a=o.Z_FINISH),a===o.Z_FINISH?(e=n.inflateEnd(this.strm),this.onEnd(e),this.ended=!0,e===o.Z_OK):a!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(d.avail_out=0))},h.prototype.onData=function(t){this.chunks.push(t)},h.prototype.onEnd=function(t){t===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=h,e.inflate=l,e.inflateRaw=function(t,r){return(r=r||{}).raw=!0,l(t,r)},e.ungzip=l},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,e){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(t){for(var r=Array.prototype.slice.call(arguments,1);r.length;){var e=r.shift();if(e){if("object"!=typeof e)throw new TypeError(e+"must be non-object");for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}}return t},e.shrinkBuf=function(t,r){return t.length===r?t:t.subarray?t.subarray(0,r):(t.length=r,t)};var i={arraySet:function(t,r,e,n,i){if(r.subarray&&t.subarray)t.set(r.subarray(e,e+n),i);else for(var s=0;s<n;s++)t[i+s]=r[e+s]},flattenChunks:function(t){var r,e,n,i,s,o;for(r=n=0,e=t.length;r<e;r++)n+=t[r].length;for(o=new Uint8Array(n),r=i=0,e=t.length;r<e;r++)s=t[r],o.set(s,i),i+=s.length;return o}},s={arraySet:function(t,r,e,n,i){for(var s=0;s<n;s++)t[i+s]=r[e+s]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,i)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,s))},e.setTyped(n)},{}],42:[function(t,r,e){var n=t("./common"),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var o=new n.Buf8(256),a=0;a<256;a++)o[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function u(t,r){if(r<65537&&(t.subarray&&s||!t.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(t,r));for(var e="",o=0;o<r;o++)e+=String.fromCharCode(t[o]);return e}o[254]=o[254]=1,e.string2buf=function(t){var r,e,i,s,o,a=t.length,u=0;for(s=0;s<a;s++)55296==(64512&(e=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=t.charCodeAt(s+1)))&&(e=65536+(e-55296<<10)+(i-56320),s++),u+=e<128?1:e<2048?2:e<65536?3:4;for(r=new n.Buf8(u),s=o=0;o<u;s++)55296==(64512&(e=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=t.charCodeAt(s+1)))&&(e=65536+(e-55296<<10)+(i-56320),s++),e<128?r[o++]=e:(e<2048?r[o++]=192|e>>>6:(e<65536?r[o++]=224|e>>>12:(r[o++]=240|e>>>18,r[o++]=128|e>>>12&63),r[o++]=128|e>>>6&63),r[o++]=128|63&e);return r},e.buf2binstring=function(t){return u(t,t.length)},e.binstring2buf=function(t){for(var r=new n.Buf8(t.length),e=0,i=r.length;e<i;e++)r[e]=t.charCodeAt(e);return r},e.buf2string=function(t,r){var e,n,i,s,a=r||t.length,f=new Array(2*a);for(e=n=0;e<a;)if((i=t[e++])<128)f[n++]=i;else if(4<(s=o[i]))f[n++]=65533,e+=s-1;else{for(i&=2===s?31:3===s?15:7;1<s&&e<a;)i=i<<6|63&t[e++],s--;1<s?f[n++]=65533:i<65536?f[n++]=i:(i-=65536,f[n++]=55296|i>>10&1023,f[n++]=56320|1023&i)}return u(f,n)},e.utf8border=function(t,r){var e;for((r=r||t.length)>t.length&&(r=t.length),e=r-1;0<=e&&128==(192&t[e]);)e--;return e<0?r:0===e?r:e+o[t[e]]>r?e:r}},{"./common":41}],43:[function(t,r,e){r.exports=function(t,r,e,n){for(var i=65535&t|0,s=t>>>16&65535|0,o=0;0!==e;){for(e-=o=2e3<e?2e3:e;s=s+(i=i+r[n++]|0)|0,--o;);i%=65521,s%=65521}return i|s<<16|0}},{}],44:[function(t,r,e){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,e){var n=function(){for(var t,r=[],e=0;e<256;e++){t=e;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;r[e]=t}return r}();r.exports=function(t,r,e,i){var s=n,o=i+e;t^=-1;for(var a=i;a<o;a++)t=t>>>8^s[255&(t^r[a])];return-1^t}},{}],46:[function(t,r,e){var n,i=t("../utils/common"),s=t("./trees"),o=t("./adler32"),a=t("./crc32"),u=t("./messages"),f=0,c=4,h=0,l=-2,d=-1,v=4,w=2,m=8,y=9,b=286,p=30,E=19,g=2*b+1,P=15,S=3,_=258,k=_+S+1,T=42,O=113,A=1,$=2,j=3,R=4;function D(t,r){return t.msg=u[r],r}function N(t){return(t<<1)-(4<t?9:0)}function I(t){for(var r=t.length;0<=--r;)t[r]=0}function M(t){var r=t.state,e=r.pending;e>t.avail_out&&(e=t.avail_out),0!==e&&(i.arraySet(t.output,r.pending_buf,r.pending_out,e,t.next_out),t.next_out+=e,r.pending_out+=e,t.total_out+=e,t.avail_out-=e,r.pending-=e,0===r.pending&&(r.pending_out=0))}function x(t,r){s._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,r),t.block_start=t.strstart,M(t.strm)}function C(t,r){t.pending_buf[t.pending++]=r}function L(t,r){t.pending_buf[t.pending++]=r>>>8&255,t.pending_buf[t.pending++]=255&r}function B(t,r){var e,n,i=t.max_chain_length,s=t.strstart,o=t.prev_length,a=t.nice_match,u=t.strstart>t.w_size-k?t.strstart-(t.w_size-k):0,f=t.window,c=t.w_mask,h=t.prev,l=t.strstart+_,d=f[s+o-1],v=f[s+o];t.prev_length>=t.good_match&&(i>>=2),a>t.lookahead&&(a=t.lookahead);do{if(f[(e=r)+o]===v&&f[e+o-1]===d&&f[e]===f[s]&&f[++e]===f[s+1]){s+=2,e++;do{}while(f[++s]===f[++e]&&f[++s]===f[++e]&&f[++s]===f[++e]&&f[++s]===f[++e]&&f[++s]===f[++e]&&f[++s]===f[++e]&&f[++s]===f[++e]&&f[++s]===f[++e]&&s<l);if(n=_-(l-s),s=l-_,o<n){if(t.match_start=r,a<=(o=n))break;d=f[s+o-1],v=f[s+o]}}}while((r=h[r&c])>u&&0!=--i);return o<=t.lookahead?o:t.lookahead}function F(t){var r,e,n,s,u,f,c,h,l,d,v=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=v+(v-k)){for(i.arraySet(t.window,t.window,v,v,0),t.match_start-=v,t.strstart-=v,t.block_start-=v,r=e=t.hash_size;n=t.head[--r],t.head[r]=v<=n?n-v:0,--e;);for(r=e=v;n=t.prev[--r],t.prev[r]=v<=n?n-v:0,--e;);s+=v}if(0===t.strm.avail_in)break;if(f=t.strm,c=t.window,h=t.strstart+t.lookahead,l=s,d=void 0,d=f.avail_in,l<d&&(d=l),e=0===d?0:(f.avail_in-=d,i.arraySet(c,f.input,f.next_in,d,h),1===f.state.wrap?f.adler=o(f.adler,c,d,h):2===f.state.wrap&&(f.adler=a(f.adler,c,d,h)),f.next_in+=d,f.total_in+=d,d),t.lookahead+=e,t.lookahead+t.insert>=S)for(u=t.strstart-t.insert,t.ins_h=t.window[u],t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+S-1])&t.hash_mask,t.prev[u&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=u,u++,t.insert--,!(t.lookahead+t.insert<S)););}while(t.lookahead<k&&0!==t.strm.avail_in)}function q(t,r){for(var e,n;;){if(t.lookahead<k){if(F(t),t.lookahead<k&&r===f)return A;if(0===t.lookahead)break}if(e=0,t.lookahead>=S&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==e&&t.strstart-e<=t.w_size-k&&(t.match_length=B(t,e)),t.match_length>=S)if(n=s._tr_tally(t,t.strstart-t.match_start,t.match_length-S),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=S){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(x(t,!1),0===t.strm.avail_out))return A}return t.insert=t.strstart<S-1?t.strstart:S-1,r===c?(x(t,!0),0===t.strm.avail_out?j:R):t.last_lit&&(x(t,!1),0===t.strm.avail_out)?A:$}function U(t,r){for(var e,n,i;;){if(t.lookahead<k){if(F(t),t.lookahead<k&&r===f)return A;if(0===t.lookahead)break}if(e=0,t.lookahead>=S&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=S-1,0!==e&&t.prev_length<t.max_lazy_match&&t.strstart-e<=t.w_size-k&&(t.match_length=B(t,e),t.match_length<=5&&(1===t.strategy||t.match_length===S&&4096<t.strstart-t.match_start)&&(t.match_length=S-1)),t.prev_length>=S&&t.match_length<=t.prev_length){for(i=t.strstart+t.lookahead-S,n=s._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-S),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=S-1,t.strstart++,n&&(x(t,!1),0===t.strm.avail_out))return A}else if(t.match_available){if((n=s._tr_tally(t,0,t.window[t.strstart-1]))&&x(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return A}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=s._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<S-1?t.strstart:S-1,r===c?(x(t,!0),0===t.strm.avail_out?j:R):t.last_lit&&(x(t,!1),0===t.strm.avail_out)?A:$}function W(t,r,e,n,i){this.good_length=t,this.max_lazy=r,this.nice_length=e,this.max_chain=n,this.func=i}function G(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*g),this.dyn_dtree=new i.Buf16(2*(2*p+1)),this.bl_tree=new i.Buf16(2*(2*E+1)),I(this.dyn_ltree),I(this.dyn_dtree),I(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(P+1),this.heap=new i.Buf16(2*b+1),I(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*b+1),I(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function z(t){var r;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=w,(r=t.state).pending=0,r.pending_out=0,r.wrap<0&&(r.wrap=-r.wrap),r.status=r.wrap?T:O,t.adler=2===r.wrap?0:1,r.last_flush=f,s._tr_init(r),h):D(t,l)}function H(t){var r=z(t);return r===h&&function(t){t.window_size=2*t.w_size,I(t.head),t.max_lazy_match=n[t.level].max_lazy,t.good_match=n[t.level].good_length,t.nice_match=n[t.level].nice_length,t.max_chain_length=n[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=S-1,t.match_available=0,t.ins_h=0}(t.state),r}function Z(t,r,e,n,s,o){if(!t)return l;var a=1;if(r===d&&(r=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),s<1||y<s||e!==m||n<8||15<n||r<0||9<r||o<0||v<o)return D(t,l);8===n&&(n=9);var u=new G;return(t.state=u).strm=t,u.wrap=a,u.gzhead=null,u.w_bits=n,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=s+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+S-1)/S),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<s+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=r,u.strategy=o,u.method=e,H(t)}n=[new W(0,0,0,0,(function(t,r){var e=65535;for(e>t.pending_buf_size-5&&(e=t.pending_buf_size-5);;){if(t.lookahead<=1){if(F(t),0===t.lookahead&&r===f)return A;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+e;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,x(t,!1),0===t.strm.avail_out))return A;if(t.strstart-t.block_start>=t.w_size-k&&(x(t,!1),0===t.strm.avail_out))return A}return t.insert=0,r===c?(x(t,!0),0===t.strm.avail_out?j:R):(t.strstart>t.block_start&&(x(t,!1),t.strm.avail_out),A)})),new W(4,4,8,4,q),new W(4,5,16,8,q),new W(4,6,32,32,q),new W(4,4,16,16,U),new W(8,16,32,32,U),new W(8,16,128,128,U),new W(8,32,128,256,U),new W(32,128,258,1024,U),new W(32,258,258,4096,U)],e.deflateInit=function(t,r){return Z(t,r,m,15,8,0)},e.deflateInit2=Z,e.deflateReset=H,e.deflateResetKeep=z,e.deflateSetHeader=function(t,r){return t&&t.state?2!==t.state.wrap?l:(t.state.gzhead=r,h):l},e.deflate=function(t,r){var e,i,o,u;if(!t||!t.state||5<r||r<0)return t?D(t,l):l;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&r!==c)return D(t,0===t.avail_out?-5:l);if(i.strm=t,e=i.last_flush,i.last_flush=r,i.status===T)if(2===i.wrap)t.adler=0,C(i,31),C(i,139),C(i,8),i.gzhead?(C(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),C(i,255&i.gzhead.time),C(i,i.gzhead.time>>8&255),C(i,i.gzhead.time>>16&255),C(i,i.gzhead.time>>24&255),C(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),C(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(C(i,255&i.gzhead.extra.length),C(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=a(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(C(i,0),C(i,0),C(i,0),C(i,0),C(i,0),C(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),C(i,3),i.status=O);else{var d=m+(i.w_bits-8<<4)<<8;d|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(d|=32),d+=31-d%31,i.status=O,L(i,d),0!==i.strstart&&(L(i,t.adler>>>16),L(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),M(t),o=i.pending,i.pending!==i.pending_buf_size));)C(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),M(t),o=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,C(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),0===u&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),M(t),o=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,C(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),0===u&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&M(t),i.pending+2<=i.pending_buf_size&&(C(i,255&t.adler),C(i,t.adler>>8&255),t.adler=0,i.status=O)):i.status=O),0!==i.pending){if(M(t),0===t.avail_out)return i.last_flush=-1,h}else if(0===t.avail_in&&N(r)<=N(e)&&r!==c)return D(t,-5);if(666===i.status&&0!==t.avail_in)return D(t,-5);if(0!==t.avail_in||0!==i.lookahead||r!==f&&666!==i.status){var v=2===i.strategy?function(t,r){for(var e;;){if(0===t.lookahead&&(F(t),0===t.lookahead)){if(r===f)return A;break}if(t.match_length=0,e=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,e&&(x(t,!1),0===t.strm.avail_out))return A}return t.insert=0,r===c?(x(t,!0),0===t.strm.avail_out?j:R):t.last_lit&&(x(t,!1),0===t.strm.avail_out)?A:$}(i,r):3===i.strategy?function(t,r){for(var e,n,i,o,a=t.window;;){if(t.lookahead<=_){if(F(t),t.lookahead<=_&&r===f)return A;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=S&&0<t.strstart&&(n=a[i=t.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i]){o=t.strstart+_;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<o);t.match_length=_-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=S?(e=s._tr_tally(t,1,t.match_length-S),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(e=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),e&&(x(t,!1),0===t.strm.avail_out))return A}return t.insert=0,r===c?(x(t,!0),0===t.strm.avail_out?j:R):t.last_lit&&(x(t,!1),0===t.strm.avail_out)?A:$}(i,r):n[i.level].func(i,r);if(v!==j&&v!==R||(i.status=666),v===A||v===j)return 0===t.avail_out&&(i.last_flush=-1),h;if(v===$&&(1===r?s._tr_align(i):5!==r&&(s._tr_stored_block(i,0,0,!1),3===r&&(I(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),M(t),0===t.avail_out))return i.last_flush=-1,h}return r!==c?h:i.wrap<=0?1:(2===i.wrap?(C(i,255&t.adler),C(i,t.adler>>8&255),C(i,t.adler>>16&255),C(i,t.adler>>24&255),C(i,255&t.total_in),C(i,t.total_in>>8&255),C(i,t.total_in>>16&255),C(i,t.total_in>>24&255)):(L(i,t.adler>>>16),L(i,65535&t.adler)),M(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?h:1)},e.deflateEnd=function(t){var r;return t&&t.state?(r=t.state.status)!==T&&69!==r&&73!==r&&91!==r&&103!==r&&r!==O&&666!==r?D(t,l):(t.state=null,r===O?D(t,-3):h):l},e.deflateSetDictionary=function(t,r){var e,n,s,a,u,f,c,d,v=r.length;if(!t||!t.state)return l;if(2===(a=(e=t.state).wrap)||1===a&&e.status!==T||e.lookahead)return l;for(1===a&&(t.adler=o(t.adler,r,v,0)),e.wrap=0,v>=e.w_size&&(0===a&&(I(e.head),e.strstart=0,e.block_start=0,e.insert=0),d=new i.Buf8(e.w_size),i.arraySet(d,r,v-e.w_size,e.w_size,0),r=d,v=e.w_size),u=t.avail_in,f=t.next_in,c=t.input,t.avail_in=v,t.next_in=0,t.input=r,F(e);e.lookahead>=S;){for(n=e.strstart,s=e.lookahead-(S-1);e.ins_h=(e.ins_h<<e.hash_shift^e.window[n+S-1])&e.hash_mask,e.prev[n&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=n,n++,--s;);e.strstart=n,e.lookahead=S-1,F(e)}return e.strstart+=e.lookahead,e.block_start=e.strstart,e.insert=e.lookahead,e.lookahead=0,e.match_length=e.prev_length=S-1,e.match_available=0,t.next_in=f,t.input=c,t.avail_in=u,e.wrap=a,h},e.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,e){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,r,e){r.exports=function(t,r){var e,n,i,s,o,a,u,f,c,h,l,d,v,w,m,y,b,p,E,g,P,S,_,k,T;e=t.state,n=t.next_in,k=t.input,i=n+(t.avail_in-5),s=t.next_out,T=t.output,o=s-(r-t.avail_out),a=s+(t.avail_out-257),u=e.dmax,f=e.wsize,c=e.whave,h=e.wnext,l=e.window,d=e.hold,v=e.bits,w=e.lencode,m=e.distcode,y=(1<<e.lenbits)-1,b=(1<<e.distbits)-1;t:do{v<15&&(d+=k[n++]<<v,v+=8,d+=k[n++]<<v,v+=8),p=w[d&y];r:for(;;){if(d>>>=E=p>>>24,v-=E,0===(E=p>>>16&255))T[s++]=65535&p;else{if(!(16&E)){if(0==(64&E)){p=w[(65535&p)+(d&(1<<E)-1)];continue r}if(32&E){e.mode=12;break t}t.msg="invalid literal/length code",e.mode=30;break t}g=65535&p,(E&=15)&&(v<E&&(d+=k[n++]<<v,v+=8),g+=d&(1<<E)-1,d>>>=E,v-=E),v<15&&(d+=k[n++]<<v,v+=8,d+=k[n++]<<v,v+=8),p=m[d&b];e:for(;;){if(d>>>=E=p>>>24,v-=E,!(16&(E=p>>>16&255))){if(0==(64&E)){p=m[(65535&p)+(d&(1<<E)-1)];continue e}t.msg="invalid distance code",e.mode=30;break t}if(P=65535&p,v<(E&=15)&&(d+=k[n++]<<v,(v+=8)<E&&(d+=k[n++]<<v,v+=8)),u<(P+=d&(1<<E)-1)){t.msg="invalid distance too far back",e.mode=30;break t}if(d>>>=E,v-=E,(E=s-o)<P){if(c<(E=P-E)&&e.sane){t.msg="invalid distance too far back",e.mode=30;break t}if(_=l,(S=0)===h){if(S+=f-E,E<g){for(g-=E;T[s++]=l[S++],--E;);S=s-P,_=T}}else if(h<E){if(S+=f+h-E,(E-=h)<g){for(g-=E;T[s++]=l[S++],--E;);if(S=0,h<g){for(g-=E=h;T[s++]=l[S++],--E;);S=s-P,_=T}}}else if(S+=h-E,E<g){for(g-=E;T[s++]=l[S++],--E;);S=s-P,_=T}for(;2<g;)T[s++]=_[S++],T[s++]=_[S++],T[s++]=_[S++],g-=3;g&&(T[s++]=_[S++],1<g&&(T[s++]=_[S++]))}else{for(S=s-P;T[s++]=T[S++],T[s++]=T[S++],T[s++]=T[S++],2<(g-=3););g&&(T[s++]=T[S++],1<g&&(T[s++]=T[S++]))}break}}break}}while(n<i&&s<a);n-=g=v>>3,d&=(1<<(v-=g<<3))-1,t.next_in=n,t.next_out=s,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=s<a?a-s+257:257-(s-a),e.hold=d,e.bits=v}},{}],49:[function(t,r,e){var n=t("../utils/common"),i=t("./adler32"),s=t("./crc32"),o=t("./inffast"),a=t("./inftrees"),u=1,f=2,c=0,h=-2,l=1,d=852,v=592;function w(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function m(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function y(t){var r;return t&&t.state?(r=t.state,t.total_in=t.total_out=r.total=0,t.msg="",r.wrap&&(t.adler=1&r.wrap),r.mode=l,r.last=0,r.havedict=0,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new n.Buf32(d),r.distcode=r.distdyn=new n.Buf32(v),r.sane=1,r.back=-1,c):h}function b(t){var r;return t&&t.state?((r=t.state).wsize=0,r.whave=0,r.wnext=0,y(t)):h}function p(t,r){var e,n;return t&&t.state?(n=t.state,r<0?(e=0,r=-r):(e=1+(r>>4),r<48&&(r&=15)),r&&(r<8||15<r)?h:(null!==n.window&&n.wbits!==r&&(n.window=null),n.wrap=e,n.wbits=r,b(t))):h}function E(t,r){var e,n;return t?(n=new m,(t.state=n).window=null,(e=p(t,r))!==c&&(t.state=null),e):h}var g,P,S=!0;function _(t){if(S){var r;for(g=new n.Buf32(512),P=new n.Buf32(32),r=0;r<144;)t.lens[r++]=8;for(;r<256;)t.lens[r++]=9;for(;r<280;)t.lens[r++]=7;for(;r<288;)t.lens[r++]=8;for(a(u,t.lens,0,288,g,0,t.work,{bits:9}),r=0;r<32;)t.lens[r++]=5;a(f,t.lens,0,32,P,0,t.work,{bits:5}),S=!1}t.lencode=g,t.lenbits=9,t.distcode=P,t.distbits=5}function k(t,r,e,i){var s,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new n.Buf8(o.wsize)),i>=o.wsize?(n.arraySet(o.window,r,e-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i<(s=o.wsize-o.wnext)&&(s=i),n.arraySet(o.window,r,e-i,s,o.wnext),(i-=s)?(n.arraySet(o.window,r,e-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0}e.inflateReset=b,e.inflateReset2=p,e.inflateResetKeep=y,e.inflateInit=function(t){return E(t,15)},e.inflateInit2=E,e.inflate=function(t,r){var e,d,v,m,y,b,p,E,g,P,S,T,O,A,$,j,R,D,N,I,M,x,C,L,B=0,F=new n.Buf8(4),q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return h;12===(e=t.state).mode&&(e.mode=13),y=t.next_out,v=t.output,p=t.avail_out,m=t.next_in,d=t.input,b=t.avail_in,E=e.hold,g=e.bits,P=b,S=p,x=c;t:for(;;)switch(e.mode){case l:if(0===e.wrap){e.mode=13;break}for(;g<16;){if(0===b)break t;b--,E+=d[m++]<<g,g+=8}if(2&e.wrap&&35615===E){F[e.check=0]=255&E,F[1]=E>>>8&255,e.check=s(e.check,F,2,0),g=E=0,e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&E)<<8)+(E>>8))%31){t.msg="incorrect header check",e.mode=30;break}if(8!=(15&E)){t.msg="unknown compression method",e.mode=30;break}if(g-=4,M=8+(15&(E>>>=4)),0===e.wbits)e.wbits=M;else if(M>e.wbits){t.msg="invalid window size",e.mode=30;break}e.dmax=1<<M,t.adler=e.check=1,e.mode=512&E?10:12,g=E=0;break;case 2:for(;g<16;){if(0===b)break t;b--,E+=d[m++]<<g,g+=8}if(e.flags=E,8!=(255&e.flags)){t.msg="unknown compression method",e.mode=30;break}if(57344&e.flags){t.msg="unknown header flags set",e.mode=30;break}e.head&&(e.head.text=E>>8&1),512&e.flags&&(F[0]=255&E,F[1]=E>>>8&255,e.check=s(e.check,F,2,0)),g=E=0,e.mode=3;case 3:for(;g<32;){if(0===b)break t;b--,E+=d[m++]<<g,g+=8}e.head&&(e.head.time=E),512&e.flags&&(F[0]=255&E,F[1]=E>>>8&255,F[2]=E>>>16&255,F[3]=E>>>24&255,e.check=s(e.check,F,4,0)),g=E=0,e.mode=4;case 4:for(;g<16;){if(0===b)break t;b--,E+=d[m++]<<g,g+=8}e.head&&(e.head.xflags=255&E,e.head.os=E>>8),512&e.flags&&(F[0]=255&E,F[1]=E>>>8&255,e.check=s(e.check,F,2,0)),g=E=0,e.mode=5;case 5:if(1024&e.flags){for(;g<16;){if(0===b)break t;b--,E+=d[m++]<<g,g+=8}e.length=E,e.head&&(e.head.extra_len=E),512&e.flags&&(F[0]=255&E,F[1]=E>>>8&255,e.check=s(e.check,F,2,0)),g=E=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&(b<(T=e.length)&&(T=b),T&&(e.head&&(M=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),n.arraySet(e.head.extra,d,m,T,M)),512&e.flags&&(e.check=s(e.check,d,T,m)),b-=T,m+=T,e.length-=T),e.length))break t;e.length=0,e.mode=7;case 7:if(2048&e.flags){if(0===b)break t;for(T=0;M=d[m+T++],e.head&&M&&e.length<65536&&(e.head.name+=String.fromCharCode(M)),M&&T<b;);if(512&e.flags&&(e.check=s(e.check,d,T,m)),b-=T,m+=T,M)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=8;case 8:if(4096&e.flags){if(0===b)break t;for(T=0;M=d[m+T++],e.head&&M&&e.length<65536&&(e.head.comment+=String.fromCharCode(M)),M&&T<b;);if(512&e.flags&&(e.check=s(e.check,d,T,m)),b-=T,m+=T,M)break t}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;g<16;){if(0===b)break t;b--,E+=d[m++]<<g,g+=8}if(E!==(65535&e.check)){t.msg="header crc mismatch",e.mode=30;break}g=E=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),t.adler=e.check=0,e.mode=12;break;case 10:for(;g<32;){if(0===b)break t;b--,E+=d[m++]<<g,g+=8}t.adler=e.check=w(E),g=E=0,e.mode=11;case 11:if(0===e.havedict)return t.next_out=y,t.avail_out=p,t.next_in=m,t.avail_in=b,e.hold=E,e.bits=g,2;t.adler=e.check=1,e.mode=12;case 12:if(5===r||6===r)break t;case 13:if(e.last){E>>>=7&g,g-=7&g,e.mode=27;break}for(;g<3;){if(0===b)break t;b--,E+=d[m++]<<g,g+=8}switch(e.last=1&E,g-=1,3&(E>>>=1)){case 0:e.mode=14;break;case 1:if(_(e),e.mode=20,6!==r)break;E>>>=2,g-=2;break t;case 2:e.mode=17;break;case 3:t.msg="invalid block type",e.mode=30}E>>>=2,g-=2;break;case 14:for(E>>>=7&g,g-=7&g;g<32;){if(0===b)break t;b--,E+=d[m++]<<g,g+=8}if((65535&E)!=(E>>>16^65535)){t.msg="invalid stored block lengths",e.mode=30;break}if(e.length=65535&E,g=E=0,e.mode=15,6===r)break t;case 15:e.mode=16;case 16:if(T=e.length){if(b<T&&(T=b),p<T&&(T=p),0===T)break t;n.arraySet(v,d,m,T,y),b-=T,m+=T,p-=T,y+=T,e.length-=T;break}e.mode=12;break;case 17:for(;g<14;){if(0===b)break t;b--,E+=d[m++]<<g,g+=8}if(e.nlen=257+(31&E),E>>>=5,g-=5,e.ndist=1+(31&E),E>>>=5,g-=5,e.ncode=4+(15&E),E>>>=4,g-=4,286<e.nlen||30<e.ndist){t.msg="too many length or distance symbols",e.mode=30;break}e.have=0,e.mode=18;case 18:for(;e.have<e.ncode;){for(;g<3;){if(0===b)break t;b--,E+=d[m++]<<g,g+=8}e.lens[q[e.have++]]=7&E,E>>>=3,g-=3}for(;e.have<19;)e.lens[q[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,C={bits:e.lenbits},x=a(0,e.lens,0,19,e.lencode,0,e.work,C),e.lenbits=C.bits,x){t.msg="invalid code lengths set",e.mode=30;break}e.have=0,e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;j=(B=e.lencode[E&(1<<e.lenbits)-1])>>>16&255,R=65535&B,!(($=B>>>24)<=g);){if(0===b)break t;b--,E+=d[m++]<<g,g+=8}if(R<16)E>>>=$,g-=$,e.lens[e.have++]=R;else{if(16===R){for(L=$+2;g<L;){if(0===b)break t;b--,E+=d[m++]<<g,g+=8}if(E>>>=$,g-=$,0===e.have){t.msg="invalid bit length repeat",e.mode=30;break}M=e.lens[e.have-1],T=3+(3&E),E>>>=2,g-=2}else if(17===R){for(L=$+3;g<L;){if(0===b)break t;b--,E+=d[m++]<<g,g+=8}g-=$,M=0,T=3+(7&(E>>>=$)),E>>>=3,g-=3}else{for(L=$+7;g<L;){if(0===b)break t;b--,E+=d[m++]<<g,g+=8}g-=$,M=0,T=11+(127&(E>>>=$)),E>>>=7,g-=7}if(e.have+T>e.nlen+e.ndist){t.msg="invalid bit length repeat",e.mode=30;break}for(;T--;)e.lens[e.have++]=M}}if(30===e.mode)break;if(0===e.lens[256]){t.msg="invalid code -- missing end-of-block",e.mode=30;break}if(e.lenbits=9,C={bits:e.lenbits},x=a(u,e.lens,0,e.nlen,e.lencode,0,e.work,C),e.lenbits=C.bits,x){t.msg="invalid literal/lengths set",e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,C={bits:e.distbits},x=a(f,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,C),e.distbits=C.bits,x){t.msg="invalid distances set",e.mode=30;break}if(e.mode=20,6===r)break t;case 20:e.mode=21;case 21:if(6<=b&&258<=p){t.next_out=y,t.avail_out=p,t.next_in=m,t.avail_in=b,e.hold=E,e.bits=g,o(t,S),y=t.next_out,v=t.output,p=t.avail_out,m=t.next_in,d=t.input,b=t.avail_in,E=e.hold,g=e.bits,12===e.mode&&(e.back=-1);break}for(e.back=0;j=(B=e.lencode[E&(1<<e.lenbits)-1])>>>16&255,R=65535&B,!(($=B>>>24)<=g);){if(0===b)break t;b--,E+=d[m++]<<g,g+=8}if(j&&0==(240&j)){for(D=$,N=j,I=R;j=(B=e.lencode[I+((E&(1<<D+N)-1)>>D)])>>>16&255,R=65535&B,!(D+($=B>>>24)<=g);){if(0===b)break t;b--,E+=d[m++]<<g,g+=8}E>>>=D,g-=D,e.back+=D}if(E>>>=$,g-=$,e.back+=$,e.length=R,0===j){e.mode=26;break}if(32&j){e.back=-1,e.mode=12;break}if(64&j){t.msg="invalid literal/length code",e.mode=30;break}e.extra=15&j,e.mode=22;case 22:if(e.extra){for(L=e.extra;g<L;){if(0===b)break t;b--,E+=d[m++]<<g,g+=8}e.length+=E&(1<<e.extra)-1,E>>>=e.extra,g-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=23;case 23:for(;j=(B=e.distcode[E&(1<<e.distbits)-1])>>>16&255,R=65535&B,!(($=B>>>24)<=g);){if(0===b)break t;b--,E+=d[m++]<<g,g+=8}if(0==(240&j)){for(D=$,N=j,I=R;j=(B=e.distcode[I+((E&(1<<D+N)-1)>>D)])>>>16&255,R=65535&B,!(D+($=B>>>24)<=g);){if(0===b)break t;b--,E+=d[m++]<<g,g+=8}E>>>=D,g-=D,e.back+=D}if(E>>>=$,g-=$,e.back+=$,64&j){t.msg="invalid distance code",e.mode=30;break}e.offset=R,e.extra=15&j,e.mode=24;case 24:if(e.extra){for(L=e.extra;g<L;){if(0===b)break t;b--,E+=d[m++]<<g,g+=8}e.offset+=E&(1<<e.extra)-1,E>>>=e.extra,g-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){t.msg="invalid distance too far back",e.mode=30;break}e.mode=25;case 25:if(0===p)break t;if(T=S-p,e.offset>T){if((T=e.offset-T)>e.whave&&e.sane){t.msg="invalid distance too far back",e.mode=30;break}O=T>e.wnext?(T-=e.wnext,e.wsize-T):e.wnext-T,T>e.length&&(T=e.length),A=e.window}else A=v,O=y-e.offset,T=e.length;for(p<T&&(T=p),p-=T,e.length-=T;v[y++]=A[O++],--T;);0===e.length&&(e.mode=21);break;case 26:if(0===p)break t;v[y++]=e.length,p--,e.mode=21;break;case 27:if(e.wrap){for(;g<32;){if(0===b)break t;b--,E|=d[m++]<<g,g+=8}if(S-=p,t.total_out+=S,e.total+=S,S&&(t.adler=e.check=e.flags?s(e.check,v,S,y-S):i(e.check,v,S,y-S)),S=p,(e.flags?E:w(E))!==e.check){t.msg="incorrect data check",e.mode=30;break}g=E=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;g<32;){if(0===b)break t;b--,E+=d[m++]<<g,g+=8}if(E!==(4294967295&e.total)){t.msg="incorrect length check",e.mode=30;break}g=E=0}e.mode=29;case 29:x=1;break t;case 30:x=-3;break t;case 31:return-4;case 32:default:return h}return t.next_out=y,t.avail_out=p,t.next_in=m,t.avail_in=b,e.hold=E,e.bits=g,(e.wsize||S!==t.avail_out&&e.mode<30&&(e.mode<27||4!==r))&&k(t,t.output,t.next_out,S-t.avail_out)?(e.mode=31,-4):(P-=t.avail_in,S-=t.avail_out,t.total_in+=P,t.total_out+=S,e.total+=S,e.wrap&&S&&(t.adler=e.check=e.flags?s(e.check,v,S,t.next_out-S):i(e.check,v,S,t.next_out-S)),t.data_type=e.bits+(e.last?64:0)+(12===e.mode?128:0)+(20===e.mode||15===e.mode?256:0),(0==P&&0===S||4===r)&&x===c&&(x=-5),x)},e.inflateEnd=function(t){if(!t||!t.state)return h;var r=t.state;return r.window&&(r.window=null),t.state=null,c},e.inflateGetHeader=function(t,r){var e;return t&&t.state?0==(2&(e=t.state).wrap)?h:((e.head=r).done=!1,c):h},e.inflateSetDictionary=function(t,r){var e,n=r.length;return t&&t.state?0!==(e=t.state).wrap&&11!==e.mode?h:11===e.mode&&i(1,r,n,0)!==e.check?-3:k(t,r,n,n)?(e.mode=31,-4):(e.havedict=1,c):h},e.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,e){var n=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(t,r,e,u,f,c,h,l){var d,v,w,m,y,b,p,E,g,P=l.bits,S=0,_=0,k=0,T=0,O=0,A=0,$=0,j=0,R=0,D=0,N=null,I=0,M=new n.Buf16(16),x=new n.Buf16(16),C=null,L=0;for(S=0;S<=15;S++)M[S]=0;for(_=0;_<u;_++)M[r[e+_]]++;for(O=P,T=15;1<=T&&0===M[T];T--);if(T<O&&(O=T),0===T)return f[c++]=20971520,f[c++]=20971520,l.bits=1,0;for(k=1;k<T&&0===M[k];k++);for(O<k&&(O=k),S=j=1;S<=15;S++)if(j<<=1,(j-=M[S])<0)return-1;if(0<j&&(0===t||1!==T))return-1;for(x[1]=0,S=1;S<15;S++)x[S+1]=x[S]+M[S];for(_=0;_<u;_++)0!==r[e+_]&&(h[x[r[e+_]]++]=_);if(b=0===t?(N=C=h,19):1===t?(N=i,I-=257,C=s,L-=257,256):(N=o,C=a,-1),S=k,y=c,$=_=D=0,w=-1,m=(R=1<<(A=O))-1,1===t&&852<R||2===t&&592<R)return 1;for(;;){for(p=S-$,g=h[_]<b?(E=0,h[_]):h[_]>b?(E=C[L+h[_]],N[I+h[_]]):(E=96,0),d=1<<S-$,k=v=1<<A;f[y+(D>>$)+(v-=d)]=p<<24|E<<16|g|0,0!==v;);for(d=1<<S-1;D&d;)d>>=1;if(0!==d?(D&=d-1,D+=d):D=0,_++,0==--M[S]){if(S===T)break;S=r[e+h[_]]}if(O<S&&(D&m)!==w){for(0===$&&($=O),y+=k,j=1<<(A=S-$);A+$<T&&!((j-=M[A+$])<=0);)A++,j<<=1;if(R+=1<<A,1===t&&852<R||2===t&&592<R)return 1;f[w=D&m]=O<<24|A<<16|y-c|0}}return 0!==D&&(f[y+D]=S-$<<24|64<<16|0),l.bits=O,0}},{"../utils/common":41}],51:[function(t,r,e){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,e){var n=t("../utils/common"),i=0,s=1;function o(t){for(var r=t.length;0<=--r;)t[r]=0}var a=0,u=29,f=256,c=f+1+u,h=30,l=19,d=2*c+1,v=15,w=16,m=7,y=256,b=16,p=17,E=18,g=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],P=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],_=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],k=new Array(2*(c+2));o(k);var T=new Array(2*h);o(T);var O=new Array(512);o(O);var A=new Array(256);o(A);var $=new Array(u);o($);var j,R,D,N=new Array(h);function I(t,r,e,n,i){this.static_tree=t,this.extra_bits=r,this.extra_base=e,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function M(t,r){this.dyn_tree=t,this.max_code=0,this.stat_desc=r}function x(t){return t<256?O[t]:O[256+(t>>>7)]}function C(t,r){t.pending_buf[t.pending++]=255&r,t.pending_buf[t.pending++]=r>>>8&255}function L(t,r,e){t.bi_valid>w-e?(t.bi_buf|=r<<t.bi_valid&65535,C(t,t.bi_buf),t.bi_buf=r>>w-t.bi_valid,t.bi_valid+=e-w):(t.bi_buf|=r<<t.bi_valid&65535,t.bi_valid+=e)}function B(t,r,e){L(t,e[2*r],e[2*r+1])}function F(t,r){for(var e=0;e|=1&t,t>>>=1,e<<=1,0<--r;);return e>>>1}function q(t,r,e){var n,i,s=new Array(v+1),o=0;for(n=1;n<=v;n++)s[n]=o=o+e[n-1]<<1;for(i=0;i<=r;i++){var a=t[2*i+1];0!==a&&(t[2*i]=F(s[a]++,a))}}function U(t){var r;for(r=0;r<c;r++)t.dyn_ltree[2*r]=0;for(r=0;r<h;r++)t.dyn_dtree[2*r]=0;for(r=0;r<l;r++)t.bl_tree[2*r]=0;t.dyn_ltree[2*y]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function W(t){8<t.bi_valid?C(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function G(t,r,e,n){var i=2*r,s=2*e;return t[i]<t[s]||t[i]===t[s]&&n[r]<=n[e]}function z(t,r,e){for(var n=t.heap[e],i=e<<1;i<=t.heap_len&&(i<t.heap_len&&G(r,t.heap[i+1],t.heap[i],t.depth)&&i++,!G(r,n,t.heap[i],t.depth));)t.heap[e]=t.heap[i],e=i,i<<=1;t.heap[e]=n}function H(t,r,e){var n,i,s,o,a=0;if(0!==t.last_lit)for(;n=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],i=t.pending_buf[t.l_buf+a],a++,0===n?B(t,i,r):(B(t,(s=A[i])+f+1,r),0!==(o=g[s])&&L(t,i-=$[s],o),B(t,s=x(--n),e),0!==(o=P[s])&&L(t,n-=N[s],o)),a<t.last_lit;);B(t,y,r)}function Z(t,r){var e,n,i,s=r.dyn_tree,o=r.stat_desc.static_tree,a=r.stat_desc.has_stree,u=r.stat_desc.elems,f=-1;for(t.heap_len=0,t.heap_max=d,e=0;e<u;e++)0!==s[2*e]?(t.heap[++t.heap_len]=f=e,t.depth[e]=0):s[2*e+1]=0;for(;t.heap_len<2;)s[2*(i=t.heap[++t.heap_len]=f<2?++f:0)]=1,t.depth[i]=0,t.opt_len--,a&&(t.static_len-=o[2*i+1]);for(r.max_code=f,e=t.heap_len>>1;1<=e;e--)z(t,s,e);for(i=u;e=t.heap[1],t.heap[1]=t.heap[t.heap_len--],z(t,s,1),n=t.heap[1],t.heap[--t.heap_max]=e,t.heap[--t.heap_max]=n,s[2*i]=s[2*e]+s[2*n],t.depth[i]=(t.depth[e]>=t.depth[n]?t.depth[e]:t.depth[n])+1,s[2*e+1]=s[2*n+1]=i,t.heap[1]=i++,z(t,s,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,r){var e,n,i,s,o,a,u=r.dyn_tree,f=r.max_code,c=r.stat_desc.static_tree,h=r.stat_desc.has_stree,l=r.stat_desc.extra_bits,w=r.stat_desc.extra_base,m=r.stat_desc.max_length,y=0;for(s=0;s<=v;s++)t.bl_count[s]=0;for(u[2*t.heap[t.heap_max]+1]=0,e=t.heap_max+1;e<d;e++)m<(s=u[2*u[2*(n=t.heap[e])+1]+1]+1)&&(s=m,y++),u[2*n+1]=s,f<n||(t.bl_count[s]++,o=0,w<=n&&(o=l[n-w]),a=u[2*n],t.opt_len+=a*(s+o),h&&(t.static_len+=a*(c[2*n+1]+o)));if(0!==y){do{for(s=m-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[m]--,y-=2}while(0<y);for(s=m;0!==s;s--)for(n=t.bl_count[s];0!==n;)f<(i=t.heap[--e])||(u[2*i+1]!==s&&(t.opt_len+=(s-u[2*i+1])*u[2*i],u[2*i+1]=s),n--)}}(t,r),q(s,f,t.bl_count)}function Q(t,r,e){var n,i,s=-1,o=r[1],a=0,u=7,f=4;for(0===o&&(u=138,f=3),r[2*(e+1)+1]=65535,n=0;n<=e;n++)i=o,o=r[2*(n+1)+1],++a<u&&i===o||(a<f?t.bl_tree[2*i]+=a:0!==i?(i!==s&&t.bl_tree[2*i]++,t.bl_tree[2*b]++):a<=10?t.bl_tree[2*p]++:t.bl_tree[2*E]++,s=i,f=(a=0)===o?(u=138,3):i===o?(u=6,3):(u=7,4))}function J(t,r,e){var n,i,s=-1,o=r[1],a=0,u=7,f=4;for(0===o&&(u=138,f=3),n=0;n<=e;n++)if(i=o,o=r[2*(n+1)+1],!(++a<u&&i===o)){if(a<f)for(;B(t,i,t.bl_tree),0!=--a;);else 0!==i?(i!==s&&(B(t,i,t.bl_tree),a--),B(t,b,t.bl_tree),L(t,a-3,2)):a<=10?(B(t,p,t.bl_tree),L(t,a-3,3)):(B(t,E,t.bl_tree),L(t,a-11,7));s=i,f=(a=0)===o?(u=138,3):i===o?(u=6,3):(u=7,4)}}o(N);var V=!1;function K(t,r,e,i){L(t,(a<<1)+(i?1:0),3),function(t,r,e,i){W(t),i&&(C(t,e),C(t,~e)),n.arraySet(t.pending_buf,t.window,r,e,t.pending),t.pending+=e}(t,r,e,!0)}e._tr_init=function(t){V||(function(){var t,r,e,n,i,s=new Array(v+1);for(n=e=0;n<u-1;n++)for($[n]=e,t=0;t<1<<g[n];t++)A[e++]=n;for(A[e-1]=n,n=i=0;n<16;n++)for(N[n]=i,t=0;t<1<<P[n];t++)O[i++]=n;for(i>>=7;n<h;n++)for(N[n]=i<<7,t=0;t<1<<P[n]-7;t++)O[256+i++]=n;for(r=0;r<=v;r++)s[r]=0;for(t=0;t<=143;)k[2*t+1]=8,t++,s[8]++;for(;t<=255;)k[2*t+1]=9,t++,s[9]++;for(;t<=279;)k[2*t+1]=7,t++,s[7]++;for(;t<=287;)k[2*t+1]=8,t++,s[8]++;for(q(k,c+1,s),t=0;t<h;t++)T[2*t+1]=5,T[2*t]=F(t,5);j=new I(k,g,f+1,c,v),R=new I(T,P,0,h,v),D=new I(new Array(0),S,0,l,m)}(),V=!0),t.l_desc=new M(t.dyn_ltree,j),t.d_desc=new M(t.dyn_dtree,R),t.bl_desc=new M(t.bl_tree,D),t.bi_buf=0,t.bi_valid=0,U(t)},e._tr_stored_block=K,e._tr_flush_block=function(t,r,e,n){var o,a,u=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var r,e=4093624447;for(r=0;r<=31;r++,e>>>=1)if(1&e&&0!==t.dyn_ltree[2*r])return i;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return s;for(r=32;r<f;r++)if(0!==t.dyn_ltree[2*r])return s;return i}(t)),Z(t,t.l_desc),Z(t,t.d_desc),u=function(t){var r;for(Q(t,t.dyn_ltree,t.l_desc.max_code),Q(t,t.dyn_dtree,t.d_desc.max_code),Z(t,t.bl_desc),r=l-1;3<=r&&0===t.bl_tree[2*_[r]+1];r--);return t.opt_len+=3*(r+1)+5+5+4,r}(t),o=t.opt_len+3+7>>>3,(a=t.static_len+3+7>>>3)<=o&&(o=a)):o=a=e+5,e+4<=o&&-1!==r?K(t,r,e,n):4===t.strategy||a===o?(L(t,2+(n?1:0),3),H(t,k,T)):(L(t,4+(n?1:0),3),function(t,r,e,n){var i;for(L(t,r-257,5),L(t,e-1,5),L(t,n-4,4),i=0;i<n;i++)L(t,t.bl_tree[2*_[i]+1],3);J(t,t.dyn_ltree,r-1),J(t,t.dyn_dtree,e-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,u+1),H(t,t.dyn_ltree,t.dyn_dtree)),U(t),n&&W(t)},e._tr_tally=function(t,r,e){return t.pending_buf[t.d_buf+2*t.last_lit]=r>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&r,t.pending_buf[t.l_buf+t.last_lit]=255&e,t.last_lit++,0===r?t.dyn_ltree[2*e]++:(t.matches++,r--,t.dyn_ltree[2*(A[e]+f+1)]++,t.dyn_dtree[2*x(r)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){L(t,2,3),B(t,y,k),function(t){16===t.bi_valid?(C(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":41}],53:[function(t,r,e){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,r,e){(function(t){!function(t,r){if(!t.setImmediate){var e,n,i,s,o=1,a={},u=!1,f=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,e="[object process]"==={}.toString.call(t.process)?function(t){G.nextTick((function(){l(t)}))}:function(){if(t.postMessage&&!t.importScripts){var r=!0,e=t.onmessage;return t.onmessage=function(){r=!1},t.postMessage("","*"),t.onmessage=e,r}}()?(s="setImmediate$"+Math.random()+"$",t.addEventListener?t.addEventListener("message",d,!1):t.attachEvent("onmessage",d),function(r){t.postMessage(s+r,"*")}):t.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){l(t.data)},function(t){i.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(n=f.documentElement,function(t){var r=f.createElement("script");r.onreadystatechange=function(){l(t),r.onreadystatechange=null,n.removeChild(r),r=null},n.appendChild(r)}):function(t){setTimeout(l,0,t)},c.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var r=new Array(arguments.length-1),n=0;n<r.length;n++)r[n]=arguments[n+1];var i={callback:t,args:r};return a[o]=i,e(o),o++},c.clearImmediate=h}function h(t){delete a[t]}function l(t){if(u)setTimeout(l,0,t);else{var e=a[t];if(e){u=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(r,n)}}(e)}finally{h(t),u=!1}}}}function d(r){r.source===t&&"string"==typeof r.data&&0===r.data.indexOf(s)&&l(+r.data.slice(s.length))}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,"undefined"!=typeof ir?ir:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)}))}));const nn=(()=>{if("undefined"==typeof self)return!1;return"showOpenFilePicker"in self})(),sn=nn?Promise.resolve().then((function(){return hn})):Promise.resolve().then((function(){return pn}));async function on(...t){return(await sn).default(...t)}nn?Promise.resolve().then((function(){return wn})):Promise.resolve().then((function(){return gn}));const an=nn?Promise.resolve().then((function(){return yn})):Promise.resolve().then((function(){return Sn}));async function un(...t){return(await an).default(...t)}const fn=async t=>{const r=await t.getFile();return r.handle=t,r};var cn=async(t=[{}])=>{Array.isArray(t)||(t=[t]);const r=[];t.forEach(((t,e)=>{r[e]={description:t.description||"Files",accept:{}},t.mimeTypes?t.mimeTypes.map((n=>{r[e].accept[n]=t.extensions||[]})):r[e].accept["*/*"]=t.extensions||[]}));const e=await window.showOpenFilePicker({id:t[0].id,startIn:t[0].startIn,types:r,multiple:t[0].multiple||!1,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1}),n=await Promise.all(e.map(fn));return t[0].multiple?n:n[0]},hn={__proto__:null,default:cn};function ln(t){function r(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var r=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:r}}))}return ln=function(t){this.s=t,this.n=t.next},ln.prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(t){var e=this.s.return;return void 0===e?Promise.resolve({value:t,done:!0}):r(e.apply(this.s,arguments))},throw:function(t){var e=this.s.return;return void 0===e?Promise.reject(t):r(e.apply(this.s,arguments))}},new ln(t)}const dn=async(t,r,e=t.name,n)=>{const i=[],s=[];var o,a=!1,u=!1;try{for(var f,c=function(t){var r,e,n,i=2;for("undefined"!=typeof Symbol&&(e=Symbol.asyncIterator,n=Symbol.iterator);i--;){if(e&&null!=(r=t[e]))return r.call(t);if(n&&null!=(r=t[n]))return new ln(r.call(t));e="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}(t.values());a=!(f=await c.next()).done;a=!1){const o=f.value,a=`${e}/${o.name}`;"file"===o.kind?s.push(o.getFile().then((r=>(r.directoryHandle=t,r.handle=o,Object.defineProperty(r,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>a}))))):"directory"!==o.kind||!r||n&&n(o)||i.push(dn(o,r,a,n))}}catch(t){u=!0,o=t}finally{try{a&&null!=c.return&&await c.return()}finally{if(u)throw o}}return[...(await Promise.all(i)).flat(),...await Promise.all(s)]};var vn=async(t={})=>{t.recursive=t.recursive||!1,t.mode=t.mode||"read";const r=await window.showDirectoryPicker({id:t.id,startIn:t.startIn,mode:t.mode});return(await(await r.values()).next()).done?[r]:dn(r,t.recursive,void 0,t.skipDirectory)},wn={__proto__:null,default:vn},mn=async(t,r=[{}],e=null,n=!1,i=null)=>{Array.isArray(r)||(r=[r]),r[0].fileName=r[0].fileName||"Untitled";const s=[];let o=null;if(t instanceof Blob&&t.type?o=t.type:t.headers&&t.headers.get("content-type")&&(o=t.headers.get("content-type")),r.forEach(((t,r)=>{s[r]={description:t.description||"Files",accept:{}},t.mimeTypes?(0===r&&o&&t.mimeTypes.push(o),t.mimeTypes.map((e=>{s[r].accept[e]=t.extensions||[]}))):o?s[r].accept[o]=t.extensions||[]:s[r].accept["*/*"]=t.extensions||[]})),e)try{await e.getFile()}catch(t){if(e=null,n)throw t}const a=e||await window.showSaveFilePicker({suggestedName:r[0].fileName,id:r[0].id,startIn:r[0].startIn,types:s,excludeAcceptAllOption:r[0].excludeAcceptAllOption||!1});!e&&i&&i(a);const u=await a.createWritable();if("stream"in t){const r=t.stream();return await r.pipeTo(u),a}return"body"in t?(await t.body.pipeTo(u),a):(await u.write(await t),await u.close(),a)},yn={__proto__:null,default:mn},bn=async(t=[{}])=>(Array.isArray(t)||(t=[t]),new Promise(((r,e)=>{const n=document.createElement("input");n.type="file";const i=[...t.map((t=>t.mimeTypes||[])),...t.map((t=>t.extensions||[]))].join();n.multiple=t[0].multiple||!1,n.accept=i||"",n.style.display="none",document.body.append(n);const s=t=>{"function"==typeof o&&o(),r(t)},o=t[0].legacySetup&&t[0].legacySetup(s,(()=>o(e)),n),a=()=>{window.removeEventListener("focus",a),n.remove()};n.addEventListener("click",(()=>{window.addEventListener("focus",a)})),n.addEventListener("change",(()=>{window.removeEventListener("focus",a),n.remove(),s(n.multiple?Array.from(n.files):n.files[0])})),"showPicker"in HTMLInputElement.prototype?n.showPicker():n.click()}))),pn={__proto__:null,default:bn},En=async(t=[{}])=>(Array.isArray(t)||(t=[t]),t[0].recursive=t[0].recursive||!1,new Promise(((r,e)=>{const n=document.createElement("input");n.type="file",n.webkitdirectory=!0;const i=t=>{"function"==typeof s&&s(),r(t)},s=t[0].legacySetup&&t[0].legacySetup(i,(()=>s(e)),n);n.addEventListener("change",(()=>{let r=Array.from(n.files);t[0].recursive?t[0].recursive&&t[0].skipDirectory&&(r=r.filter((r=>r.webkitRelativePath.split("/").every((r=>!t[0].skipDirectory({name:r,kind:"directory"})))))):r=r.filter((t=>2===t.webkitRelativePath.split("/").length)),i(r)})),"showPicker"in HTMLInputElement.prototype?n.showPicker():n.click()}))),gn={__proto__:null,default:En},Pn=async(t,r={})=>{Array.isArray(r)&&(r=r[0]);const e=document.createElement("a");let n=t;"body"in t&&(n=await async function(t,r){const e=t.getReader(),n=new ReadableStream({start:t=>async function r(){return e.read().then((({done:e,value:n})=>{if(!e)return t.enqueue(n),r();t.close()}))}()}),i=new Response(n),s=await i.blob();return e.releaseLock(),new Blob([s],{type:r})}(t.body,t.headers.get("content-type"))),e.download=r.fileName||"Untitled",e.href=URL.createObjectURL(await n);const i=()=>{"function"==typeof s&&s()},s=r.legacySetup&&r.legacySetup(i,(()=>s()),e);return e.addEventListener("click",(()=>{setTimeout((()=>URL.revokeObjectURL(e.href)),3e4),i()})),e.click(),null},Sn={__proto__:null,default:Pn};const _n=":host{display:block;--jeep-sqlite-top:10%;--jeep-sqlite-right:1%;--jeep-sqlite-font-size:2em;--jeep-sqlite-padding:2%;--jeep-sqlite-background-color:#a9a9a9;--jeep-sqlite-color:#ffffff}#fileElem{display:none}#pickButton{position:absolute;top:var(--jeep-sqlite-top);right:var(--jeep-sqlite-right);font-size:var(--jeep-sqlite-font-size);padding:var(--jeep-sqlite-padding);background-color:var(--jeep-sqlite-background-color);color:var(--jeep-sqlite-color)}#saveButton{position:absolute;top:var(--jeep-sqlite-top);right:var(--jeep-sqlite-right);font-size:var(--jeep-sqlite-font-size);padding:var(--jeep-sqlite-padding);background-color:var(--jeep-sqlite-background-color);color:var(--jeep-sqlite-color)}";const kn=class{constructor(e){t(this,e);this.importProgress=r(this,"jeepSqliteImportProgress",7);this.exportProgress=r(this,"jeepSqliteExportProgress",7);this.HTTPRequestEnded=r(this,"jeepSqliteHTTPRequestEnded",7);this.PickDatabaseEnded=r(this,"jeepSqlitePickDatabaseEnded",7);this.SaveDatabaseEnded=r(this,"jeepSqliteSaveDatabaseToDisk",7);this.isStore=false;this._dbDict={};this.databaseList={};this._versionUpgrades={};this._overwrite=true;this.autoSave=false;this.wasmPath=undefined;this.pickText=undefined;this.saveText=undefined;this.buttonOptions=undefined;this.innerAutoSave=undefined;this.innerWasmPath=undefined;this.innerPickText=undefined;this.innerSaveText=undefined;this.innerButtonOptions=undefined}parseAutoSave(t){this.innerAutoSave=t}parseWasmPath(t){this.innerWasmPath=t}parsePickText(t){this.innerPickText=t}parseSaveText(t){this.innerSaveText=t}parseButtonOptions(t){this.innerButtonOptions=JSON.parse(t);const r=Object.keys(this.innerButtonOptions);for(const t of r){switch(t){case"top":{this.el.style.setProperty("--jeep-sqlite-top",this.innerButtonOptions[t]);break}case"right":{this.el.style.setProperty("--jeep-sqlite-right",this.innerButtonOptions[t]);break}case"fontSize":{this.el.style.setProperty("--jeep-sqlite-font-size",this.innerButtonOptions[t]);break}case"padding":{this.el.style.setProperty("--jeep-sqlite-padding",this.innerButtonOptions[t]);break}case"backgroundColor":{this.el.style.setProperty("--jeep-sqlite-background-color",this.innerButtonOptions[t]);break}case"color":{this.el.style.setProperty("--jeep-sqlite-color",this.innerButtonOptions[t]);break}}}}async echo(t){return t}async createConnection(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;const n=t.version?t.version:1;const i=t.readonly?t.readonly:false;try{await this._createConnection(e,n,i);return Promise.resolve()}catch(t){return Promise.reject(t)}}async isConnection(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;const n=t.readonly?t.readonly:false;const i=await this._isConnection(e,n);return Promise.resolve(i)}async closeConnection(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;const n=t.readonly?t.readonly:false;try{await this._closeConnection(e,n);return Promise.resolve()}catch(t){return Promise.reject(t)}}async open(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;const n=t.readonly?t.readonly:false;try{await this._open(e,n);return Promise.resolve()}catch(t){return Promise.reject(t)}}async close(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;const n=t.readonly?t.readonly:false;try{await this._close(e,n);return Promise.resolve()}catch(t){return Promise.reject(t)}}async getVersion(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;const n=t.readonly?t.readonly:false;try{const t=await this._getVersion(e,n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async execute(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}let r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}if(!r.includes("statements")||t.statements.length===0){return Promise.reject("Must provide raw SQL statements")}const e=t.database;const n=t.statements;let i=true;const s=t.readonly?t.readonly:false;if(r.includes("transaction"))i=t.transaction;try{const t=await this._execute(e,n,i,s);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async executeSet(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}let r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}if(!r.includes("set")||t.set.length===0){return Promise.reject("Must provide a non-empty set of SQL statements")}const e=t.database;const n=t.set;let i=true;if(r.includes("transaction"))i=t.transaction;const s=t.readonly?t.readonly:false;try{const t=await this._executeSet(e,n,i,s);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async run(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}let r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}if(!r.includes("statement")||t.statement.length===0){return Promise.reject("Must provide a run statement")}const e=t.database;const n=t.statement;let i=[];if(r.includes("values")){i=t.values.length>0?t.values:[]}let s=true;if(r.includes("transaction"))s=t.transaction;const o=t.readonly?t.readonly:false;try{const t=await this._run(e,n,i,s,o);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async query(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}let r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}if(!r.includes("statement")||t.statement.length===0){return Promise.reject("Must provide a query statement")}let e=[];if(r.includes("values")){e=t.values.length>0?t.values:[]}const n=t.database;const i=t.statement;const s=t.readonly?t.readonly:false;try{const t=await this._query(n,i,e,s);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async getTableList(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}let r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;const n=t.readonly?t.readonly:false;try{const t=await this._getTableList(e,n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isDBExists(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;const n=t.readonly?t.readonly:false;try{const t=await this._isDBExists(e,n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isDBOpen(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;const n=t.readonly?t.readonly:false;try{const t=await this._isDBOpen(e,n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async deleteDatabase(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;const n=t.readonly?t.readonly:false;try{return await this._deleteDatabase(e,n)}catch(t){return Promise.reject(t)}}async isStoreOpen(){return Promise.resolve(this.isStore)}async copyFromAssets(t){let r;if(t!=null){const e=Object.keys(t);r=e.includes("overwrite")?t.overwrite:true}else{r=true}if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}try{await this._copyFromAssets(r);return Promise.resolve()}catch(t){return Promise.reject(t)}}async isTableExists(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;if(!r.includes("table")){return Promise.reject("Must provide a table name")}const n=t.table;const i=t.readonly?t.readonly:false;try{const t=await this._isTableExists(e,n,i);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async createSyncTable(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}let r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;const n=t.readonly?t.readonly:false;try{const t=await this._createSyncTable(e,n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async getSyncDate(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}let r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;const n=t.readonly?t.readonly:false;try{const t=await this._getSyncDate(e,n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async setSyncDate(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}let r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}if(!r.includes("syncdate")){return Promise.reject("Must provide a synchronization date")}const e=t.database;const n=t.syncdate;const i=t.readonly?t.readonly:false;try{await this._setSyncDate(e,n,i);return Promise.resolve()}catch(t){return Promise.reject(t)}}async isJsonValid(t){const r=Object.keys(t);if(!r.includes("jsonstring")){return Promise.reject("Must provide a json object")}const e=t.jsonstring;try{const t=await this._isJsonValid(e);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async importFromJson(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("jsonstring")){return Promise.reject("Must provide a json object")}const e=t.jsonstring;try{const t=await this._importFromJson(e);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async exportToJson(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}if(!r.includes("jsonexportmode")){return Promise.reject("Must provide a json export mode")}const e=t.database;const n=t.jsonexportmode;const i=t.readonly?t.readonly:false;try{const t=await this._exportToJson(e,n,i);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async deleteExportedRows(t){const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;const n=t.readonly?t.readonly:false;try{await this._deleteExportedRows(e,n);return Promise.resolve()}catch(t){return Promise.reject(t)}}async addUpgradeStatement(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}let r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}if(!r.includes("upgrade")){return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object")}const e=t.database;const n=t.upgrade;for(const t of n){const r=Object.keys(t);if(!r.includes("toVersion")||!r.includes("statements")){return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object")}if(typeof t.toVersion!="number"){return Promise.reject("upgrade.toVersion must be a number")}if(this._versionUpgrades[e]){this._versionUpgrades[e][t.toVersion]=t}else{const r={};r[t.toVersion]=t;this._versionUpgrades[e]=r}}return Promise.resolve()}async isDatabase(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;try{const t=await this._isDatabase(e);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async getDatabaseList(){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}try{const t=await this._getDatabaseList();return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async checkConnectionsConsistency(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("dbNames")){return Promise.reject(`Must provide a list of connection's name`)}const e=t.dbNames;if(!r.includes("openModes")){return Promise.reject(`Must provide a list of connection's open mode`)}const n=t.openModes;try{const t=await this._checkConnectionsConsistency(e,n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async saveToStore(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;const n=t.readonly?t.readonly:false;try{await this._saveToStore(e,n);return Promise.resolve()}catch(t){return Promise.reject(t)}}async saveToLocalDisk(t){const r=Object.keys(t);if(!r.includes("database")){return Promise.reject("Must provide a database name")}const e=t.database;try{await this._saveToLocalDisk(e);return Promise.resolve()}catch(t){return Promise.reject(t)}}async getFromLocalDiskToStore(t){const r=t.overwrite?t.overwrite:true;if(nn){console.log("Using the File System Access API.")}else{console.log("Using the fallback implementation.")}try{await this._getFromLocalDiskToStore(r);return Promise.resolve()}catch(t){return Promise.reject(t)}}async getFromHTTPRequest(t){if(!this.isStore){return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`)}let r=Object.keys(t);if(!r.includes("url")){return Promise.reject("Must provide an url")}const e=t.url;const n=t.overwrite?t.overwrite:true;try{await this._getFromHTTPRequest(e,n);return Promise.resolve()}catch(t){return Promise.reject(t)}}connectedCallback(){this.parseAutoSave(this.autoSave!==undefined?this.autoSave:false);this.parseWasmPath(this.wasmPath!==undefined?this.wasmPath:"/assets");this.parseSaveText(this.saveText!==undefined?this.saveText:"Save");this.parsePickText(this.pickText!==undefined?this.pickText:"Pick a database");if(this.buttonOptions!==undefined){this.parseButtonOptions(this.buttonOptions)}this.openStore("jeepSqliteStore","databases").then((t=>{this.isStore=t}))}componentWillLoad(){}async componentDidLoad(){this._element=this.el.shadowRoot;if(!this.isStore){console.log("jeep-sqlite isStore = false")}}async _createConnection(t,r,e){let n={};const i=Object.keys(this._versionUpgrades);if(i.length!==0&&i.includes(t)){n=this._versionUpgrades[t]}const s=Object.keys(this._dbDict);let o;try{if(s.length>0&&(s.includes("RW_"+t)||s.includes("RO_"+t))){o=s.includes("RW_"+t)?this._dbDict["RW_"+t]:this._dbDict["RO_"+t]}else{o=new tn(t+"SQLite.db",r,n,this.store,this.innerAutoSave,this.innerWasmPath)}const i=e?"RO_"+t:"RW_"+t;this._dbDict[i]=o;return Promise.resolve()}catch(t){return Promise.reject(t.message)}}async _isConnection(t,r){const e=Object.keys(this._dbDict);const n=r?"RO_"+t:"RW_"+t;if(e.includes(n)){return{result:true}}else{return{result:false}}}async _closeConnection(t,r){const e=Object.keys(this._dbDict);const n=r?"RO_"+t:"RW_"+t;if(!e.includes(n)){return Promise.reject(`CloseConnection: No available connection for ${t}`)}const i=this._dbDict[n];try{if(i.isDBOpen()){try{await i.close()}catch(r){return Promise.reject(`CloseConnection: close ${t} failed ${r}`)}}delete this._dbDict[n];return Promise.resolve()}catch(t){return Promise.reject(`CloseConnection: ${t.message}`)}}async _open(t,r){const e=Object.keys(this._dbDict);const n=r?"RO_"+t:"RW_"+t;if(!e.includes(n)){return Promise.reject(`Open: No available connection for ${t}`)}const i=this._dbDict[n];try{await i.open();return Promise.resolve()}catch(t){return Promise.reject(`Open: ${t.message}`)}}async _close(t,r){const e=Object.keys(this._dbDict);const n=r?"RO_"+t:"RW_"+t;if(!e.includes(n)){return Promise.reject(`Close: No available connection for ${t}`)}const i=this._dbDict[n];try{await i.close();return Promise.resolve()}catch(t){return Promise.reject(`Close: ${t.message}`)}}async _saveToStore(t,r){const e=Object.keys(this._dbDict);const n=r?"RO_"+t:"RW_"+t;if(!e.includes(n)){return Promise.reject(`SaveToStore: No available connection for ${t}`)}const i=this._dbDict[n];try{await i.saveToStore();return Promise.resolve()}catch(t){return Promise.reject(`SaveToStore: ${t.message}`)}}async _saveToLocalDisk(t){try{const r=Object.keys(this._dbDict);const e="RW_"+t;if(!r.includes(e)){return Promise.reject("_saveToLocalDisk: No available connection for "+`${t}`)}const n=this._dbDict[e];const i=await n.exportDB();this._blob=await this.uint2blob(i);const s=`${t}SQLite.db`;this._opts={fileName:s,extensions:[".db"]};this._buttonSaveEl=document.createElement("button");this._buttonSaveEl.setAttribute("id","saveButton");this._buttonSaveEl.innerHTML=`${this.innerSaveText} ${s}`;this._element.appendChild(this._buttonSaveEl);this._buttonSaveEl.addEventListener("click",this.saveFile.bind(this));return Promise.resolve()}catch(t){return Promise.reject(`_saveToLocalDisk: ${t.message}`)}}async _getFromLocalDiskToStore(t){this._buttonPickEl=document.createElement("button");this._buttonPickEl.setAttribute("id","pickButton");this._buttonPickEl.innerHTML=`${this.innerPickText}`;this._element.appendChild(this._buttonPickEl);this._buttonPickEl.addEventListener("click",this.pickDatabase.bind(this));this._overwrite=t;return Promise.resolve()}async pickDatabase(){try{const t=await on({extensions:[".db"]});let r=await this.blob2uint(t);const e=this.removePathSuffix(t.name);const n=this.setPathSuffix(t.name);const i=await Mr(n,this.store);if(!i){await Nr(n,r,this.store)}else{if(this._overwrite){await Ir(n,this.store);await Nr(n,r,this.store)}else{this.PickDatabaseEnded.emit({message:`Error: cannot overwrite ${n}`})}}this._element.removeChild(this._buttonPickEl);this.PickDatabaseEnded.emit({db_name:e})}catch(t){const r=t.message?t.message:t;this.PickDatabaseEnded.emit({message:r})}}async saveFile(){try{await un(this._blob,[this._opts]);const t=this._opts.fileName;this._element.removeChild(this._buttonSaveEl);this.SaveDatabaseEnded.emit({db_name:t})}catch(t){const r=t.message?t.message:t;this.SaveDatabaseEnded.emit({message:r})}}async _getVersion(t,r){const e=Object.keys(this._dbDict);const n=r?"RO_"+t:"RW_"+t;if(!e.includes(n)){return Promise.reject(`Open: No available connection for ${t}`)}const i=this._dbDict[n];try{const t=await i.getVersion();const r={};r.version=t;return Promise.resolve(r)}catch(t){return Promise.reject(`Open: ${t.message}`)}}async _execute(t,r,e,n){const i=Object.keys(this._dbDict);const s="RW_"+t;if(!i.includes(s)){return Promise.reject(`Execute: No available connection for ${t}`)}const o=this._dbDict[s];if(n){return Promise.reject(`Execute: not allowed in read-only mode`)}let a={};const u=r[0].substring(0,6);if(this.innerAutoSave&&u==="COMMIT"){a.changes.changes=0;return Promise.resolve(a)}try{const t=await o.executeSQL(r,e);a={changes:{changes:t}};return Promise.resolve(a)}catch(t){return Promise.reject(`Execute: ${t.message}`)}}async _executeSet(t,r,e,n){const i=Object.keys(this._dbDict);const s="RW_"+t;if(!i.includes(s)){return Promise.reject(`ExecuteSet: No available connection for ${t}`)}const o=this._dbDict[s];if(n){return Promise.reject(`ExecuteSet: not allowed in read-only mode`)}for(const t of r){if(!("statement"in t)||!("values"in t)){return Promise.reject("ExecuteSet: Must provide a set as "+"Array of {statement,values}")}}try{const t=await o.execSet(r,e);const n={changes:{changes:t.changes,lastId:t.lastId}};return Promise.resolve(n)}catch(t){return Promise.reject(`ExecuteSet: ${t.message}`)}}async _run(t,r,e,n,i){const s=Object.keys(this._dbDict);const o="RW_"+t;if(!s.includes(o)){return Promise.reject(`Run: No available connection for ${t}`)}const a=this._dbDict[o];if(i){return Promise.reject(`Run: not allowed in read-only mode`)}let u={};const f=r.substring(0,6);if(this.innerAutoSave&&f==="COMMIT"){u={changes:{changes:0}};return Promise.resolve(u)}try{const t=await a.runSQL(r,e,n);u={changes:{changes:t.changes,lastId:t.lastId}};return Promise.resolve(u)}catch(t){return Promise.reject(`Run: ${t.message}`)}}async _query(t,r,e,n){const i=Object.keys(this._dbDict);const s=n?"RO_"+t:"RW_"+t;if(!i.includes(s)){return Promise.reject(`Query: No available connection for ${t}`)}const o=this._dbDict[s];let a=[];const u=r.substring(0,6);if(this.innerAutoSave&&u==="COMMIT"){return Promise.resolve({values:a})}try{a=await o.selectSQL(r,e);return Promise.resolve({values:a})}catch(t){return Promise.reject(`Query failed: ${t.message}`)}}async _getTableList(t,r){const e=Object.keys(this._dbDict);const n=r?"RO_"+t:"RW_"+t;if(!e.includes(n)){return Promise.reject(`GetTableList: No available connection for ${t}`)}const i=this._dbDict[n];let s=[];try{s=await i.getTableNames();return Promise.resolve({values:s})}catch(t){return Promise.reject(`GetTableList failed: ${t.message}`)}}async _isDBExists(t,r){const e=Object.keys(this._dbDict);const n=r?"RO_"+t:"RW_"+t;if(!e.includes(n)){return Promise.reject(`IsDBExists: No available connection for ${t}`)}const i=this._dbDict[n];try{const r=await i.isDBExists(t+"SQLite.db");const e={result:r};return Promise.resolve(e)}catch(t){return Promise.reject(`IsDBExists: ${t.message}`)}}async _isDBOpen(t,r){const e=Object.keys(this._dbDict);const n=r?"RO_"+t:"RW_"+t;if(!e.includes(n)){return Promise.reject(`IsDBOpen: No available connection for ${t}`)}const i=this._dbDict[n];try{const r=await i.isDBOpen(t+"SQLite.db");const e={result:r};return Promise.resolve(e)}catch(t){return Promise.reject(`IsDBOpen: ${t.message}`)}}async _deleteDatabase(t,r){const e=Object.keys(this._dbDict);const n="RW_"+t;if(!e.includes(n)){return Promise.reject(`DeleteDatabase: No available connection for ${t}`)}const i=this._dbDict[n];if(r){return Promise.reject(`DeleteDatabase: not allowed in read-only mode`)}try{await i.deleteDB(t+"SQLite.db");return Promise.resolve()}catch(t){return Promise.reject(`DeleteDatabase: ${t.message}`)}}async _isTableExists(t,r,e){const n=Object.keys(this._dbDict);const i=e?"RO_"+t:"RW_"+t;if(!n.includes(i)){return Promise.reject(`IsTableExists: No available connection for ${t}`)}const s=this._dbDict[i];try{const t=await s.isTable(r);const e={result:t};return Promise.resolve(e)}catch(t){return Promise.reject(`IsTableExists: ${t.message}`)}}async _createSyncTable(t,r){const e=Object.keys(this._dbDict);const n="RW_"+t;if(!e.includes(n)){return Promise.reject("CreateSyncTable: No available connection for "+`${t}`)}const i=this._dbDict[n];if(r){return Promise.reject(`CreateSyncTable: not allowed in read-only mode`)}try{const t=await i.createSyncTable();return Promise.resolve({changes:{changes:t}})}catch(t){return Promise.reject(`CreateSyncTable: ${t.message}`)}}async _getSyncDate(t,r){const e=Object.keys(this._dbDict);const n=r?"RO_"+t:"RW_"+t;if(!e.includes(n)){return Promise.reject("GetSyncDate: No available connection for "+`${t}`)}const i=this._dbDict[n];try{const t=await i.getSyncDate();return Promise.resolve({syncDate:t})}catch(t){return Promise.reject(`GetSyncDate: ${t.message}`)}}async _setSyncDate(t,r,e){const n=Object.keys(this._dbDict);const i="RW_"+t;if(!n.includes(i)){return Promise.reject("SetSyncDate: No available connection for "+`${t}`)}const s=this._dbDict[i];if(e){return Promise.reject(`SetSyncDate: not allowed in read-only mode`)}try{const t=await s.setSyncDate(r);if(t.result){return Promise.resolve()}else{return Promise.reject(`SetSyncDate: ${t.message}`)}}catch(t){return Promise.reject(`SetSyncDate: ${t.message}`)}}async _isJsonValid(t){const r=JSON.parse(t);const e=await Ur(r);if(!e){return Promise.reject("IsJsonValid: Stringify Json Object not Valid")}else{return Promise.resolve({result:true})}}async _importFromJson(t){var r,e;const n=JSON.parse(t);const i=await Ur(n);if(!i){return Promise.reject("ImportFromJson: Stringify Json Object not Valid")}const s=n;const o=`${s.database}SQLite.db`;const a=(r=s.version)!==null&&r!==void 0?r:1;const u=s.mode;const f=(e=s.overwrite)!==null&&e!==void 0?e:false;const c=new tn(o,a,{},this.store,this.innerAutoSave,this.innerWasmPath);try{if(f&&u==="full"){const t=Mr(o,this.store);if(t){await Ir(o,this.store)}}await c.open();const t=await c.getTableNames();if(u==="full"&&t.length>0){const t=await c.getVersion();if(a<t){return Promise.reject(`ImportFromJson: Cannot import a version lower than ${t}`)}if(t===a){return Promise.resolve({changes:{changes:0}})}}const r=await c.importJson(s,this.importProgress);await c.close();return Promise.resolve({changes:{changes:r}})}catch(t){return Promise.reject(`ImportFromJson: ${t.message}`)}}async _exportToJson(t,r,e){const n=Object.keys(this._dbDict);const i=e?"RO_"+t:"RW_"+t;if(!n.includes(i)){return Promise.reject("ExportToJson: No available connection for "+`${t}`)}const s=this._dbDict[i];try{const t=await s.exportJson(r,this.exportProgress);const e=Object.keys(t);if(e.includes("message")){return Promise.reject(`ExportToJson: ${t.message}`)}else{return Promise.resolve({export:t})}}catch(t){return Promise.reject(`ExportToJson: ${t.message}`)}}async _deleteExportedRows(t,r){const e=Object.keys(this._dbDict);const n="RW_"+t;if(!e.includes(n)){return Promise.reject("ExportToJson: No available connection for "+`${t}`)}const i=this._dbDict[n];if(r){return Promise.reject(`SetSyncDate: not allowed in read-only mode`)}try{await i.deleteExportedRows()}catch(t){return Promise.reject(`DeleteExportedRows: ${t.message}`)}}async _copyFromAssets(t){const r=await this.loadJSON("assets/databases/databases.json");if(r!=null){this.databaseList=JSON.parse(r);const e=Object.keys(this.databaseList);if(e.includes("databaseList")){try{for(const r of this.databaseList.databaseList){if(r.substring(r.length-3)===".db"){await this.copyDatabase(`assets/databases/${r}`,t)}if(r.substring(r.length-4)===".zip"){await this.unzipDatabase(`assets/databases/${r}`,t)}}return Promise.resolve()}catch(t){return Promise.reject(`CopyFromAssets: ${t.message}`)}}else{return Promise.reject(`CopyFromAssets: no key databaseList in databases.json`)}}else{return Promise.reject(`CopyFromAssets: no databases.json file in assets/databases folder`)}}async _getFromHTTPRequest(t,r){try{let e;if(t.substring(t.length-3)===".db"){await this.copyDatabase(t,r);e="db"}if(t.substring(t.length-4)===".zip"){await this.unzipDatabase(t,r);e="zip"}this.HTTPRequestEnded.emit({message:e});return Promise.resolve()}catch(t){return Promise.reject(`GetFromHTTPRequest: ${t.message}`)}}async _isDatabase(t){try{const r=await Mr(t+"SQLite.db",this.store);const e={result:r};return Promise.resolve(e)}catch(t){return Promise.reject(`IsDatabase: ${t.message}`)}}async _getDatabaseList(){try{const t=await Lr(this.store);const r={values:t};return Promise.resolve(r)}catch(t){return Promise.reject(`GetDatabaseList: ${t.message}`)}}async _checkConnectionsConsistency(t,r){const e={};e.result=false;const n=[];t.forEach(((t,e)=>{n.push(`${r[e]}_${t}`)}));try{let t=new Set(Object.keys(this._dbDict));const r=new Set(n);if(r.size===0){await this._resetDbDict(Object.keys(this._dbDict));return Promise.resolve(e)}if(t.size<r.size){await this._resetDbDict(Object.keys(this._dbDict));return Promise.resolve(e)}if(t.size>r.size){const e={};for(const n of t){if(!Array.from(r.keys()).includes(n)){let t=false;if(n.substring(0,3)==="RO_"){t=true}e.database=n.substring(3);e.readonly=t;await this._closeConnection(e.database,e.readonly)}}}t=new Set(Object.keys(this._dbDict));if(t.size===r.size){const n=await this.symmetricDifference(t,r);if(n.size===0){e.result=true;return Promise.resolve(e)}else{await this._resetDbDict(Object.keys(this._dbDict));return Promise.resolve(e)}}else{await this._resetDbDict(Object.keys(this._dbDict));return Promise.resolve(e)}}catch(t){return Promise.reject(`CheckConnectionsConsistency: ${t.message}`)}}async _resetDbDict(t){try{for(const r of t){const t={};let e=false;if(r.substring(0,3)==="RO_"){e=true}t.database=r.substring(3);t.readonly=e;await this._closeConnection(t.database,t.readonly)}}catch(t){return Promise.reject(`ResetDbDict: ${t.message}`)}}async symmetricDifference(t,r){let e=new Set;t.forEach((t=>{e.add(t.substring(3))}));let n=new Set;r.forEach((t=>{n.add(t.substring(3))}));for(const t of n){if(e.has(t)){e.delete(t)}else{e.add(t)}}return e}async unzipDatabase(t,r){return new Promise(((e,n)=>{var i=new XMLHttpRequest;i.open("GET",t,true);i.responseType="arraybuffer";i.onerror=()=>{n(new Error(`unzipDatabase: failed`))};i.onload=()=>{en.loadAsync(i.response).then((async t=>{const i=Object.keys(t.files);try{for(const e of i){await this.retrieveDBFromZip(t.files,e,r)}e()}catch(t){n(new Error(`unzipDatabase Error: ${t.message}`))}}))};i.send()}))}async retrieveDBFromZip(t,r,e){return new Promise(((n,i)=>{t[r].async("nodebuffer").then((async t=>{try{const s=new Uint8Array(t);const o=this.setPathSuffix(r);const a=await Mr(o,this.store);if(!a){await Nr(o,s,this.store)}else{if(e){await Ir(o,this.store);await Nr(o,s,this.store)}else{i(new Error(`retrieveDBFromZip: cannot overwrite ${o}`))}}n()}catch(t){i(new Error(`retrieveDBFromZip:: ${t.message}`))}}))}))}async copyDatabase(t,r){return new Promise(((e,n)=>{var i=new XMLHttpRequest;var s;i.open("GET",t,true);i.responseType="arraybuffer";i.onerror=()=>{n(new Error(`CopyDatabase: failed`))};i.onload=()=>{s=new Uint8Array(i.response)};i.onloadend=async()=>{const i=this.setPathSuffix(t);const o=await Mr(i,this.store);if(!o){await Nr(i,s,this.store)}else{if(r){await Ir(i,this.store);await Nr(i,s,this.store)}else{n(new Error(`CopyDatabase Error: cannot overwrite ${i}`))}}e()};i.send()}))}async loadJSON(t){return new Promise(((r,e)=>{var n=new XMLHttpRequest;n.overrideMimeType("application/json");n.open("GET",t,true);n.onerror=()=>{e(new Error(`LoadJSON: failed`))};n.onreadystatechange=function(){if(n.status==404)r(null);if(n.readyState==4&&n.status==200){r(n.responseText)}};n.send(null)}))}async openStore(t,r){let e=false;const n=this.setConfig(t,r);this.store=rn.createInstance(n);if(this.store!=null){this.storeName=t;e=true}return e}setConfig(t,r){const e={name:t,storeName:r,driver:[rn.INDEXEDDB],version:1};return e}removePathSuffix(t){return t.includes("SQLite.db")?t.split("SQLite.db")[0]:t.substring(t.length-3)===".db"?t.slice(0,t.lastIndexOf(".")):t}setPathSuffix(t){let r=t.slice(t.lastIndexOf("/")+1);const e=".db";if(t.substring(t.length-3)===e){if(!t.includes("SQLite.db")){r=t.slice(t.lastIndexOf("/")+1,-3)+"SQLite.db"}}return r}async blob2uint(t){return new Response(t).arrayBuffer().then((t=>{const r=new Uint8Array(t);return r}))}async uint2blob(t){const r=new Blob([t.buffer]);return Promise.resolve(r)}render(){return}static get assetsDirs(){return["assets"]}get el(){return e(this)}static get watchers(){return{autoSave:["parseAutoSave"],wasmPath:["parseWasmPath"],pickText:["parsePickText"],saveText:["parseSaveText"],buttonOptions:["parseButtonOptions"]}}};kn.style=_n;export{kn as jeep_sqlite};
//# sourceMappingURL=p-4e29d03a.entry.js.map